(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[283],{9742:function(E,I){"use strict";I.byteLength=$,I.toByteArray=W,I.fromByteArray=te;for(var P=[],_=[],T="undefined"!=typeof Uint8Array?Uint8Array:Array,L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=0,F=L.length;N<F;++N)P[N]=L[N],_[L.charCodeAt(N)]=N;function O(E){var I=E.length;if(I%4>0)throw Error("Invalid string. Length must be a multiple of 4");var P=E.indexOf("=");-1===P&&(P=I);var _=P===I?0:4-P%4;return[P,_]}function $(E){var I=O(E),P=I[0],_=I[1];return(P+_)*3/4-_}function Z(E,I,P){return(I+P)*3/4-P}function W(E){var I,P,L=O(E),N=L[0],F=L[1],$=new T(Z(E,N,F)),W=0,J=F>0?N-4:N;for(P=0;P<J;P+=4)I=_[E.charCodeAt(P)]<<18|_[E.charCodeAt(P+1)]<<12|_[E.charCodeAt(P+2)]<<6|_[E.charCodeAt(P+3)],$[W++]=I>>16&255,$[W++]=I>>8&255,$[W++]=255&I;return 2===F&&(I=_[E.charCodeAt(P)]<<2|_[E.charCodeAt(P+1)]>>4,$[W++]=255&I),1===F&&(I=_[E.charCodeAt(P)]<<10|_[E.charCodeAt(P+1)]<<4|_[E.charCodeAt(P+2)]>>2,$[W++]=I>>8&255,$[W++]=255&I),$}function J(E){return P[E>>18&63]+P[E>>12&63]+P[E>>6&63]+P[63&E]}function Q(E,I,P){for(var _=[],T=I;T<P;T+=3)_.push(J((E[T]<<16&16711680)+(E[T+1]<<8&65280)+(255&E[T+2])));return _.join("")}function te(E){for(var I,_=E.length,T=_%3,L=[],N=16383,F=0,O=_-T;F<O;F+=N)L.push(Q(E,F,F+N>O?O:F+N));return 1===T?L.push(P[(I=E[_-1])>>2]+P[I<<4&63]+"=="):2===T&&L.push(P[(I=(E[_-2]<<8)+E[_-1])>>10]+P[I>>4&63]+P[I<<2&63]+"="),L.join("")}_["-".charCodeAt(0)]=62,_["_".charCodeAt(0)]=63},8764:function(E,I,P){"use strict";/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _,T=P(9742),L=P(645),N="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;I.lW=Z,_=tc,I.h2=50;var F=2147483647;function O(){try{var E=new Uint8Array(1),I={foo:function(){return 42}};return Object.setPrototypeOf(I,Uint8Array.prototype),Object.setPrototypeOf(E,I),42===E.foo()}catch(E){return!1}}function $(E){if(E>F)throw RangeError('The value "'+E+'" is invalid for option "size"');var I=new Uint8Array(E);return Object.setPrototypeOf(I,Z.prototype),I}function Z(E,I,P){if("number"==typeof E){if("string"==typeof I)throw TypeError('The "string" argument must be of type string. Received type number');return te(E)}return W(E,I,P)}function W(E,I,P){if("string"==typeof E)return ti(E,I);if(ArrayBuffer.isView(E))return ta(E);if(null==E)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E);if(tz(E,ArrayBuffer)||E&&tz(E.buffer,ArrayBuffer)||"undefined"!=typeof SharedArrayBuffer&&(tz(E,SharedArrayBuffer)||E&&tz(E.buffer,SharedArrayBuffer)))return th(E,I,P);if("number"==typeof E)throw TypeError('The "value" argument must not be of type number. Received type number');var _=E.valueOf&&E.valueOf();if(null!=_&&_!==E)return Z.from(_,I,P);var T=tu(E);if(T)return T;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof E[Symbol.toPrimitive])return Z.from(E[Symbol.toPrimitive]("string"),I,P);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof E)}function J(E){if("number"!=typeof E)throw TypeError('"size" argument must be of type number');if(E<0)throw RangeError('The value "'+E+'" is invalid for option "size"')}function Q(E,I,P){return(J(E),E<=0)?$(E):void 0!==I?"string"==typeof P?$(E).fill(I,P):$(E).fill(I):$(E)}function te(E){return J(E),$(E<0?0:0|tf(E))}function ti(E,I){if(("string"!=typeof I||""===I)&&(I="utf8"),!Z.isEncoding(I))throw TypeError("Unknown encoding: "+I);var P=0|td(E,I),_=$(P),T=_.write(E,I);return T!==P&&(_=_.slice(0,T)),_}function tn(E){for(var I=E.length<0?0:0|tf(E.length),P=$(I),_=0;_<I;_+=1)P[_]=255&E[_];return P}function ta(E){if(tz(E,Uint8Array)){var I=new Uint8Array(E);return th(I.buffer,I.byteOffset,I.byteLength)}return tn(E)}function th(E,I,P){var _;if(I<0||E.byteLength<I)throw RangeError('"offset" is outside of buffer bounds');if(E.byteLength<I+(P||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(_=void 0===I&&void 0===P?new Uint8Array(E):void 0===P?new Uint8Array(E,I):new Uint8Array(E,I,P),Z.prototype),_}function tu(E){if(Z.isBuffer(E)){var I=0|tf(E.length),P=$(I);return 0===P.length||E.copy(P,0,0,I),P}return void 0!==E.length?"number"!=typeof E.length||tG(E.length)?$(0):tn(E):"Buffer"===E.type&&Array.isArray(E.data)?tn(E.data):void 0}function tf(E){if(E>=F)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");return 0|E}function tc(E){return+E!=E&&(E=0),Z.alloc(+E)}function td(E,I){if(Z.isBuffer(E))return E.length;if(ArrayBuffer.isView(E)||tz(E,ArrayBuffer))return E.byteLength;if("string"!=typeof E)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof E);var P=E.length,_=arguments.length>2&&!0===arguments[2];if(!_&&0===P)return 0;for(var T=!1;;)switch(I){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return tF(E).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*P;case"hex":return P>>>1;case"base64":return tV(E).length;default:if(T)return _?-1:tF(E).length;I=(""+I).toLowerCase(),T=!0}}function tm(E,I,P){var _=!1;if((void 0===I||I<0)&&(I=0),I>this.length||((void 0===P||P>this.length)&&(P=this.length),P<=0||(P>>>=0)<=(I>>>=0)))return"";for(E||(E="utf8");;)switch(E){case"hex":return tD(this,I,P);case"utf8":case"utf-8":return tE(this,I,P);case"ascii":return tI(this,I,P);case"latin1":case"binary":return tP(this,I,P);case"base64":return tk(this,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t_(this,I,P);default:if(_)throw TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase(),_=!0}}function tp(E,I,P){var _=E[I];E[I]=E[P],E[P]=_}function tg(E,I,P,_,T){if(0===E.length)return -1;if("string"==typeof P?(_=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),tG(P=+P)&&(P=T?0:E.length-1),P<0&&(P=E.length+P),P>=E.length){if(T)return -1;P=E.length-1}else if(P<0){if(!T)return -1;P=0}if("string"==typeof I&&(I=Z.from(I,_)),Z.isBuffer(I))return 0===I.length?-1:tw(E,I,P,_,T);if("number"==typeof I)return(I&=255,"function"==typeof Uint8Array.prototype.indexOf)?T?Uint8Array.prototype.indexOf.call(E,I,P):Uint8Array.prototype.lastIndexOf.call(E,I,P):tw(E,[I],P,_,T);throw TypeError("val must be string, number or Buffer")}function tw(E,I,P,_,T){var L,N=1,F=E.length,O=I.length;if(void 0!==_&&("ucs2"===(_=String(_).toLowerCase())||"ucs-2"===_||"utf16le"===_||"utf-16le"===_)){if(E.length<2||I.length<2)return -1;N=2,F/=2,O/=2,P/=2}function $(E,I){return 1===N?E[I]:E.readUInt16BE(I*N)}if(T){var Z=-1;for(L=P;L<F;L++)if($(E,L)===$(I,-1===Z?0:L-Z)){if(-1===Z&&(Z=L),L-Z+1===O)return Z*N}else -1!==Z&&(L-=L-Z),Z=-1}else for(P+O>F&&(P=F-O),L=P;L>=0;L--){for(var W=!0,J=0;J<O;J++)if($(E,L+J)!==$(I,J)){W=!1;break}if(W)return L}return -1}function tb(E,I,P,_){P=Number(P)||0;var T=E.length-P;_?(_=Number(_))>T&&(_=T):_=T;var L=I.length;_>L/2&&(_=L/2);for(var N=0;N<_;++N){var F=parseInt(I.substr(2*N,2),16);if(tG(F))break;E[P+N]=F}return N}function ty(E,I,P,_){return tX(tF(I,E.length-P),E,P,_)}function tv(E,I,P,_){return tX(tO(I),E,P,_)}function tx(E,I,P,_){return tX(tV(I),E,P,_)}function tM(E,I,P,_){return tX(tY(I,E.length-P),E,P,_)}function tk(E,I,P){return 0===I&&P===E.length?T.fromByteArray(E):T.fromByteArray(E.slice(I,P))}function tE(E,I,P){P=Math.min(E.length,P);for(var _=[],T=I;T<P;){var L,N,F,O,$=E[T],Z=null,W=$>239?4:$>223?3:$>191?2:1;if(T+W<=P)switch(W){case 1:$<128&&(Z=$);break;case 2:(192&(L=E[T+1]))==128&&(O=(31&$)<<6|63&L)>127&&(Z=O);break;case 3:L=E[T+1],N=E[T+2],(192&L)==128&&(192&N)==128&&(O=(15&$)<<12|(63&L)<<6|63&N)>2047&&(O<55296||O>57343)&&(Z=O);break;case 4:L=E[T+1],N=E[T+2],F=E[T+3],(192&L)==128&&(192&N)==128&&(192&F)==128&&(O=(15&$)<<18|(63&L)<<12|(63&N)<<6|63&F)>65535&&O<1114112&&(Z=O)}null===Z?(Z=65533,W=1):Z>65535&&(Z-=65536,_.push(Z>>>10&1023|55296),Z=56320|1023&Z),_.push(Z),T+=W}return tS(_)}_=2147483647,Z.TYPED_ARRAY_SUPPORT=O(),Z.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Z.prototype,"parent",{enumerable:!0,get:function(){if(Z.isBuffer(this))return this.buffer}}),Object.defineProperty(Z.prototype,"offset",{enumerable:!0,get:function(){if(Z.isBuffer(this))return this.byteOffset}}),Z.poolSize=8192,Z.from=function(E,I,P){return W(E,I,P)},Object.setPrototypeOf(Z.prototype,Uint8Array.prototype),Object.setPrototypeOf(Z,Uint8Array),Z.alloc=function(E,I,P){return Q(E,I,P)},Z.allocUnsafe=function(E){return te(E)},Z.allocUnsafeSlow=function(E){return te(E)},Z.isBuffer=function(E){return null!=E&&!0===E._isBuffer&&E!==Z.prototype},Z.compare=function(E,I){if(tz(E,Uint8Array)&&(E=Z.from(E,E.offset,E.byteLength)),tz(I,Uint8Array)&&(I=Z.from(I,I.offset,I.byteLength)),!Z.isBuffer(E)||!Z.isBuffer(I))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(E===I)return 0;for(var P=E.length,_=I.length,T=0,L=Math.min(P,_);T<L;++T)if(E[T]!==I[T]){P=E[T],_=I[T];break}return P<_?-1:_<P?1:0},Z.isEncoding=function(E){switch(String(E).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Z.concat=function(E,I){if(!Array.isArray(E))throw TypeError('"list" argument must be an Array of Buffers');if(0===E.length)return Z.alloc(0);if(void 0===I)for(P=0,I=0;P<E.length;++P)I+=E[P].length;var P,_=Z.allocUnsafe(I),T=0;for(P=0;P<E.length;++P){var L=E[P];if(tz(L,Uint8Array))T+L.length>_.length?Z.from(L).copy(_,T):Uint8Array.prototype.set.call(_,L,T);else if(Z.isBuffer(L))L.copy(_,T);else throw TypeError('"list" argument must be an Array of Buffers');T+=L.length}return _},Z.byteLength=td,Z.prototype._isBuffer=!0,Z.prototype.swap16=function(){var E=this.length;if(E%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var I=0;I<E;I+=2)tp(this,I,I+1);return this},Z.prototype.swap32=function(){var E=this.length;if(E%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var I=0;I<E;I+=4)tp(this,I,I+3),tp(this,I+1,I+2);return this},Z.prototype.swap64=function(){var E=this.length;if(E%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var I=0;I<E;I+=8)tp(this,I,I+7),tp(this,I+1,I+6),tp(this,I+2,I+5),tp(this,I+3,I+4);return this},Z.prototype.toString=function(){var E=this.length;return 0===E?"":0==arguments.length?tE(this,0,E):tm.apply(this,arguments)},Z.prototype.toLocaleString=Z.prototype.toString,Z.prototype.equals=function(E){if(!Z.isBuffer(E))throw TypeError("Argument must be a Buffer");return this===E||0===Z.compare(this,E)},Z.prototype.inspect=function(){var E="",P=I.h2;return E=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(E+=" ... "),"<Buffer "+E+">"},N&&(Z.prototype[N]=Z.prototype.inspect),Z.prototype.compare=function(E,I,P,_,T){if(tz(E,Uint8Array)&&(E=Z.from(E,E.offset,E.byteLength)),!Z.isBuffer(E))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof E);if(void 0===I&&(I=0),void 0===P&&(P=E?E.length:0),void 0===_&&(_=0),void 0===T&&(T=this.length),I<0||P>E.length||_<0||T>this.length)throw RangeError("out of range index");if(_>=T&&I>=P)return 0;if(_>=T)return -1;if(I>=P)return 1;if(I>>>=0,P>>>=0,_>>>=0,T>>>=0,this===E)return 0;for(var L=T-_,N=P-I,F=Math.min(L,N),O=this.slice(_,T),$=E.slice(I,P),W=0;W<F;++W)if(O[W]!==$[W]){L=O[W],N=$[W];break}return L<N?-1:N<L?1:0},Z.prototype.includes=function(E,I,P){return -1!==this.indexOf(E,I,P)},Z.prototype.indexOf=function(E,I,P){return tg(this,E,I,P,!0)},Z.prototype.lastIndexOf=function(E,I,P){return tg(this,E,I,P,!1)},Z.prototype.write=function(E,I,P,_){if(void 0===I)_="utf8",P=this.length,I=0;else if(void 0===P&&"string"==typeof I)_=I,P=this.length,I=0;else if(isFinite(I))I>>>=0,isFinite(P)?(P>>>=0,void 0===_&&(_="utf8")):(_=P,P=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var T=this.length-I;if((void 0===P||P>T)&&(P=T),E.length>0&&(P<0||I<0)||I>this.length)throw RangeError("Attempt to write outside buffer bounds");_||(_="utf8");for(var L=!1;;)switch(_){case"hex":return tb(this,E,I,P);case"utf8":case"utf-8":return ty(this,E,I,P);case"ascii":case"latin1":case"binary":return tv(this,E,I,P);case"base64":return tx(this,E,I,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return tM(this,E,I,P);default:if(L)throw TypeError("Unknown encoding: "+_);_=(""+_).toLowerCase(),L=!0}},Z.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tA=4096;function tS(E){var I=E.length;if(I<=tA)return String.fromCharCode.apply(String,E);for(var P="",_=0;_<I;)P+=String.fromCharCode.apply(String,E.slice(_,_+=tA));return P}function tI(E,I,P){var _="";P=Math.min(E.length,P);for(var T=I;T<P;++T)_+=String.fromCharCode(127&E[T]);return _}function tP(E,I,P){var _="";P=Math.min(E.length,P);for(var T=I;T<P;++T)_+=String.fromCharCode(E[T]);return _}function tD(E,I,P){var _=E.length;(!I||I<0)&&(I=0),(!P||P<0||P>_)&&(P=_);for(var T="",L=I;L<P;++L)T+=tj[E[L]];return T}function t_(E,I,P){for(var _=E.slice(I,P),T="",L=0;L<_.length-1;L+=2)T+=String.fromCharCode(_[L]+256*_[L+1]);return T}function tC(E,I,P){if(E%1!=0||E<0)throw RangeError("offset is not uint");if(E+I>P)throw RangeError("Trying to access beyond buffer length")}function tB(E,I,P,_,T,L){if(!Z.isBuffer(E))throw TypeError('"buffer" argument must be a Buffer instance');if(I>T||I<L)throw RangeError('"value" argument is out of bounds');if(P+_>E.length)throw RangeError("Index out of range")}function tT(E,I,P,_,T,L){if(P+_>E.length||P<0)throw RangeError("Index out of range")}function tR(E,I,P,_,T){return I=+I,P>>>=0,T||tT(E,I,P,4,34028234663852886e22,-34028234663852886e22),L.write(E,I,P,_,23,4),P+4}function tU(E,I,P,_,T){return I=+I,P>>>=0,T||tT(E,I,P,8,17976931348623157e292,-17976931348623157e292),L.write(E,I,P,_,52,8),P+8}Z.prototype.slice=function(E,I){var P=this.length;E=~~E,I=void 0===I?P:~~I,E<0?(E+=P)<0&&(E=0):E>P&&(E=P),I<0?(I+=P)<0&&(I=0):I>P&&(I=P),I<E&&(I=E);var _=this.subarray(E,I);return Object.setPrototypeOf(_,Z.prototype),_},Z.prototype.readUintLE=Z.prototype.readUIntLE=function(E,I,P){E>>>=0,I>>>=0,P||tC(E,I,this.length);for(var _=this[E],T=1,L=0;++L<I&&(T*=256);)_+=this[E+L]*T;return _},Z.prototype.readUintBE=Z.prototype.readUIntBE=function(E,I,P){E>>>=0,I>>>=0,P||tC(E,I,this.length);for(var _=this[E+--I],T=1;I>0&&(T*=256);)_+=this[E+--I]*T;return _},Z.prototype.readUint8=Z.prototype.readUInt8=function(E,I){return E>>>=0,I||tC(E,1,this.length),this[E]},Z.prototype.readUint16LE=Z.prototype.readUInt16LE=function(E,I){return E>>>=0,I||tC(E,2,this.length),this[E]|this[E+1]<<8},Z.prototype.readUint16BE=Z.prototype.readUInt16BE=function(E,I){return E>>>=0,I||tC(E,2,this.length),this[E]<<8|this[E+1]},Z.prototype.readUint32LE=Z.prototype.readUInt32LE=function(E,I){return E>>>=0,I||tC(E,4,this.length),(this[E]|this[E+1]<<8|this[E+2]<<16)+16777216*this[E+3]},Z.prototype.readUint32BE=Z.prototype.readUInt32BE=function(E,I){return E>>>=0,I||tC(E,4,this.length),16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])},Z.prototype.readIntLE=function(E,I,P){E>>>=0,I>>>=0,P||tC(E,I,this.length);for(var _=this[E],T=1,L=0;++L<I&&(T*=256);)_+=this[E+L]*T;return _>=(T*=128)&&(_-=Math.pow(2,8*I)),_},Z.prototype.readIntBE=function(E,I,P){E>>>=0,I>>>=0,P||tC(E,I,this.length);for(var _=I,T=1,L=this[E+--_];_>0&&(T*=256);)L+=this[E+--_]*T;return L>=(T*=128)&&(L-=Math.pow(2,8*I)),L},Z.prototype.readInt8=function(E,I){return(E>>>=0,I||tC(E,1,this.length),128&this[E])?-((255-this[E]+1)*1):this[E]},Z.prototype.readInt16LE=function(E,I){E>>>=0,I||tC(E,2,this.length);var P=this[E]|this[E+1]<<8;return 32768&P?4294901760|P:P},Z.prototype.readInt16BE=function(E,I){E>>>=0,I||tC(E,2,this.length);var P=this[E+1]|this[E]<<8;return 32768&P?4294901760|P:P},Z.prototype.readInt32LE=function(E,I){return E>>>=0,I||tC(E,4,this.length),this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24},Z.prototype.readInt32BE=function(E,I){return E>>>=0,I||tC(E,4,this.length),this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]},Z.prototype.readFloatLE=function(E,I){return E>>>=0,I||tC(E,4,this.length),L.read(this,E,!0,23,4)},Z.prototype.readFloatBE=function(E,I){return E>>>=0,I||tC(E,4,this.length),L.read(this,E,!1,23,4)},Z.prototype.readDoubleLE=function(E,I){return E>>>=0,I||tC(E,8,this.length),L.read(this,E,!0,52,8)},Z.prototype.readDoubleBE=function(E,I){return E>>>=0,I||tC(E,8,this.length),L.read(this,E,!1,52,8)},Z.prototype.writeUintLE=Z.prototype.writeUIntLE=function(E,I,P,_){if(E=+E,I>>>=0,P>>>=0,!_){var T=Math.pow(2,8*P)-1;tB(this,E,I,P,T,0)}var L=1,N=0;for(this[I]=255&E;++N<P&&(L*=256);)this[I+N]=E/L&255;return I+P},Z.prototype.writeUintBE=Z.prototype.writeUIntBE=function(E,I,P,_){if(E=+E,I>>>=0,P>>>=0,!_){var T=Math.pow(2,8*P)-1;tB(this,E,I,P,T,0)}var L=P-1,N=1;for(this[I+L]=255&E;--L>=0&&(N*=256);)this[I+L]=E/N&255;return I+P},Z.prototype.writeUint8=Z.prototype.writeUInt8=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,1,255,0),this[I]=255&E,I+1},Z.prototype.writeUint16LE=Z.prototype.writeUInt16LE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,2,65535,0),this[I]=255&E,this[I+1]=E>>>8,I+2},Z.prototype.writeUint16BE=Z.prototype.writeUInt16BE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,2,65535,0),this[I]=E>>>8,this[I+1]=255&E,I+2},Z.prototype.writeUint32LE=Z.prototype.writeUInt32LE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,4,4294967295,0),this[I+3]=E>>>24,this[I+2]=E>>>16,this[I+1]=E>>>8,this[I]=255&E,I+4},Z.prototype.writeUint32BE=Z.prototype.writeUInt32BE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,4,4294967295,0),this[I]=E>>>24,this[I+1]=E>>>16,this[I+2]=E>>>8,this[I+3]=255&E,I+4},Z.prototype.writeIntLE=function(E,I,P,_){if(E=+E,I>>>=0,!_){var T=Math.pow(2,8*P-1);tB(this,E,I,P,T-1,-T)}var L=0,N=1,F=0;for(this[I]=255&E;++L<P&&(N*=256);)E<0&&0===F&&0!==this[I+L-1]&&(F=1),this[I+L]=(E/N>>0)-F&255;return I+P},Z.prototype.writeIntBE=function(E,I,P,_){if(E=+E,I>>>=0,!_){var T=Math.pow(2,8*P-1);tB(this,E,I,P,T-1,-T)}var L=P-1,N=1,F=0;for(this[I+L]=255&E;--L>=0&&(N*=256);)E<0&&0===F&&0!==this[I+L+1]&&(F=1),this[I+L]=(E/N>>0)-F&255;return I+P},Z.prototype.writeInt8=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,1,127,-128),E<0&&(E=255+E+1),this[I]=255&E,I+1},Z.prototype.writeInt16LE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,2,32767,-32768),this[I]=255&E,this[I+1]=E>>>8,I+2},Z.prototype.writeInt16BE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,2,32767,-32768),this[I]=E>>>8,this[I+1]=255&E,I+2},Z.prototype.writeInt32LE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,4,2147483647,-2147483648),this[I]=255&E,this[I+1]=E>>>8,this[I+2]=E>>>16,this[I+3]=E>>>24,I+4},Z.prototype.writeInt32BE=function(E,I,P){return E=+E,I>>>=0,P||tB(this,E,I,4,2147483647,-2147483648),E<0&&(E=4294967295+E+1),this[I]=E>>>24,this[I+1]=E>>>16,this[I+2]=E>>>8,this[I+3]=255&E,I+4},Z.prototype.writeFloatLE=function(E,I,P){return tR(this,E,I,!0,P)},Z.prototype.writeFloatBE=function(E,I,P){return tR(this,E,I,!1,P)},Z.prototype.writeDoubleLE=function(E,I,P){return tU(this,E,I,!0,P)},Z.prototype.writeDoubleBE=function(E,I,P){return tU(this,E,I,!1,P)},Z.prototype.copy=function(E,I,P,_){if(!Z.isBuffer(E))throw TypeError("argument should be a Buffer");if(P||(P=0),_||0===_||(_=this.length),I>=E.length&&(I=E.length),I||(I=0),_>0&&_<P&&(_=P),_===P||0===E.length||0===this.length)return 0;if(I<0)throw RangeError("targetStart out of bounds");if(P<0||P>=this.length)throw RangeError("Index out of range");if(_<0)throw RangeError("sourceEnd out of bounds");_>this.length&&(_=this.length),E.length-I<_-P&&(_=E.length-I+P);var T=_-P;return this===E&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(I,P,_):Uint8Array.prototype.set.call(E,this.subarray(P,_),I),T},Z.prototype.fill=function(E,I,P,_){if("string"==typeof E){if("string"==typeof I?(_=I,I=0,P=this.length):"string"==typeof P&&(_=P,P=this.length),void 0!==_&&"string"!=typeof _)throw TypeError("encoding must be a string");if("string"==typeof _&&!Z.isEncoding(_))throw TypeError("Unknown encoding: "+_);if(1===E.length){var T,L=E.charCodeAt(0);("utf8"===_&&L<128||"latin1"===_)&&(E=L)}}else"number"==typeof E?E&=255:"boolean"==typeof E&&(E=Number(E));if(I<0||this.length<I||this.length<P)throw RangeError("Out of range index");if(P<=I)return this;if(I>>>=0,P=void 0===P?this.length:P>>>0,E||(E=0),"number"==typeof E)for(T=I;T<P;++T)this[T]=E;else{var N=Z.isBuffer(E)?E:Z.from(E,_),F=N.length;if(0===F)throw TypeError('The value "'+E+'" is invalid for argument "value"');for(T=0;T<P-I;++T)this[T+I]=N[T%F]}return this};var tL=/[^+/0-9A-Za-z-_]/g;function tN(E){if((E=(E=E.split("=")[0]).trim().replace(tL,"")).length<2)return"";for(;E.length%4!=0;)E+="=";return E}function tF(E,I){I=I||1/0;for(var P,_=E.length,T=null,L=[],N=0;N<_;++N){if((P=E.charCodeAt(N))>55295&&P<57344){if(!T){if(P>56319||N+1===_){(I-=3)>-1&&L.push(239,191,189);continue}T=P;continue}if(P<56320){(I-=3)>-1&&L.push(239,191,189),T=P;continue}P=(T-55296<<10|P-56320)+65536}else T&&(I-=3)>-1&&L.push(239,191,189);if(T=null,P<128){if((I-=1)<0)break;L.push(P)}else if(P<2048){if((I-=2)<0)break;L.push(P>>6|192,63&P|128)}else if(P<65536){if((I-=3)<0)break;L.push(P>>12|224,P>>6&63|128,63&P|128)}else if(P<1114112){if((I-=4)<0)break;L.push(P>>18|240,P>>12&63|128,P>>6&63|128,63&P|128)}else throw Error("Invalid code point")}return L}function tO(E){for(var I=[],P=0;P<E.length;++P)I.push(255&E.charCodeAt(P));return I}function tY(E,I){for(var P,_,T=[],L=0;L<E.length&&!((I-=2)<0);++L)_=(P=E.charCodeAt(L))>>8,T.push(P%256),T.push(_);return T}function tV(E){return T.toByteArray(tN(E))}function tX(E,I,P,_){for(var T=0;T<_&&!(T+P>=I.length)&&!(T>=E.length);++T)I[T+P]=E[T];return T}function tz(E,I){return E instanceof I||null!=E&&null!=E.constructor&&null!=E.constructor.name&&E.constructor.name===I.name}function tG(E){return E!=E}var tj=function(){for(var E="0123456789abcdef",I=Array(256),P=0;P<16;++P)for(var _=16*P,T=0;T<16;++T)I[_+T]=E[P]+E[T];return I}()},7060:function(E,I,P){"use strict";let{IOBuffer:_}=P(9498),T=P(5578),L=[];for(let E=0;E<=8;E++)L.push(255<<E);class N extends _{constructor(E){if(1!==E.bitDepth)throw Error("Only bitDepth of 1 is supported");if(!E.height||!E.width)throw Error("ImageData width and height are required");super(E.data),this.width=E.width,this.height=E.height,this.bitDepth=E.bitDepth,this.channels=E.channels,this.components=E.components}encode(){this.encoded=new _,this.encoded.skip(14),this.writeBitmapV5Header(),this.writeColorTable();let E=this.encoded.offset;return this.writePixelArray(),this.encoded.rewind(),this.writeBitmapFileHeader(E),this.encoded.toArray()}writePixelArray(){let E,I,P=this.encoded,_=4*Math.floor((this.bitDepth*this.width+31)/32),T=Math.ceil(this.bitDepth*this.width/8),N=_-T,F=this.bitDepth*this.width%8,O=0===F?0:8-F,$=_*this.height,Z=0,W=0,J=8;P.mark(),I=this.readUint8();for(let $=this.height-1;$>=0;$--){let Q=0===$;P.reset(),P.skip($*_);for(let _=0;_<T;_++){let $=_===T-1;W<=O&&$?(P.writeByte(I<<W),0!==O&&O!==W||Q||(E=I,I=this.readByte())):0===W?(E=I,I=this.readUint8(),P.writeByte(E)):(E=I,I=this.readUint8(),P.writeByte(E<<W&L[W]|I>>J)),$&&(Z+=F||0,P.skip(N),J=8-(W=Z%8))}}_>T&&(P.reset(),P.skip($-1),P.writeUint8(0))}writeColorTable(){this.encoded.writeUint32(0).writeUint32(16777215)}writeBitmapFileHeader(E){this.encoded.writeChars("BM").writeInt32(this.encoded.lastWrittenByte).writeUint16(0).writeUint16(0).writeUint32(E)}writeBitmapV5Header(){let E=4*Math.floor((this.bitDepth*this.width+31)/32),I=E*this.height;this.encoded.writeUint32(124).writeInt32(this.width).writeInt32(this.height).writeUint16(1).writeUint16(this.bitDepth).writeUint32(T.BITMAPV5HEADER.Compression.BI_RGB).writeUint32(I).writeInt32(0).writeInt32(0).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(Math.pow(2,this.bitDepth)).writeUint32(4278190080).writeUint32(16711680).writeUint32(65280).writeUint32(255).writeUint32(T.BITMAPV5HEADER.LogicalColorSpace.LCS_sRGB).skip(36).skip(12).writeUint32(T.BITMAPV5HEADER.GamutMappingIntent.LCS_GM_IMAGES).skip(12)}}E.exports=N},5578:function(E){"use strict";E.exports={BITMAPV5HEADER:{LogicalColorSpace:{LCS_CALIBRATED_RGB:0,LCS_sRGB:1934772034,LCS_WINDOWS_COLOR_SPACE:1466527264},Compression:{BI_RGB:0,BI_RLE8:1,BI_RLE4:2,BI_BITFIELDS:3,BI_JPEG:4,BI_PNG:5,BI_CMYK:11,BI_CMYKRLE8:12,BI_CMYKRLE4:13},GamutMappingIntent:{LCS_GM_ABS_COLORIMETRIC:8,LCS_GM_BUSINESS:1,LCS_GM_GRAPHICS:2,LCS_GM_IMAGES:4}}}},4665:function(E,I,P){"use strict";let _=P(7060);I.c=function(E){let I=new _(E);return I.encode()}},7909:function(E){"use strict";let I=8192,P=[];class _{constructor(E,P){P=P||{},void 0===E&&(E=I),"number"==typeof E&&(E=new ArrayBuffer(E));let _=E.byteLength,T=P.offset?P.offset>>>0:0;E.buffer&&(_=E.byteLength-T,E=E.byteLength!==E.buffer.byteLength?E.buffer.slice(E.byteOffset+T,E.byteOffset+E.byteLength):T?E.buffer.slice(T):E.buffer),this.buffer=E,this.length=_,this.byteLength=_,this.byteOffset=0,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer),this._increment=_||I,this._mark=0}available(E){return void 0===E&&(E=1),this.offset+E<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){this.littleEndian=!0}isBigEndian(){return!this.littleEndian}setBigEndian(){this.littleEndian=!1}skip(E){void 0===E&&(E=1),this.offset+=E}seek(E){this.offset=E}mark(){this._mark=this.offset}reset(){this.offset=this._mark}rewind(){this.offset=0}ensureAvailable(E){if(void 0===E&&(E=1),!this.available(E)){let E=this._increment+this._increment;this._increment=E;let I=this.length+E,P=new Uint8Array(I);P.set(new Uint8Array(this.buffer)),this.buffer=P.buffer,this.length=I,this._data=new DataView(this.buffer)}}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(E){void 0===E&&(E=1);for(var I=new Uint8Array(E),P=0;P<E;P++)I[P]=this.readByte();return I}readInt16(){var E=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,E}readUint16(){var E=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,E}readInt32(){var E=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,E}readUint32(){var E=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat32(){var E=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat64(){var E=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,E}readChar(){return String.fromCharCode(this.readInt8())}readChars(E){void 0===E&&(E=1),P.length=E;for(var I=0;I<E;I++)P[I]=this.readChar();return P.join("")}writeBoolean(E){this.writeUint8(E?255:0)}writeInt8(E){this.ensureAvailable(1),this._data.setInt8(this.offset++,E)}writeUint8(E){this.ensureAvailable(1),this._data.setUint8(this.offset++,E)}writeByte(E){this.writeUint8(E)}writeBytes(E){this.ensureAvailable(E.length);for(var I=0;I<E.length;I++)this._data.setUint8(this.offset++,E[I])}writeInt16(E){this.ensureAvailable(2),this._data.setInt16(this.offset,E,this.littleEndian),this.offset+=2}writeUint16(E){this.ensureAvailable(2),this._data.setUint16(this.offset,E,this.littleEndian),this.offset+=2}writeInt32(E){this.ensureAvailable(4),this._data.setInt32(this.offset,E,this.littleEndian),this.offset+=4}writeUint32(E){this.ensureAvailable(4),this._data.setUint32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat32(E){this.ensureAvailable(4),this._data.setFloat32(this.offset,E,this.littleEndian),this.offset+=4}writeFloat64(E){this.ensureAvailable(8),this._data.setFloat64(this.offset,E,this.littleEndian),this.offset+=8}writeChar(E){this.writeUint8(E.charCodeAt(0))}writeChars(E){for(var I=0;I<E.length;I++)this.writeUint8(E.charCodeAt(I))}toArray(){return new Uint8Array(this.buffer,0,this.offset)}}E.exports=_},3311:function(E,I,P){"use strict";let _=P(6752);E.exports=function(E,I){let P=new _(E,I);return P.decode(I)}},8029:function(E,I,P){"use strict";let _={standard:P(4263),exif:P(9640),gps:P(5367)};class T{constructor(E){if(!E)throw Error("missing kind");this.data=null,this.fields=new Map,this.kind=E,this._map=null}get(E){if("number"==typeof E)return this.fields.get(E);if("string"==typeof E)return this.fields.get(_[this.kind].tagsByName[E]);throw Error("expected a number or string")}get map(){if(!this._map){this._map={};let I=_[this.kind].tagsById;for(var E of this.fields.keys())I[E]&&(this._map[I[E]]=this.fields.get(E))}return this._map}}E.exports=T},6486:function(E,I){"use strict";var P=new Map([[1,[1,_]],[2,[1,T]],[3,[2,L]],[4,[4,N]],[5,[8,F]],[6,[1,O]],[7,[1,_]],[8,[2,$]],[9,[4,Z]],[10,[8,W]],[11,[4,J]],[12,[8,Q]]]);function _(E,I){if(1===I)return E.readUint8();for(var P=new Uint8Array(I),_=0;_<I;_++)P[_]=E.readUint8();return P}function T(E,I){for(var P=[],_="",T=0;T<I;T++){var L=String.fromCharCode(E.readUint8());"\x00"===L?(P.push(_),_=""):_+=L}return 1===P.length?P[0]:P}function L(E,I){if(1===I)return E.readUint16();for(var P=new Uint16Array(I),_=0;_<I;_++)P[_]=E.readUint16();return P}function N(E,I){if(1===I)return E.readUint32();for(var P=new Uint32Array(I),_=0;_<I;_++)P[_]=E.readUint32();return P}function F(E,I){if(1===I)return E.readUint32()/E.readUint32();for(var P=Array(I),_=0;_<I;_++)P[_]=E.readUint32()/E.readUint32();return P}function O(E,I){if(1===I)return E.readInt8();for(var P=new Int8Array(I),_=0;_<I;_++)P[_]=E.readInt8();return P}function $(E,I){if(1===I)return E.readInt16();for(var P=new Int16Array(I),_=0;_<I;_++)P[_]=E.readInt16();return P}function Z(E,I){if(1===I)return E.readInt32();for(var P=new Int32Array(I),_=0;_<I;_++)P[_]=E.readInt32();return P}function W(E,I){if(1===I)return E.readInt32()/E.readInt32();for(var P=Array(I),_=0;_<I;_++)P[_]=E.readInt32()/E.readInt32();return P}function J(E,I){if(1===I)return E.readFloat32();for(var P=new Float32Array(I),_=0;_<I;_++)P[_]=E.readFloat32();return P}function Q(E,I){if(1===I)return E.readFloat64();for(var P=new Float64Array(I),_=0;_<I;_++)P[_]=E.readFloat64();return P}I.getByteLength=function(E,I){return P.get(E)[0]*I},I.readData=function(E,I,_){return P.get(I)[1](E,_)}},9469:function(E,I,P){"use strict";I.decode=P(3311)},9640:function(E){"use strict";let I={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},P={};for(var _ in I)P[I[_]]=_;E.exports={tagsById:I,tagsByName:P}},5367:function(E){"use strict";let I={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},P={};for(var _ in I)P[I[_]]=_;E.exports={tagsById:I,tagsByName:P}},4263:function(E){"use strict";let I={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},P={};for(var _ in I)P[I[_]]=_;E.exports={tagsById:I,tagsByName:P}},6752:function(E,I,P){"use strict";let _=P(7909),T=P(8029),L=P(8353),N=P(6486),F={ignoreImageData:!1,onlyFirst:!1};class O extends _{constructor(E,I){super(E,I),this._nextIFD=0}decode(E){E=Object.assign({},F,E);let I=[];for(this.decodeHeader();this._nextIFD;)if(I.push(this.decodeIFD(E)),E.onlyFirst)return I[0];return I}decodeHeader(){let E=this.readUint16();if(18761===E)this.setLittleEndian();else if(19789===E)this.setBigEndian();else throw Error("invalid byte order: 0x"+E.toString(16));if(42!==(E=this.readUint16()))throw Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(E){this.seek(this._nextIFD),P=E.kind?new T(E.kind):new L;let I=this.readUint16();for(var P,_=0;_<I;_++)this.decodeIFDEntry(P);return E.ignoreImageData||this.decodeImageData(P),this._nextIFD=this.readUint32(),P}decodeIFDEntry(E){let I=this.offset,P=this.readUint16(),_=this.readUint16(),T=this.readUint32();if(_<1||_>12){this.skip(4);return}let L=N.getByteLength(_,T);L>4&&this.seek(this.readUint32());let F=N.readData(this,_,T);if(E.fields.set(P,F),34665===P||34853===P){let I,_=this.offset;34665===P?I="exif":34853===P&&(I="gps"),this._nextIFD=F,E[I]=this.decodeIFD({kind:I,ignoreImageData:!0}),this.offset=_}this.seek(I),this.skip(12)}decodeImageData(E){let I=E.orientation;switch(I&&1!==I&&Q("orientation",I),E.type){case 1:case 2:this.readStripData(E);break;default:Q("image type",E.type)}}readStripData(E){let I=E.width,P=E.height,_=te(E.bitsPerSample),T=E.sampleFormat,L=I*P,N=$(L,1,_,T),F=E.compression,O=E.rowsPerStrip,ti=O*I,tn=E.stripOffsets,ta=E.stripByteCounts;for(var th=0,tu=0;tu<tn.length;tu++){var tf=this.getStripData(F,tn[tu],ta[tu]),tc=L>ti?ti:L;L-=tc,8===_?th=Z(N,tf,th,tc):16===_?th=W(N,tf,th,tc,this.isLittleEndian()):32===_&&3===T?th=J(N,tf,th,tc,this.isLittleEndian()):Q("bitDepth",_)}E.data=N}getStripData(E,I,P){switch(E){case 1:return new DataView(this.buffer,I,P);case 2:case 32773:return Q("Compression",E);default:throw Error("invalid compression: "+E)}}}function $(E,I,P,_){return 8===P?new Uint8Array(E*I):16===P?new Uint16Array(E*I):32===P&&3===_?new Float32Array(E*I):Q("bit depth / sample format",P+" / "+_)}function Z(E,I,P,_){for(var T=0;T<_;T++)E[P++]=I.getUint8(T);return P}function W(E,I,P,_,T){for(var L=0;L<2*_;L+=2)E[P++]=I.getUint16(L,T);return P}function J(E,I,P,_,T){for(var L=0;L<4*_;L+=4)E[P++]=I.getFloat32(L,T);return P}function Q(E,I){throw Error("Unsupported "+E+": "+I)}function te(E){if(E.length){let P=E;E=P[0];for(var I=0;I<P.length;I++)P[I]!==E&&Q("bit depth",P)}return E}E.exports=O},8353:function(E,I,P){"use strict";let _=P(8029),T=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class L extends _{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){var E=new Date,I=T.exec(this.dateTime);return E.setFullYear(I[1],I[2]-1,I[3]),E.setHours(I[4],I[5],I[6]),E}get newSubfileType(){return this.get(254)}get imageWidth(){return this.get(256)}get imageLength(){return this.get(257)}get bitsPerSample(){return this.get(258)}get compression(){return this.get(259)||1}get type(){return this.get(262)}get fillOrder(){return this.get(266)||1}get documentName(){return this.get(269)}get imageDescription(){return this.get(270)}get stripOffsets(){return N(this.get(273))}get orientation(){return this.get(274)}get samplesPerPixel(){return this.get(277)}get rowsPerStrip(){return this.get(278)}get stripByteCounts(){return N(this.get(279))}get minSampleValue(){return this.get(280)||0}get maxSampleValue(){return this.get(281)||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get(282)}get yResolution(){return this.get(283)}get planarConfiguration(){return this.get(284)||1}get resolutionUnit(){return this.get(296)||2}get dateTime(){return this.get(306)}get predictor(){return this.get(317)||1}get sampleFormat(){return this.get(339)||1}get sMinSampleValue(){return this.get(340)||this.minSampleValue}get sMaxSampleValue(){return this.get(341)||this.maxSampleValue}}function N(E){return"number"==typeof E?[E]:E}E.exports=L},9698:function(E,I,P){"use strict";let _=P(7909),T=P(9469);function L(E){let I=new _(E),P={};I.setBigEndian();let L=I.readUint16();if(65496!==L)throw Error("SOI marker not found. Not a valid JPEG file");let N=I.readUint16();if(65505===N){I.readUint16();let E=I.readBytes(6);if(69===E[0]&&120===E[1]&&105===E[2]&&102===E[3]&&0===E[4]&&0===E[5]){let E=T.decode(I,{onlyFirst:!0,ignoreImageData:!0,offset:I.offset});P.exif=E}}return P}E.exports=L},9464:function(E,I,P){"use strict";I.decode=P(9698)},8737:function(E){!function(){function I(E,I,P){this.next=P,P&&(P.prev=this),this.prev=I,I&&(I.next=this),this.data=E}function P(){if(!(this instanceof P))return new P;this._head=null,this._tail=null,this.length=0}P.prototype={push:function(E){this._tail=new I(E,this._tail,null),this._head||(this._head=this._tail),this.length++},pop:function(){if(0!==this.length){var E=this._tail;return this._tail=E.prev,E.prev&&(E.prev=this._tail.next=null),this.length--,1===this.length?this._head=this._tail:0===this.length&&(this._head=this._tail=null),E.data}},unshift:function(E){this._head=new I(E,null,this._head),this._tail||(this._tail=this._head),this.length++},shift:function(){if(0!==this.length){var E=this._head;return this._head=E.next,E.next&&(E.next=this._head.prev=null),this.length--,1===this.length?this._tail=this._head:0===this.length&&(this._head=this._tail=null),E.data}},item:function(E){E<0&&(E=this.length+E);for(var I=this._head;E-- >0&&I;)I=I.next;return I?I.data:void 0},slice:function(E,I){if(E||(E=0),I||(I=this.length),I<0&&(I=this.length+I),E<0&&(E=this.length+E),I===E)return[];if(I<E)throw Error("invalid offset: "+E+","+I+" (length="+this.length+")");for(var P=I-E,_=Array(P),T=0,L=this._head;E-- >0&&L;)L=L.next;for(;T<P&&L;)_[T++]=L.data,L=L.next;return _},drop:function(){P.call(this)},forEach:function(E,I){for(var P=this._head,_=0,T=this.length;_<T&&P;)E.call(I||this,P.data,_,this),P=P.next,_++},map:function(E,I){var _=new P;return this.forEach(function(P,T,L){_.push(E.call(I||L,P,T,L))}),_},filter:function(E,I){var _=new P;return this.forEach(function(P,T,L){E.call(I||L,P,T,L)&&_.push(P)}),_},reduce:function(E,I,P){var _=0,T=this._head,L=this.length;for(I||(_=1,I=T&&T.data,T=T&&T.next);_<L&&T;)I=E.call(P||this,I,T.data,this),_++,T=T.next;return I}},E.exports=P}()},9645:function(E){"use strict";function I(E){if(this.size=0|E,this.size<=1||(this.size&this.size-1)!=0)throw Error("FFT size must be a power of two and bigger than 1");this._csize=E<<1;for(var I=Array(2*this.size),P=0;P<I.length;P+=2){let E=Math.PI*P/this.size;I[P]=Math.cos(E),I[P+1]=-Math.sin(E)}this.table=I;for(var _=0,T=1;this.size>T;T<<=1)_++;this._width=_%2==0?_-1:_,this._bitrev=Array(1<<this._width);for(var L=0;L<this._bitrev.length;L++){this._bitrev[L]=0;for(var N=0;N<this._width;N+=2){var F=this._width-N-2;this._bitrev[L]|=(L>>>N&3)<<F}}this._out=null,this._data=null,this._inv=0}E.exports=I,I.prototype.fromComplexArray=function(E,I){for(var P=I||Array(E.length>>>1),_=0;_<E.length;_+=2)P[_>>>1]=E[_];return P},I.prototype.createComplexArray=function(){let E=Array(this._csize);for(var I=0;I<E.length;I++)E[I]=0;return E},I.prototype.toComplexArray=function(E,I){for(var P=I||this.createComplexArray(),_=0;_<P.length;_+=2)P[_]=E[_>>>1],P[_+1]=0;return P},I.prototype.completeSpectrum=function(E){for(var I=this._csize,P=I>>>1,_=2;_<P;_+=2)E[I-_]=E[_],E[I-_+1]=-E[_+1]},I.prototype.transform=function(E,I){if(E===I)throw Error("Input and output buffers must be different");this._out=E,this._data=I,this._inv=0,this._transform4(),this._out=null,this._data=null},I.prototype.realTransform=function(E,I){if(E===I)throw Error("Input and output buffers must be different");this._out=E,this._data=I,this._inv=0,this._realTransform4(),this._out=null,this._data=null},I.prototype.inverseTransform=function(E,I){if(E===I)throw Error("Input and output buffers must be different");this._out=E,this._data=I,this._inv=1,this._transform4();for(var P=0;P<E.length;P++)E[P]/=this.size;this._out=null,this._data=null},I.prototype._transform4=function(){var E,I,P=this._out,_=this._csize,T=1<<this._width,L=_/T<<1,N=this._bitrev;if(4===L)for(E=0,I=0;E<_;E+=L,I++){let P=N[I];this._singleTransform2(E,P,T)}else for(E=0,I=0;E<_;E+=L,I++){let P=N[I];this._singleTransform4(E,P,T)}var F=this._inv?-1:1,O=this.table;for(T>>=2;T>=2;T>>=2){var $=(L=_/T<<1)>>>2;for(E=0;E<_;E+=L)for(var Z=E+$,W=E,J=0;W<Z;W+=2,J+=T){let E=W,I=E+$,_=I+$,T=_+$,L=P[E],N=P[E+1],Z=P[I],Q=P[I+1],te=P[_],ti=P[_+1],tn=P[T],ta=P[T+1],th=L,tu=N,tf=O[J],tc=F*O[J+1],td=Z*tf-Q*tc,tm=Z*tc+Q*tf,tp=O[2*J],tg=F*O[2*J+1],tw=te*tp-ti*tg,tb=te*tg+ti*tp,ty=O[3*J],tv=F*O[3*J+1],tx=tn*ty-ta*tv,tM=tn*tv+ta*ty,tk=th+tw,tE=tu+tb,tA=th-tw,tS=tu-tb,tI=td+tx,tP=tm+tM,tD=F*(td-tx),t_=F*(tm-tM),tC=tk+tI,tB=tE+tP,tT=tk-tI,tR=tE-tP,tU=tA+t_,tL=tS-tD,tN=tA-t_,tF=tS+tD;P[E]=tC,P[E+1]=tB,P[I]=tU,P[I+1]=tL,P[_]=tT,P[_+1]=tR,P[T]=tN,P[T+1]=tF}}},I.prototype._singleTransform2=function(E,I,P){let _=this._out,T=this._data,L=T[I],N=T[I+1],F=T[I+P],O=T[I+P+1],$=L+F,Z=N+O,W=L-F,J=N-O;_[E]=$,_[E+1]=Z,_[E+2]=W,_[E+3]=J},I.prototype._singleTransform4=function(E,I,P){let _=this._out,T=this._data,L=this._inv?-1:1,N=2*P,F=3*P,O=T[I],$=T[I+1],Z=T[I+P],W=T[I+P+1],J=T[I+N],Q=T[I+N+1],te=T[I+F],ti=T[I+F+1],tn=O+J,ta=$+Q,th=O-J,tu=$-Q,tf=Z+te,tc=W+ti,td=L*(Z-te),tm=L*(W-ti),tp=tn+tf,tg=ta+tc,tw=th+tm,tb=tu-td,ty=tn-tf,tv=ta-tc,tx=th-tm,tM=tu+td;_[E]=tp,_[E+1]=tg,_[E+2]=tw,_[E+3]=tb,_[E+4]=ty,_[E+5]=tv,_[E+6]=tx,_[E+7]=tM},I.prototype._realTransform4=function(){var E,I,P=this._out,_=this._csize,T=1<<this._width,L=_/T<<1,N=this._bitrev;if(4===L)for(E=0,I=0;E<_;E+=L,I++){let P=N[I];this._singleRealTransform2(E,P>>>1,T>>>1)}else for(E=0,I=0;E<_;E+=L,I++){let P=N[I];this._singleRealTransform4(E,P>>>1,T>>>1)}var F=this._inv?-1:1,O=this.table;for(T>>=2;T>=2;T>>=2){var $=(L=_/T<<1)>>>1,Z=$>>>1,W=Z>>>1;for(E=0;E<_;E+=L)for(var J=0,Q=0;J<=W;J+=2,Q+=T){var te=E+J,ti=te+Z,tn=ti+Z,ta=tn+Z,th=P[te],tu=P[te+1],tf=P[ti],tc=P[ti+1],td=P[tn],tm=P[tn+1],tp=P[ta],tg=P[ta+1],tw=th,tb=tu,ty=O[Q],tv=F*O[Q+1],tx=tf*ty-tc*tv,tM=tf*tv+tc*ty,tk=O[2*Q],tE=F*O[2*Q+1],tA=td*tk-tm*tE,tS=td*tE+tm*tk,tI=O[3*Q],tP=F*O[3*Q+1],tD=tp*tI-tg*tP,t_=tp*tP+tg*tI,tC=tw+tA,tB=tb+tS,tT=tw-tA,tR=tb-tS,tU=tx+tD,tL=tM+t_,tN=F*(tx-tD),tF=F*(tM-t_),tO=tC+tU,tY=tB+tL,tV=tT+tF,tX=tR-tN;if(P[te]=tO,P[te+1]=tY,P[ti]=tV,P[ti+1]=tX,0===J){var tz=tC-tU,tG=tB-tL;P[tn]=tz,P[tn+1]=tG;continue}if(J!==W){var tj=tT,t$=-tR,tq=tC,tH=-tB,tZ=-F*tF,tW=-F*tN,tK=-F*tL,tJ=-F*tU,tQ=tj+tZ,t0=t$+tW,t1=tq+tJ,t2=tH-tK,t3=E+Z-J,t5=E+$-J;P[t3]=tQ,P[t3+1]=t0,P[t5]=t1,P[t5+1]=t2}}}},I.prototype._singleRealTransform2=function(E,I,P){let _=this._out,T=this._data,L=T[I],N=T[I+P],F=L+N,O=L-N;_[E]=F,_[E+1]=0,_[E+2]=O,_[E+3]=0},I.prototype._singleRealTransform4=function(E,I,P){let _=this._out,T=this._data,L=this._inv?-1:1,N=2*P,F=3*P,O=T[I],$=T[I+P],Z=T[I+N],W=T[I+F],J=O+Z,Q=O-Z,te=$+W,ti=L*($-W),tn=J+te,ta=Q,th=-ti,tu=J-te,tf=Q,tc=ti;_[E]=tn,_[E+1]=0,_[E+2]=ta,_[E+3]=th,_[E+4]=tu,_[E+5]=0,_[E+6]=tf,_[E+7]=tc}},7769:function(module,__unused_webpack_exports,__webpack_require__){"use strict";var Buffer=__webpack_require__(8764).lW;let toBytes=E=>[...E].map(E=>E.charCodeAt(0)),xpiZipFilename=toBytes("META-INF/mozilla.rsa"),oxmlContentTypes=toBytes("[Content_Types].xml"),oxmlRels=toBytes("_rels/.rels");function readUInt64LE(E,I=0){let P=E[I],_=1,T=0;for(;++T<8;)_*=256,P+=E[I+T]*_;return P}let fileType=E=>{if(!(E instanceof Uint8Array||E instanceof ArrayBuffer||Buffer.isBuffer(E)))throw TypeError(`Expected the \`input\` argument to be of type \`Uint8Array\` or \`Buffer\` or \`ArrayBuffer\`, got \`${typeof E}\``);let I=E instanceof Uint8Array?E:new Uint8Array(E);if(!(I&&I.length>1))return null;let P=(E,P)=>{P=Object.assign({offset:0},P);for(let _=0;_<E.length;_++)if(P.mask){if(E[_]!==(P.mask[_]&I[_+P.offset]))return!1}else if(E[_]!==I[_+P.offset])return!1;return!0},_=(E,I)=>P(toBytes(E),I);if(P([255,216,255]))return{ext:"jpg",mime:"image/jpeg"};if(P([137,80,78,71,13,10,26,10]))return{ext:"png",mime:"image/png"};if(P([71,73,70]))return{ext:"gif",mime:"image/gif"};if(P([87,69,66,80],{offset:8}))return{ext:"webp",mime:"image/webp"};if(P([70,76,73,70]))return{ext:"flif",mime:"image/flif"};if((P([73,73,42,0])||P([77,77,0,42]))&&P([67,82],{offset:8}))return{ext:"cr2",mime:"image/x-canon-cr2"};if(P([73,73,42,0])||P([77,77,0,42]))return{ext:"tif",mime:"image/tiff"};if(P([66,77]))return{ext:"bmp",mime:"image/bmp"};if(P([73,73,188]))return{ext:"jxr",mime:"image/vnd.ms-photo"};if(P([56,66,80,83]))return{ext:"psd",mime:"image/vnd.adobe.photoshop"};if(P([80,75,3,4])){if(P([109,105,109,101,116,121,112,101,97,112,112,108,105,99,97,116,105,111,110,47,101,112,117,98,43,122,105,112],{offset:30}))return{ext:"epub",mime:"application/epub+zip"};if(P(xpiZipFilename,{offset:30}))return{ext:"xpi",mime:"application/x-xpinstall"};if(_("mimetypeapplication/vnd.oasis.opendocument.text",{offset:30}))return{ext:"odt",mime:"application/vnd.oasis.opendocument.text"};if(_("mimetypeapplication/vnd.oasis.opendocument.spreadsheet",{offset:30}))return{ext:"ods",mime:"application/vnd.oasis.opendocument.spreadsheet"};if(_("mimetypeapplication/vnd.oasis.opendocument.presentation",{offset:30}))return{ext:"odp",mime:"application/vnd.oasis.opendocument.presentation"};let E=(E,I=0)=>E.findIndex((E,P,_)=>P>=I&&80===_[P]&&75===_[P+1]&&3===_[P+2]&&4===_[P+3]),T=0,L=!1,N=null;do{let F=T+30;if(L||(L=P(oxmlContentTypes,{offset:F})||P(oxmlRels,{offset:F})),!N&&(_("word/",{offset:F})?N={ext:"docx",mime:"application/vnd.openxmlformats-officedocument.wordprocessingml.document"}:_("ppt/",{offset:F})?N={ext:"pptx",mime:"application/vnd.openxmlformats-officedocument.presentationml.presentation"}:_("xl/",{offset:F})&&(N={ext:"xlsx",mime:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),L&&N)return N;T=E(I,F)}while(T>=0);if(N)return N}if(P([80,75])&&(3===I[2]||5===I[2]||7===I[2])&&(4===I[3]||6===I[3]||8===I[3]))return{ext:"zip",mime:"application/zip"};if(P([117,115,116,97,114],{offset:257}))return{ext:"tar",mime:"application/x-tar"};if(P([82,97,114,33,26,7])&&(0===I[6]||1===I[6]))return{ext:"rar",mime:"application/x-rar-compressed"};if(P([31,139,8]))return{ext:"gz",mime:"application/gzip"};if(P([66,90,104]))return{ext:"bz2",mime:"application/x-bzip2"};if(P([55,122,188,175,39,28]))return{ext:"7z",mime:"application/x-7z-compressed"};if(P([120,1]))return{ext:"dmg",mime:"application/x-apple-diskimage"};if(P([51,103,112,53])||P([0,0,0])&&P([102,116,121,112],{offset:4})&&(P([109,112,52,49],{offset:8})||P([109,112,52,50],{offset:8})||P([105,115,111,109],{offset:8})||P([105,115,111,50],{offset:8})||P([109,109,112,52],{offset:8})||P([77,52,86],{offset:8})||P([100,97,115,104],{offset:8})))return{ext:"mp4",mime:"video/mp4"};if(P([77,84,104,100]))return{ext:"mid",mime:"audio/midi"};if(P([26,69,223,163])){let E=I.subarray(4,4100),P=E.findIndex((E,I,P)=>66===P[I]&&130===P[I+1]);if(-1!==P){let I=P+3,_=P=>[...P].every((P,_)=>E[I+_]===P.charCodeAt(0));if(_("matroska"))return{ext:"mkv",mime:"video/x-matroska"};if(_("webm"))return{ext:"webm",mime:"video/webm"}}}if(P([0,0,0,20,102,116,121,112,113,116,32,32])||P([102,114,101,101],{offset:4})||P([102,116,121,112,113,116,32,32],{offset:4})||P([109,100,97,116],{offset:4})||P([109,111,111,118],{offset:4})||P([119,105,100,101],{offset:4}))return{ext:"mov",mime:"video/quicktime"};if(P([82,73,70,70])){if(P([65,86,73],{offset:8}))return{ext:"avi",mime:"video/vnd.avi"};if(P([87,65,86,69],{offset:8}))return{ext:"wav",mime:"audio/vnd.wave"};if(P([81,76,67,77],{offset:8}))return{ext:"qcp",mime:"audio/qcelp"}}if(P([48,38,178,117,142,102,207,17,166,217])){let E=30;do{let _=readUInt64LE(I,E+16);if(P([145,7,220,183,183,169,207,17,142,230,0,192,12,32,83,101],{offset:E})){if(P([64,158,105,248,77,91,207,17,168,253,0,128,95,92,68,43],{offset:E+24}))return{ext:"wma",mime:"audio/x-ms-wma"};if(P([192,239,25,188,77,91,207,17,168,253,0,128,95,92,68,43],{offset:E+24}))return{ext:"wmv",mime:"video/x-ms-asf"};break}E+=_}while(E+24<=I.length);return{ext:"asf",mime:"application/vnd.ms-asf"}}if(P([0,0,1,186])||P([0,0,1,179]))return{ext:"mpg",mime:"video/mpeg"};if(P([102,116,121,112,51,103],{offset:4}))return{ext:"3gp",mime:"video/3gpp"};for(let E=0;E<2&&E<I.length-16;E++){if(P([73,68,51],{offset:E})||P([255,226],{offset:E,mask:[255,226]}))return{ext:"mp3",mime:"audio/mpeg"};if(P([255,228],{offset:E,mask:[255,228]})||P([255,248],{offset:E,mask:[255,252]}))return{ext:"mp2",mime:"audio/mpeg"};if(P([255,240],{offset:E,mask:[255,252]}))return{ext:"mp4",mime:"audio/mpeg"}}if(P([102,116,121,112,77,52,65],{offset:4}))return{ext:"m4a",mime:"audio/mp4"};if(P([79,112,117,115,72,101,97,100],{offset:28}))return{ext:"opus",mime:"audio/opus"};if(P([79,103,103,83]))return P([128,116,104,101,111,114,97],{offset:28})?{ext:"ogv",mime:"video/ogg"}:P([1,118,105,100,101,111,0],{offset:28})?{ext:"ogm",mime:"video/ogg"}:P([127,70,76,65,67],{offset:28})?{ext:"oga",mime:"audio/ogg"}:P([83,112,101,101,120,32,32],{offset:28})?{ext:"spx",mime:"audio/ogg"}:P([1,118,111,114,98,105,115],{offset:28})?{ext:"ogg",mime:"audio/ogg"}:{ext:"ogx",mime:"application/ogg"};if(P([102,76,97,67]))return{ext:"flac",mime:"audio/x-flac"};if(P([77,65,67,32]))return{ext:"ape",mime:"audio/ape"};if(P([119,118,112,107]))return{ext:"wv",mime:"audio/wavpack"};if(P([35,33,65,77,82,10]))return{ext:"amr",mime:"audio/amr"};if(P([37,80,68,70]))return{ext:"pdf",mime:"application/pdf"};if(P([77,90]))return{ext:"exe",mime:"application/x-msdownload"};if((67===I[0]||70===I[0])&&P([87,83],{offset:1}))return{ext:"swf",mime:"application/x-shockwave-flash"};if(P([123,92,114,116,102]))return{ext:"rtf",mime:"application/rtf"};if(P([0,97,115,109]))return{ext:"wasm",mime:"application/wasm"};if(P([119,79,70,70])&&(P([0,1,0,0],{offset:4})||P([79,84,84,79],{offset:4})))return{ext:"woff",mime:"font/woff"};if(P([119,79,70,50])&&(P([0,1,0,0],{offset:4})||P([79,84,84,79],{offset:4})))return{ext:"woff2",mime:"font/woff2"};if(P([76,80],{offset:34})&&(P([0,0,1],{offset:8})||P([1,0,2],{offset:8})||P([2,0,2],{offset:8})))return{ext:"eot",mime:"application/vnd.ms-fontobject"};if(P([0,1,0,0,0]))return{ext:"ttf",mime:"font/ttf"};if(P([79,84,84,79,0]))return{ext:"otf",mime:"font/otf"};if(P([0,0,1,0]))return{ext:"ico",mime:"image/x-icon"};if(P([0,0,2,0]))return{ext:"cur",mime:"image/x-icon"};if(P([70,76,86,1]))return{ext:"flv",mime:"video/x-flv"};if(P([37,33]))return{ext:"ps",mime:"application/postscript"};if(P([253,55,122,88,90,0]))return{ext:"xz",mime:"application/x-xz"};if(P([83,81,76,105]))return{ext:"sqlite",mime:"application/x-sqlite3"};if(P([78,69,83,26]))return{ext:"nes",mime:"application/x-nintendo-nes-rom"};if(P([67,114,50,52]))return{ext:"crx",mime:"application/x-google-chrome-extension"};if(P([77,83,67,70])||P([73,83,99,40]))return{ext:"cab",mime:"application/vnd.ms-cab-compressed"};if(P([33,60,97,114,99,104,62,10,100,101,98,105,97,110,45,98,105,110,97,114,121]))return{ext:"deb",mime:"application/x-deb"};if(P([33,60,97,114,99,104,62]))return{ext:"ar",mime:"application/x-unix-archive"};if(P([237,171,238,219]))return{ext:"rpm",mime:"application/x-rpm"};if(P([31,160])||P([31,157]))return{ext:"Z",mime:"application/x-compress"};if(P([76,90,73,80]))return{ext:"lz",mime:"application/x-lzip"};if(P([208,207,17,224,161,177,26,225]))return{ext:"msi",mime:"application/x-msi"};if(P([6,14,43,52,2,5,1,1,13,1,2,1,1,2]))return{ext:"mxf",mime:"application/mxf"};if(P([71],{offset:4})&&(P([71],{offset:192})||P([71],{offset:196})))return{ext:"mts",mime:"video/mp2t"};if(P([66,76,69,78,68,69,82]))return{ext:"blend",mime:"application/x-blender"};if(P([66,80,71,251]))return{ext:"bpg",mime:"image/bpg"};if(P([0,0,0,12,106,80,32,32,13,10,135,10])){if(P([106,112,50,32],{offset:20}))return{ext:"jp2",mime:"image/jp2"};if(P([106,112,120,32],{offset:20}))return{ext:"jpx",mime:"image/jpx"};if(P([106,112,109,32],{offset:20}))return{ext:"jpm",mime:"image/jpm"};if(P([109,106,112,50],{offset:20}))return{ext:"mj2",mime:"image/mj2"}}if(P([70,79,82,77]))return{ext:"aif",mime:"audio/aiff"};if(_("<?xml "))return{ext:"xml",mime:"application/xml"};if(P([66,79,79,75,77,79,66,73],{offset:60}))return{ext:"mobi",mime:"application/x-mobipocket-ebook"};if(P([102,116,121,112],{offset:4})){if(P([109,105,102,49],{offset:8}))return{ext:"heic",mime:"image/heif"};if(P([109,115,102,49],{offset:8}))return{ext:"heic",mime:"image/heif-sequence"};if(P([104,101,105,99],{offset:8})||P([104,101,105,120],{offset:8}))return{ext:"heic",mime:"image/heic"};if(P([104,101,118,99],{offset:8})||P([104,101,118,120],{offset:8}))return{ext:"heic",mime:"image/heic-sequence"}}return P([171,75,84,88,32,49,49,187,13,10,26,10])?{ext:"ktx",mime:"image/ktx"}:P([68,73,67,77],{offset:128})?{ext:"dcm",mime:"application/dicom"}:P([77,80,43])||P([77,80,67,75])?{ext:"mpc",mime:"audio/x-musepack"}:P([66,69,71,73,78,58])?{ext:"ics",mime:"text/calendar"}:P([103,108,84,70,2,0,0,0])?{ext:"glb",mime:"model/gltf-binary"}:P([212,195,178,161])||P([161,178,195,212])?{ext:"pcap",mime:"application/vnd.tcpdump.pcap"}:null};module.exports=fileType,module.exports.default=fileType,Object.defineProperty(fileType,"minimumBytes",{value:4100}),module.exports.stream=readableStream=>new Promise((resolve,reject)=>{let stream=eval("require")("stream");readableStream.once("readable",()=>{let E=new stream.PassThrough,I=readableStream.read(module.exports.minimumBytes)||readableStream.read();try{E.fileType=fileType(I)}catch(E){reject(E)}readableStream.unshift(I),stream.pipeline?resolve(stream.pipeline(readableStream,E,()=>{})):resolve(readableStream.pipe(E))})})},2251:function(E,I,P){var _=Object.prototype.hasOwnProperty;E.exports=I=function(E,I){return _.call(I,E)},I.version=P(2898).version},645:function(E,I){/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */I.read=function(E,I,P,_,T){var L,N,F=8*T-_-1,O=(1<<F)-1,$=O>>1,Z=-7,W=P?T-1:0,J=P?-1:1,Q=E[I+W];for(W+=J,L=Q&(1<<-Z)-1,Q>>=-Z,Z+=F;Z>0;L=256*L+E[I+W],W+=J,Z-=8);for(N=L&(1<<-Z)-1,L>>=-Z,Z+=_;Z>0;N=256*N+E[I+W],W+=J,Z-=8);if(0===L)L=1-$;else{if(L===O)return N?NaN:(Q?-1:1)*(1/0);N+=Math.pow(2,_),L-=$}return(Q?-1:1)*N*Math.pow(2,L-_)},I.write=function(E,I,P,_,T,L){var N,F,O,$=8*L-T-1,Z=(1<<$)-1,W=Z>>1,J=23===T?5960464477539062e-23:0,Q=_?0:L-1,te=_?1:-1,ti=I<0||0===I&&1/I<0?1:0;for(isNaN(I=Math.abs(I))||I===1/0?(F=isNaN(I)?1:0,N=Z):(N=Math.floor(Math.log(I)/Math.LN2),I*(O=Math.pow(2,-N))<1&&(N--,O*=2),N+W>=1?I+=J/O:I+=J*Math.pow(2,1-W),I*O>=2&&(N++,O/=2),N+W>=Z?(F=0,N=Z):N+W>=1?(F=(I*O-1)*Math.pow(2,T),N+=W):(F=I*Math.pow(2,W-1)*Math.pow(2,T),N=0));T>=8;E[P+Q]=255&F,Q+=te,F/=256,T-=8);for(N=N<<T|F,$+=T;$>0;E[P+Q]=255&N,Q+=te,N/=256,$-=8);E[P+Q-te]|=128*ti}},1283:function(E,I,P){"use strict";var _=P(6732),T=P.n(_),L=P(4066);let N={regression:{kernelType:"polynomial",kernelOptions:{degree:2,constant:1}},threshold:.02,roi:{minSurface:100,positive:!1},sampling:20,include:[]};function F(E,I,P){I=Object.assign({},N,I);let _=this.manager;return Array.isArray(E)?Promise.all(E.map(function(E){let T=O(_,E,I);return"function"==typeof P&&T.then(P),T})):O(_,E,I)}function O(E,I,P){return E.post("data",[I,P]).then(function(E){for(let I in E)E[I]=new L.Z(E[I]);return E})}function $(){worker.on("data",function(E,I,P){I=new IJS(I);let _={},T=[],L=I.grey(),N=L.sobelFilter();Q("sobel",N);let F=N.level().mask({threshold:P.threshold});Q("mask",F);let O=N.getRoiManager();O.fromMask(F);let $=O.getMask(P.roi);Q("realMask",$);let Z=L.getPixelsGrid({sampling:P.sampling,mask:$}),W=I.getBackground(Z.xyS,Z.zS,P.regression);Q("background",W);let J=I.subtract(W);function Q(E,I){P.include.includes(E)&&(_[E]=I,T.push(I.data.buffer))}_.result=J,T.push(J.data.buffer),E(_,T)})}let Z={run:F,work:$};var W=Z;function J(E){E.extendMethod("background",W)}class Q{constructor(){this._url=null,this._deps=[null]}checkUrl(){if(null===this._url)throw Error("image worker must be initialized with an URL")}get url(){return this._url}set url(E){if("string"!=typeof E)throw TypeError("worker URL must be a string");this._url=E,this._deps[0]=E}static extendMethod(E,I){let P,_;let L={};function N(...E){return P||(this.checkUrl(),_=this.url,P=new(T())(I.work,{deps:_}),L.manager=P),I.run.call(L,...E)}N.reset=function(){P&&(P.terminate(),P=new(T())(I.work,{deps:_}),L.manager=P)},Q.prototype[E]=N}}J(Q),new Q},4066:function(E,I,P){"use strict";P.d(I,{Z:function(){return ah}});var _,T,L,N,F,O={};P.r(O),P.d(O,{CMYK:function(){return eo},GREY:function(){return et},HSL:function(){return er},HSV:function(){return en},RGB:function(){return ee}});var $={};P.r($),P.d($,{tagsById:function(){return e_},tagsByName:function(){return eC}});var Z={};P.r(Z),P.d(Z,{tagsById:function(){return eB},tagsByName:function(){return eT}});var W={};P.r(W),P.d(W,{tagsById:function(){return eR},tagsByName:function(){return eU}});let J={getBit(E){return this.data[Q(E)]&1<<te(E)?1:0},setBit(E){this.data[Q(E)]|=1<<te(E)},clearBit(E){this.data[Q(E)]&=~(1<<te(E))},toggleBit(E){this.data[Q(E)]^=1<<te(E)},getBitXY(E,I){return E>=this.width||I>=this.height?0:this.getBit(I*this.width+E)},setBitXY(E,I){this.setBit(I*this.width+E)},clearBitXY(E,I){this.clearBit(I*this.width+E)},toggleBitXY(E,I){this.toggleBit(I*this.width+E)}};function Q(E){return E>>3}function te(E){return 7-(7&E)}function ti(E){for(let I in J)E.prototype[I]=J[I]}function tn(E,I={}){let{bitDepth:P,alpha:_,colorModel:T,components:L,channels:N}=I;if("string"!=typeof E||0===E.length)throw TypeError("processName must be a string");if(P&&(Array.isArray(P)||(P=[P]),!P.includes(this.bitDepth)))throw TypeError(`The process: ${E} can only be applied if bit depth is in: ${P}`);if(_&&(Array.isArray(_)||(_=[_]),!_.includes(this.alpha)))throw TypeError(`The process: ${E} can only be applied if alpha is in: ${_}`);if(T&&(Array.isArray(T)||(T=[T]),!T.includes(this.colorModel)))throw TypeError(`The process: ${E} can only be applied if color model is in: ${T}`);if(L&&(Array.isArray(L)||(L=[L]),!L.includes(this.components))){let I=`The process: ${E} can only be applied if the number of components is in: ${L}`;if(1===L.length&&1===L[0])throw TypeError(`${I}.\rYou should transform your image using "image.grey()" before applying the algorithm.`);throw TypeError(I)}if(N&&(Array.isArray(N)||(N=[N]),!N.includes(this.channels)))throw TypeError(`The process: ${E} can only be applied if the number of channels is in: ${N}`)}function ta(E,I){E=E||[],"string"==typeof(I=I||{})&&(I={type:I});try{return new Blob(E,I)}catch(T){if("TypeError"!==T.name)throw T;for(var P=new("undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder),_=0;_<E.length;_+=1)P.append(E[_]);return P.getBlob(I.type)}}function th(E){var I=E.match(/data:([^;]+)/)[1];return ta([tf(atob(E.replace(/^[^,]+,/,"")))],{type:I})}function tu(E,I,P){return"function"==typeof E.toBlob?new Promise(function(_){E.toBlob(_,I,P)}):Promise.resolve(th(E.toDataURL(I,P)))}function tf(E){for(var I=E.length,P=new ArrayBuffer(I),_=new Uint8Array(P),T=-1;++T<I;)_[T]=E.charCodeAt(T);return P}var tc=P(4665),td=P(9498),tm=P(7885);let tp=[137,80,78,71,13,10,26,10],tg=[];for(let E=0;E<256;E++){let I=E;for(let E=0;E<8;E++)1&I?I=3988292384^I>>>1:I>>>=1;tg[E]=I}let tw=4294967295;function tb(E,I,P){let _=E;for(let E=0;E<P;E++)_=tg[(_^I[E])&255]^_>>>8;return _}function ty(E,I){return(tb(tw,E,I)^tw)>>>0}!function(E){E[E.UNKNOWN=-1]="UNKNOWN",E[E.GREYSCALE=0]="GREYSCALE",E[E.TRUECOLOUR=2]="TRUECOLOUR",E[E.INDEXED_COLOUR=3]="INDEXED_COLOUR",E[E.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",E[E.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"}(_||(_={})),function(E){E[E.UNKNOWN=-1]="UNKNOWN",E[E.DEFLATE=0]="DEFLATE"}(T||(T={})),function(E){E[E.UNKNOWN=-1]="UNKNOWN",E[E.ADAPTIVE=0]="ADAPTIVE"}(L||(L={})),function(E){E[E.UNKNOWN=-1]="UNKNOWN",E[E.NO_INTERLACE=0]="NO_INTERLACE",E[E.ADAM7=1]="ADAM7"}(N||(N={}));let tv=new Uint8Array(0),tx="\x00",tM=new Uint16Array([255]),tk=new Uint8Array(tM.buffer),tE=255===tk[0];class tA extends td.IOBuffer{constructor(E,I={}){super(E);let{checkCrc:P=!1}=I;this._checkCrc=P,this._inflator=new tm.T_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=T.UNKNOWN,this._filterMethod=L.UNKNOWN,this._interlaceMethod=N.UNKNOWN,this._colorType=_.UNKNOWN,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let E=0;E<tp.length;E++)if(this.readUint8()!==tp[E])throw Error(`wrong PNG signature. Byte at ${E} should be ${tp[E]}.`)}decodeChunk(){let E=this.readUint32(),I=this.readChars(4),P=this.offset;switch(I){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(E);break;case"IDAT":this.decodeIDAT(E);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(E);break;case"iCCP":this.decodeiCCP(E);break;case"tEXt":this.decodetEXt(E);break;case"pHYs":this.decodepHYs();break;default:this.skip(E)}if(this.offset-P!==E)throw Error(`Length mismatch while decoding chunk ${I}`);if(this._checkCrc){let P=this.readUint32(),_=E+4,T=ty(new Uint8Array(this.buffer,this.byteOffset+this.offset-_-4,_),_);if(T!==P)throw Error(`CRC mismatch for chunk ${I}. Expected ${P}, found ${T}`)}else this.skip(4)}decodeIHDR(){let E;let I=this._png;I.width=this.readUint32(),I.height=this.readUint32(),I.depth=tT(this.readUint8());let P=this.readUint8();switch(this._colorType=P,P){case _.GREYSCALE:E=1;break;case _.TRUECOLOUR:E=3;break;case _.INDEXED_COLOUR:E=1;break;case _.GREYSCALE_ALPHA:E=2;break;case _.TRUECOLOUR_ALPHA:E=4;break;default:throw Error(`Unknown color type: ${P}`)}if(this._png.channels=E,this._compressionMethod=this.readUint8(),this._compressionMethod!==T.DEFLATE)throw Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(E){if(E%3!=0)throw RangeError(`PLTE field length must be a multiple of 3. Got ${E}`);let I=E/3;this._hasPalette=!0;let P=[];this._palette=P;for(let E=0;E<I;E++)P.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(E){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,E)),this.skip(E)}decodetRNS(E){switch(this._colorType){case _.GREYSCALE:case _.TRUECOLOUR:if(E%2!=0)throw RangeError(`tRNS chunk length must be a multiple of 2. Got ${E}`);if(E/2>this._png.width*this._png.height)throw Error(`tRNS chunk contains more alpha values than there are pixels (${E/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(E/2);for(let I=0;I<E/2;I++)this._transparency[I]=this.readUint16();break;case _.INDEXED_COLOUR:{if(E>this._palette.length)throw Error(`tRNS chunk contains more alpha values than there are palette colors (${E} vs ${this._palette.length})`);let I=0;for(;I<E;I++){let E=this.readByte();this._palette[I].push(E)}for(;I<this._palette.length;I++)this._palette[I].push(255);break}default:throw Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(E){let I,P="";for(;(I=this.readChar())!==tx;)P+=I;let _=this.readUint8();if(_!==T.DEFLATE)throw Error(`Unsupported iCCP compression method: ${_}`);let L=this.readBytes(E-P.length-2);this._png.iccEmbeddedProfile={name:P,profile:(0,tm.rr)(L)}}decodetEXt(E){let I,P="";for(;(I=this.readChar())!==tx;)P+=I;this._png.text[P]=this.readChars(E-P.length-1)}decodepHYs(){let E=this.readUint32(),I=this.readUint32(),P=this.readByte();this._png.resolution={x:E,y:I,unit:P}}decodeImage(){if(this._inflator.err)throw Error(`Error while decompressing the data: ${this._inflator.err}`);let E=this._inflator.result;if(this._filterMethod!==L.ADAPTIVE)throw Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===N.NO_INTERLACE)this.decodeInterlaceNull(E);else throw Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(E){let I,P;let _=this._png.height,T=this._png.channels*this._png.depth/8,L=this._png.width*T,N=new Uint8Array(this._png.height*L),F=tv,O=0;for(let $=0;$<_;$++){switch(I=E.subarray(O+1,O+1+L),P=N.subarray($*L,($+1)*L),E[O]){case 0:tS(I,P,L);break;case 1:tI(I,P,L,T);break;case 2:tP(I,P,F,L);break;case 3:tD(I,P,F,L,T);break;case 4:t_(I,P,F,L,T);break;default:throw Error(`Unsupported filter: ${E[O]}`)}F=P,O+=L+1}if(this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency),16===this._png.depth){let E=new Uint16Array(N.buffer);if(tE)for(let I=0;I<E.length;I++)E[I]=tB(E[I]);this._png.data=E}else this._png.data=N}}function tS(E,I,P){for(let _=0;_<P;_++)I[_]=E[_]}function tI(E,I,P,_){let T=0;for(;T<_;T++)I[T]=E[T];for(;T<P;T++)I[T]=E[T]+I[T-_]&255}function tP(E,I,P,_){let T=0;if(0===P.length)for(;T<_;T++)I[T]=E[T];else for(;T<_;T++)I[T]=E[T]+P[T]&255}function tD(E,I,P,_,T){let L=0;if(0===P.length){for(;L<T;L++)I[L]=E[L];for(;L<_;L++)I[L]=E[L]+(I[L-T]>>1)&255}else{for(;L<T;L++)I[L]=E[L]+(P[L]>>1)&255;for(;L<_;L++)I[L]=E[L]+(I[L-T]+P[L]>>1)&255}}function t_(E,I,P,_,T){let L=0;if(0===P.length){for(;L<T;L++)I[L]=E[L];for(;L<_;L++)I[L]=E[L]+I[L-T]&255}else{for(;L<T;L++)I[L]=E[L]+P[L]&255;for(;L<_;L++)I[L]=E[L]+tC(I[L-T],P[L],P[L-T])&255}}function tC(E,I,P){let _=E+I-P,T=Math.abs(_-E),L=Math.abs(_-I),N=Math.abs(_-P);return T<=L&&T<=N?E:L<=N?I:P}function tB(E){return(255&E)<<8|E>>8&255}function tT(E){if(1!==E&&2!==E&&4!==E&&8!==E&&16!==E)throw Error(`invalid bit depth: ${E}`);return E}let tR={level:3};class tU extends td.IOBuffer{constructor(E,I={}){super(),this._colorType=_.UNKNOWN,this._zlibOptions={...tR,...I.zlib},this._png=this._checkData(E),this.setBigEndian()}encode(){return this.encodeSignature(),this.encodeIHDR(),this.encodeData(),this.encodeIEND(),this.toArray()}encodeSignature(){this.writeBytes(tp)}encodeIHDR(){this.writeUint32(13),this.writeChars("IHDR"),this.writeUint32(this._png.width),this.writeUint32(this._png.height),this.writeByte(this._png.depth),this.writeByte(this._colorType),this.writeByte(T.DEFLATE),this.writeByte(L.ADAPTIVE),this.writeByte(N.NO_INTERLACE),this.writeCrc(17)}encodeIEND(){this.writeUint32(0),this.writeChars("IEND"),this.writeCrc(4)}encodeIDAT(E){this.writeUint32(E.length),this.writeChars("IDAT"),this.writeBytes(E),this.writeCrc(E.length+4)}encodeData(){let{width:E,height:I,channels:P,depth:_,data:T}=this._png,L=P*E,N=new td.IOBuffer().setBigEndian(),F=0;for(let E=0;E<I;E++)if(N.writeByte(0),8===_)F=tF(T,N,L,F);else if(16===_)F=tO(T,N,L,F);else throw Error("unreachable");let O=N.toArray(),$=(0,tm.Wt)(O,this._zlibOptions);this.encodeIDAT($)}_checkData(E){let{colorType:I,channels:P,depth:_}=tN(E),T={width:tL(E.width,"width"),height:tL(E.height,"height"),channels:P,data:E.data,depth:_,text:{}};this._colorType=I;let L=T.width*T.height*P;if(T.data.length!==L)throw RangeError(`wrong data size. Found ${T.data.length}, expected ${L}`);return T}writeCrc(E){this.writeUint32(ty(new Uint8Array(this.buffer,this.byteOffset+this.offset-E,E),E))}}function tL(E,I){if(Number.isInteger(E)&&E>0)return E;throw TypeError(`${I} must be a positive integer`)}function tN(E){let{channels:I=4,depth:P=8}=E;if(4!==I&&3!==I&&2!==I&&1!==I)throw RangeError(`unsupported number of channels: ${I}`);if(8!==P&&16!==P)throw RangeError(`unsupported bit depth: ${P}`);let T={channels:I,depth:P,colorType:_.UNKNOWN};switch(I){case 4:T.colorType=_.TRUECOLOUR_ALPHA;break;case 3:T.colorType=_.TRUECOLOUR;break;case 1:T.colorType=_.GREYSCALE;break;case 2:T.colorType=_.GREYSCALE_ALPHA;break;default:throw Error("unsupported number of channels")}return T}function tF(E,I,P,_){for(let T=0;T<P;T++)I.writeByte(E[_++]);return _}function tO(E,I,P,_){for(let T=0;T<P;T++)I.writeUint16(E[_++]);return _}function tY(E,I){let P=new tA(E,I);return P.decode()}function tV(E,I){let P=new tU(E,I);return P.encode()}!function(E){E[E.UNKNOWN=0]="UNKNOWN",E[E.METRE=1]="METRE"}(F||(F={}));var tX=P(7870);let tz="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tG=new Uint8Array(256);for(let E=0;E<tz.length;E++)tG[tz.charCodeAt(E)]=E;function tj(E){let I;let P=E.length,_="";for(I=0;I<P;I+=3)_+=tz[E[I]>>2]+tz[(3&E[I])<<4|E[I+1]>>4]+tz[(15&E[I+1])<<2|E[I+2]>>6]+tz[63&E[I+2]];return P%3==2?_=`${_.substring(0,_.length-1)}=`:P%3==1&&(_=`${_.substring(0,_.length-2)}==`),_}function t$(E){let I,P,_,T,L=.75*E.length,N=E.length,F=0;"="===E[E.length-1]&&(L--,"="===E[E.length-2]&&L--);let O=new Uint8Array(L);for(let L=0;L<N;L+=4)I=tG[E.charCodeAt(L)],P=tG[E.charCodeAt(L+1)],_=tG[E.charCodeAt(L+2)],T=tG[E.charCodeAt(L+3)],O[F++]=I<<2|P>>4,O[F++]=(15&P)<<4|_>>2,O[F++]=(3&_)<<6|63&T;return O}function tq(E,I){let P=tj(E);return`data:${I};base64,${P}`}let tH=self.ImageData,tZ=self.Image;function tW(E,I){let P=self.document.createElement("canvas");return P.width=E,P.height=I,P}function tK(E,{withCredentials:I=!1}={}){return new Promise(function(P,_){let T=new self.XMLHttpRequest;T.open("GET",E,!0),T.responseType="arraybuffer",T.withCredentials=I,T.onload=function(E){200!==this.status?_(E):P(this.response)},T.onerror=_,T.send()})}function tJ(){throw Error("createWriteStream does not exist in the browser")}function tQ(){throw Error("writeFile does not exist in the browser")}function t0(E){return E.includes("/")||(E=`image/${E}`),E}function t1(E,I={}){let P={width:E.width,height:E.height,data:E.getRGBAData()};return(0,tX.encode)(P,I.quality).data}function t2(E,I){let P={width:E.width,height:E.height,channels:E.channels,depth:E.bitDepth,data:E.data};return(1===P.depth||32===P.depth)&&(P.depth=8,P.channels=4,P.data=E.getRGBAData()),tV(P,I)}let t3={save(E,I={}){let{useCanvas:P=!1,encoder:_}=I,{format:T}=I;if(!T){let I=/\.(?<format>[a-zA-Z]+)$/.exec(E);I&&(T=I.groups.format.toLowerCase())}if(!T)throw Error("file format not provided");return new Promise((I,L)=>{let N,F;switch(T.toLowerCase()){case"png":P?N=this.getCanvas().pngStream():F=t2(this,_);break;case"jpg":case"jpeg":P?N=this.getCanvas().jpegStream():F=t1(this,_);break;case"bmp":F=(0,tc.c)(this,_);break;default:throw RangeError(`invalid output format: ${T}`)}if(N){let P=tJ(E);P.on("finish",I),P.on("error",L),N.pipe(P)}else F&&tQ(E,F,E=>{if(E){L(E);return}I()})})},toDataURL(E="image/png",I={}){"object"==typeof E&&(I=E,E="image/png");let{useCanvas:P=!1,encoder:_}=I;function T(I,P){let T=I(P,_);return tq(T,E)}return"image/bmp"===(E=t0(E))?T(tc.c,this):"image/png"!==E||P?"image/jpeg"!==E||P?this.getCanvas().toDataURL(E):T(t1,this):T(t2,this)},toBuffer(E={}){let{format:I="png",encoder:P}=E;switch(I.toLowerCase()){case"png":return t2(this,P);case"jpeg":case"jpg":return t1(this,P);case"bmp":return(0,tc.c)(this,P);default:throw RangeError(`invalid output format: ${I}`)}},toBase64(E="image/png",I={}){if(I.async)return this.toDataURL(E,I).then(function(E){return E.substring(E.indexOf(",")+1)});{let P=this.toDataURL(E,I);return P.substring(P.indexOf(",")+1)}},toBlob(E="image/png",I=.8){return tu(this.getCanvas(),E,I)},getCanvas(){let E=new tH(this.getRGBAData({clamped:!0}),this.width,this.height),I=tW(this.width,this.height);return I.getContext("2d").putImageData(E,0,0),I}};function t5(E){for(let I in t3)E.prototype[I]=t3[I]}var t4=P(2251),t6=P.n(t4);let t8={configurable:!0,enumerable:!1,get:void 0};function t7(E,I,P={}){let{inPlace:_=!1,returnThis:T=!0,partialArgs:L=[]}=P;return _?ah.prototype[E]=function(...E){this.computed=null;let P=I.apply(this,[...L,...E]);return T?this:P}:ah.prototype[E]=function(...E){return I.apply(this,[...L,...E])},ah}function t9(E,I,P={}){let{partialArgs:_=[]}=P;return t8.get=function(){if(null===this.computed)this.computed={};else if(t6()(E,this.computed))return this.computed[E];let P=I.apply(this,_);return this.computed[E]=P,P},Object.defineProperty(ah.prototype,E,t8),ah}let et="GREY",ee="RGB",er="HSL",en="HSV",eo="CMYK";function es(E={}){let{clamped:I}=E;this.checkProcessable("getRGBAData",{components:[1,3],bitDepth:[1,8,16,32]});let P=this.width*this.height*4,_=I?new Uint8ClampedArray(P):new Uint8Array(P);return 1===this.bitDepth?eh(this,_):32===this.bitDepth?(this.checkProcessable("getRGBAData",{alpha:0}),1===this.components?eu(this,_):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ee]}),ef(this,_))):1===this.components?ec(this,_):3===this.components&&(this.checkProcessable("getRGBAData",{colorModel:[ee]}),ed(this,_)),1===this.alpha?(this.checkProcessable("getRGBAData",{bitDepth:[8,16]}),em(this,_)):ep(this,_),_}function eh(E,I){for(let P=0;P<E.size;P++){let _=E.getBit(P);I[4*P]=255*_,I[4*P+1]=255*_,I[4*P+2]=255*_}}function eu(E,I){let P=E.min[0],_=E.max[0],T=_-P;for(let _=0;_<E.size;_++){let L=Math.floor(255*(E.data[_]-P)/T);I[4*_]=L,I[4*_+1]=L,I[4*_+2]=L}}function ef(E,I){let P=Math.min(...E.min),_=Math.max(...E.max),T=_-P;for(let _=0;_<E.size;_++){let L=Math.floor(255*(E.data[3*_]-P)/T),N=Math.floor(255*(E.data[3*_+1]-P)/T),F=Math.floor(255*(E.data[3*_+2]-P)/T);I[4*_]=L,I[4*_+1]=N,I[4*_+2]=F}}function ec(E,I){for(let P=0;P<E.size;P++)I[4*P]=E.data[P*E.channels]>>>E.bitDepth-8,I[4*P+1]=E.data[P*E.channels]>>>E.bitDepth-8,I[4*P+2]=E.data[P*E.channels]>>>E.bitDepth-8}function ed(E,I){for(let P=0;P<E.size;P++)I[4*P]=E.data[P*E.channels]>>>E.bitDepth-8,I[4*P+1]=E.data[P*E.channels+1]>>>E.bitDepth-8,I[4*P+2]=E.data[P*E.channels+2]>>>E.bitDepth-8}function em(E,I){for(let P=0;P<E.size;P++)I[4*P+3]=E.data[P*E.channels+E.components]>>E.bitDepth-8}function ep(E,I){for(let P=0;P<E.size;P++)I[4*P+3]=255}var eg=P(2084);let ew={};function eb(E){let I=ew[E];if(!I)throw RangeError(`invalid image kind: ${E}`);return I}ew[eg.$h]={components:1,alpha:0,bitDepth:1,colorModel:et},ew[eg.XE]={components:1,alpha:1,bitDepth:8,colorModel:et},ew[eg.s7]={components:1,alpha:0,bitDepth:8,colorModel:et},ew[eg.VS]={components:3,alpha:1,bitDepth:8,colorModel:ee},ew[eg.eX]={components:3,alpha:0,bitDepth:8,colorModel:ee},ew[eg.NC]={components:4,alpha:0,bitDepth:8,colorModel:eo},ew[eg.Hq]={components:4,alpha:1,bitDepth:8,colorModel:eo};let ey=[1,8,16,32];function ev(E){let{components:I,alpha:P,bitDepth:_,colorModel:T}=E;if(!Number.isInteger(I)||I<=0)throw RangeError(`invalid components: ${I}. Must be a positive integer`);if(0!==P&&1!==P&&"boolean"!=typeof P)throw TypeError(`invalid alpha: ${P}: must be a boolean, 0 or 1`);if(!ey.includes(_))throw RangeError(`invalid bitDepth: ${_}. Must be one of ${ey.join(", ")}`);if(!O[T])throw RangeError(`invalid colorModel: ${T}. Must be one of ${Object.keys(O).join(", ")}`)}function ex(E,I,P){let _=I*E;return 1===P&&(_=Math.ceil(_/8)),_}function eM(E,I,P,_,T,L){let N;let F=_*E;switch(T){case 1:N=new Uint8Array(Math.ceil(F/8));break;case 8:N=new Uint8Array(F);break;case 16:N=new Uint16Array(F);break;case 32:N=new Float32Array(F);break;default:throw Error(`Cannot create pixel array for bit depth ${T}`)}if(P)for(let E=I;E<N.length;E+=_)N[E]=L;return N}var eE=P(9464),eA=P(4106),eS=P.n(eA);function eI(E){if(1!==E.compression)throw Error("missing mandatory StripByteCounts field in compressed image");let I=E.rowsPerStrip*E.width*E.samplesPerPixel*(E.bitsPerSample/8);return Array(E.stripOffsets.length).fill(I)}function eP(E,I,P){let _=0;for(;_<E.length;){for(let T=P;T<I*P;T+=P)for(let I=0;I<P;I++)E[_+T+I]=E[_+T+I]+E[_+T-(P-I)]&255;_+=I*P}}function eD(E,I,P){let _=0;for(;_<E.length;){for(let T=P;T<I*P;T+=P)for(let I=0;I<P;I++)E[_+T+I]=E[_+T+I]+E[_+T-(P-I)]&65535;_+=I*P}}let e_={33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",36864:"ExifVersion",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBiasValue",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",37396:"SubjectArea",37500:"MakerNote",37510:"UserComment",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",40964:"RelatedSoundFile",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",42240:"Gamma"},eC={};for(let E in e_)eC[e_[E]]=Number(E);let eB={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},eT={};for(let E in eB)eT[eB[E]]=Number(E);let eR={254:"NewSubfileType",255:"SubfileType",256:"ImageWidth",257:"ImageLength",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",263:"Threshholding",264:"CellWidth",265:"CellLength",266:"FillOrder",270:"ImageDescription",271:"Make",272:"Model",273:"StripOffsets",274:"Orientation",277:"SamplesPerPixel",278:"RowsPerStrip",279:"StripByteCounts",280:"MinSampleValue",281:"MaxSampleValue",282:"XResolution",283:"YResolution",284:"PlanarConfiguration",288:"FreeOffsets",289:"FreeByteCounts",290:"GrayResponseUnit",291:"GrayResponseCurve",296:"ResolutionUnit",305:"Software",306:"DateTime",315:"Artist",316:"HostComputer",320:"ColorMap",338:"ExtraSamples",33432:"Copyright",269:"DocumentName",285:"PageName",286:"XPosition",287:"YPosition",292:"T4Options",293:"T6Options",297:"PageNumber",301:"TransferFunction",317:"Predictor",318:"WhitePoint",319:"PrimaryChromaticities",321:"HalftoneHints",322:"TileWidth",323:"TileLength",324:"TileOffsets",325:"TileByteCounts",326:"BadFaxLines",327:"CleanFaxData",328:"ConsecutiveBadFaxLines",330:"SubIFDs",332:"InkSet",333:"InkNames",334:"NumberOfInks",336:"DotRange",337:"TargetPrinter",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",342:"TransferRange",343:"ClipPath",344:"XClipPathUnits",345:"YClipPathUnits",346:"Indexed",347:"JPEGTables",351:"OPIProxy",400:"GlobalParametersIFD",401:"ProfileType",402:"FaxProfile",403:"CodingMethods",404:"VersionYear",405:"ModeNumber",433:"Decode",434:"DefaultImageColor",512:"JPEGProc",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",515:"JPEGRestartInterval",517:"JPEGLosslessPredictors",518:"JPEGPointTransforms",519:"JPEGQTables",520:"JPEGDCTables",521:"JPEGACTables",529:"YCbCrCoefficients",530:"YCbCrSubSampling",531:"YCbCrPositioning",532:"ReferenceBlackWhite",559:"StripRowCounts",700:"XMP",32781:"ImageID",34732:"ImageLayer",32932:"WangAnnotatio",33445:"MDFileTag",33446:"MDScalePixel",33447:"MDColorTable",33448:"MDLabName",33449:"MDSampleInfo",33450:"MDPrepDate",33451:"MDPrepTime",33452:"MDFileUnits",33550:"ModelPixelScaleTag",33723:"IPTC",33918:"INGRPacketDataTag",33919:"INGRFlagRegisters",33920:"IrasBTransformationMatrix",33922:"ModelTiepointTag",34264:"ModelTransformationTag",34377:"Photoshop",34665:"ExifIFD",34675:"ICCProfile",34735:"GeoKeyDirectoryTag",34736:"GeoDoubleParamsTag",34737:"GeoAsciiParamsTag",34853:"GPSIFD",34908:"HylaFAXFaxRecvParams",34909:"HylaFAXFaxSubAddress",34910:"HylaFAXFaxRecvTime",37724:"ImageSourceData",40965:"InteroperabilityIFD",42112:"GDAL_METADATA",42113:"GDAL_NODATA",50215:"OceScanjobDescription",50216:"OceApplicationSelector",50217:"OceIdentificationNumber",50218:"OceImageLogicCharacteristics",50706:"DNGVersion",50707:"DNGBackwardVersion",50708:"UniqueCameraModel",50709:"LocalizedCameraModel",50710:"CFAPlaneColor",50711:"CFALayout",50712:"LinearizationTable",50713:"BlackLevelRepeatDim",50714:"BlackLevel",50715:"BlackLevelDeltaH",50716:"BlackLevelDeltaV",50717:"WhiteLevel",50718:"DefaultScale",50719:"DefaultCropOrigin",50720:"DefaultCropSize",50721:"ColorMatrix1",50722:"ColorMatrix2",50723:"CameraCalibration1",50724:"CameraCalibration2",50725:"ReductionMatrix1",50726:"ReductionMatrix2",50727:"AnalogBalance",50728:"AsShotNeutral",50729:"AsShotWhiteXY",50730:"BaselineExposure",50731:"BaselineNoise",50732:"BaselineSharpness",50733:"BayerGreenSplit",50734:"LinearResponseLimit",50735:"CameraSerialNumber",50736:"LensInfo",50737:"ChromaBlurRadius",50738:"AntiAliasStrength",50740:"DNGPrivateData",50741:"MakerNoteSafety",50778:"CalibrationIlluminant1",50779:"CalibrationIlluminant2",50780:"BestQualityScale",50784:"AliasLayerMetadata"},eU={};for(let E in eR)eU[eR[E]]=Number(E);let eL={standard:W,exif:$,gps:Z};class eN{constructor(E){if(!E)throw Error("missing kind");this.data=new Uint8Array,this.fields=new Map,this.kind=E,this._hasMap=!1,this._map={}}get(E){if("number"==typeof E)return this.fields.get(E);if("string"==typeof E)return this.fields.get(eL[this.kind].tagsByName[E]);throw Error("expected a number or string")}get map(){if(!this._hasMap){let E=eL[this.kind].tagsById;for(let I of this.fields.keys())E[I]&&(this._map[E[I]]=this.fields.get(I));this._hasMap=!0}return this._map}}let eF=new Map([[1,[1,eV]],[2,[1,eX]],[3,[2,ez]],[4,[4,eG]],[5,[8,ej]],[6,[1,e$]],[7,[1,eV]],[8,[2,eq]],[9,[4,eH]],[10,[8,eZ]],[11,[4,eW]],[12,[8,eK]]]);function eO(E,I){let P=eF.get(E);if(!P)throw Error(`type not found: ${E}`);return P[0]*I}function eY(E,I,P){let _=eF.get(I);if(!_)throw Error(`type not found: ${I}`);return _[1](E,P)}function eV(E,I){if(1===I)return E.readUint8();let P=new Uint8Array(I);for(let _=0;_<I;_++)P[_]=E.readUint8();return P}function eX(E,I){let P=[],_="";for(let T=0;T<I;T++){let I=String.fromCharCode(E.readUint8());"\x00"===I?(P.push(_),_=""):_+=I}return 1===P.length?P[0]:P}function ez(E,I){if(1===I)return E.readUint16();let P=new Uint16Array(I);for(let _=0;_<I;_++)P[_]=E.readUint16();return P}function eG(E,I){if(1===I)return E.readUint32();let P=new Uint32Array(I);for(let _=0;_<I;_++)P[_]=E.readUint32();return P}function ej(E,I){if(1===I)return E.readUint32()/E.readUint32();let P=Array(I);for(let _=0;_<I;_++)P[_]=E.readUint32()/E.readUint32();return P}function e$(E,I){if(1===I)return E.readInt8();let P=new Int8Array(I);for(let _=0;_<I;_++)P[_]=E.readInt8();return P}function eq(E,I){if(1===I)return E.readInt16();let P=new Int16Array(I);for(let _=0;_<I;_++)P[_]=E.readInt16();return P}function eH(E,I){if(1===I)return E.readInt32();let P=new Int32Array(I);for(let _=0;_<I;_++)P[_]=E.readInt32();return P}function eZ(E,I){if(1===I)return E.readInt32()/E.readInt32();let P=Array(I);for(let _=0;_<I;_++)P[_]=E.readInt32()/E.readInt32();return P}function eW(E,I){if(1===I)return E.readFloat32();let P=new Float32Array(I);for(let _=0;_<I;_++)P[_]=E.readFloat32();return P}function eK(E,I){if(1===I)return E.readFloat64();let P=new Float64Array(I);for(let _=0;_<I;_++)P[_]=E.readFloat64();return P}let eJ=256,eQ=257,e0=258,e1=9,e2=[];function e3(){if(0===e2.length){for(let E=0;E<256;E++)e2.push([E]);let E=[];for(let I=256;I<4096;I++)e2.push(E)}}let e5=[511,1023,2047,4095],e4=[0,0,0,0,0,0,0,0,0,511,1023,2047,4095];class e6{constructor(E){this.nextData=0,this.nextBits=0,this.bytePointer=0,this.tableLength=e0,this.currentBitLength=e1,this.stripArray=new Uint8Array(E.buffer,E.byteOffset,E.byteLength),this.outData=new td.IOBuffer(E.byteLength),this.initializeTable()}decode(){let E=0,I=0;for(;(E=this.getNextCode())!==eQ;)if(E===eJ){if(this.initializeTable(),(E=this.getNextCode())===eQ)break;this.writeString(this.stringFromCode(E)),I=E}else if(this.isInTable(E))this.writeString(this.stringFromCode(E)),this.addStringToTable(this.stringFromCode(I).concat(this.stringFromCode(E)[0])),I=E;else{let P=this.stringFromCode(I).concat(this.stringFromCode(I)[0]);this.writeString(P),this.addStringToTable(P),I=E}let P=this.outData.toArray();return new DataView(P.buffer,P.byteOffset,P.byteLength)}initializeTable(){e3(),this.tableLength=e0,this.currentBitLength=e1}writeString(E){this.outData.writeBytes(E)}stringFromCode(E){return e2[E]}isInTable(E){return E<this.tableLength}addStringToTable(E){if(e2[this.tableLength++]=E,e2.length>4096)throw e2=[],Error("LZW decoding error. Please open an issue at https://github.com/image-js/tiff/issues/new/choose (include a test image).");this.tableLength===e4[this.currentBitLength]&&this.currentBitLength++}getNextCode(){this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8,this.nextBits<this.currentBitLength&&(this.nextData=this.nextData<<8|255&this.stripArray[this.bytePointer++],this.nextBits+=8);let E=this.nextData>>this.nextBits-this.currentBitLength&e5[this.currentBitLength-9];return(this.nextBits-=this.currentBitLength,this.bytePointer>this.stripArray.length)?257:E}}function e8(E){return new e6(E).decode()}let e7=/^(\d{4}):(\d{2}):(\d{2}) (\d{2}):(\d{2}):(\d{2})$/;class e9 extends eN{constructor(){super("standard")}get size(){return this.width*this.height}get width(){return this.imageWidth}get height(){return this.imageLength}get components(){return this.samplesPerPixel}get date(){let E=new Date,I=e7.exec(this.dateTime);if(null===I)throw Error(`invalid dateTime: ${this.dateTime}`);return E.setFullYear(Number(I[1]),Number(I[2])-1,Number(I[3])),E.setHours(Number(I[4]),Number(I[5]),Number(I[6])),E}get newSubfileType(){return this.get("NewSubfileType")}get imageWidth(){return this.get("ImageWidth")}get imageLength(){return this.get("ImageLength")}get bitsPerSample(){let E=this.get("BitsPerSample");return E&&"number"!=typeof E?E[0]:E}get alpha(){let E=this.extraSamples;return!!E&&0!==E[0]}get associatedAlpha(){let E=this.extraSamples;return!!E&&1===E[0]}get extraSamples(){return rr(this.get("ExtraSamples"))}get compression(){return this.get("Compression")||1}get type(){return this.get("PhotometricInterpretation")}get fillOrder(){return this.get("FillOrder")||1}get documentName(){return this.get("DocumentName")}get imageDescription(){return this.get("ImageDescription")}get stripOffsets(){return rr(this.get("StripOffsets"))}get orientation(){return this.get("Orientation")}get samplesPerPixel(){return this.get("SamplesPerPixel")||1}get rowsPerStrip(){return this.get("RowsPerStrip")}get stripByteCounts(){return rr(this.get("StripByteCounts"))}get minSampleValue(){return this.get("MinSampleValue")||0}get maxSampleValue(){return this.get("MaxSampleValue")||Math.pow(2,this.bitsPerSample)-1}get xResolution(){return this.get("XResolution")}get yResolution(){return this.get("YResolution")}get planarConfiguration(){return this.get("PlanarConfiguration")||1}get resolutionUnit(){return this.get("ResolutionUnit")||2}get dateTime(){return this.get("DateTime")}get predictor(){return this.get("Predictor")||1}get sampleFormat(){return this.get("SampleFormat")||1}get sMinSampleValue(){return this.get("SMinSampleValue")||this.minSampleValue}get sMaxSampleValue(){return this.get("SMaxSampleValue")||this.maxSampleValue}get palette(){let E=2**this.bitsPerSample,I=this.get("ColorMap");if(!I)return;if(I.length!==3*E)throw Error(`ColorMap size must be ${E}`);let P=[];for(let _=0;_<E;_++)P.push([I[_],I[_+E],I[_+2*E]]);return P}}function rr(E){return"number"==typeof E?[E]:E}function ri(E){let I=new Uint8Array(E.buffer,E.byteOffset,E.byteLength),P=(0,tm.rr)(I);return new DataView(P.buffer,P.byteOffset,P.byteLength)}let rn={ignoreImageData:!1,onlyFirst:!1};class ro extends td.IOBuffer{constructor(E){super(E),this._nextIFD=0}get isMultiPage(){let E=0;for(this.decodeHeader();this._nextIFD;)if(E++,this.decodeIFD({ignoreImageData:!0},!0),2===E)return!0;if(1===E)return!1;throw rc("ifdCount",E)}get pageCount(){let E=0;for(this.decodeHeader();this._nextIFD;)E++,this.decodeIFD({ignoreImageData:!0},!0);if(E>0)return E;throw rc("ifdCount",E)}decode(E={}){E=Object.assign({},rn,E);let I=[];for(this.decodeHeader();this._nextIFD;)if(I.push(this.decodeIFD(E,!0)),E.onlyFirst)return[I[0]];return I}decodeHeader(){let E=this.readUint16();if(18761===E)this.setLittleEndian();else if(19789===E)this.setBigEndian();else throw Error(`invalid byte order: 0x${E.toString(16)}`);if(42!==this.readUint16())throw Error("not a TIFF file");this._nextIFD=this.readUint32()}decodeIFD(E,I){let P;if(this.seek(this._nextIFD),I)P=new e9;else{if(!E.kind)throw Error("kind is missing");P=new eN(E.kind)}let _=this.readUint16();for(let E=0;E<_;E++)this.decodeIFDEntry(P);if(!E.ignoreImageData){if(!(P instanceof e9))throw Error("must be a tiff ifd");this.decodeImageData(P)}return this._nextIFD=this.readUint32(),P}decodeIFDEntry(E){let I=this.offset,P=this.readUint16(),_=this.readUint16(),T=this.readUint32();if(_<1||_>12){this.skip(4);return}let L=eO(_,T);L>4&&this.seek(this.readUint32());let N=eY(this,_,T);if(E.fields.set(P,N),34665===P||34853===P){let I=this.offset,_="exif";34665===P?_="exif":34853===P&&(_="gps"),this._nextIFD=N,E[_]=this.decodeIFD({kind:_,ignoreImageData:!0},!1),this.offset=I}this.seek(I),this.skip(12)}decodeImageData(E){let I=E.orientation;if(I&&1!==I)throw rc("orientation",I);switch(E.type){case 0:case 1:case 2:case 3:this.readStripData(E);break;default:throw rc("image type",E.type)}if(this.applyPredictor(E),this.convertAlpha(E),0===E.type){let I=E.bitsPerSample,P=Math.pow(2,I)-1;for(let I=0;I<E.data.length;I++)E.data[I]=P-E.data[I]}}readStripData(E){let I=E.width,P=E.height,_=E.bitsPerSample,T=E.sampleFormat,L=I*P*E.samplesPerPixel,N=rh(L,_,T),F=E.rowsPerStrip,O=F*I*E.samplesPerPixel,$=E.stripOffsets,Z=E.stripByteCounts||eI(E),W=L,J=0;for(let I=0;I<$.length;I++){let P=new DataView(this.buffer,this.byteOffset+$[I],Z[I]),L=W>O?O:W;W-=L;let F=P;switch(E.compression){case 1:break;case 5:F=e8(P);break;case 8:F=ri(P);break;case 2:throw rc("Compression","CCITT Group 3");case 32773:throw rc("Compression","PackBits");default:throw rc("Compression",E.compression)}J=this.fillUncompressed(_,T,N,F,J,L)}E.data=N}fillUncompressed(E,I,P,_,T,L){if(8===E)return rl(P,_,T,L);if(16===E)return ru(P,_,T,L,this.isLittleEndian());if(32===E&&3===I)return rf(P,_,T,L,this.isLittleEndian());throw rc("bitDepth",E)}applyPredictor(E){let I=E.bitsPerSample;switch(E.predictor){case 1:break;case 2:if(8===I)eP(E.data,E.width,E.components);else if(16===I)eD(E.data,E.width,E.components);else throw Error(`Horizontal differencing is only supported for images with a bit depth of ${I}`);break;default:throw Error(`invalid predictor: ${E.predictor}`)}}convertAlpha(E){if(E.alpha&&E.associatedAlpha){let{data:I,components:P,maxSampleValue:_}=E;for(let E=0;E<I.length;E+=P){let T=I[E+P-1];for(let L=0;L<P-1;L++)I[E+L]=Math.round(I[E+L]*_/T)}}}}function rh(E,I,P){if(8===I)return new Uint8Array(E);if(16===I)return new Uint16Array(E);if(32===I&&3===P)return new Float32Array(E);throw rc("bit depth / sample format",`${I} / ${P}`)}function rl(E,I,P,_){for(let T=0;T<_;T++)E[P++]=I.getUint8(T);return P}function ru(E,I,P,_,T){for(let L=0;L<2*_;L+=2)E[P++]=I.getUint16(L,T);return P}function rf(E,I,P,_,T){for(let L=0;L<4*_;L+=4)E[P++]=I.getFloat32(L,T);return P}function rc(E,I){return Error(`Unsupported ${E}: ${I}`)}function rd(E,I){let P=new ro(E);return P.decode(I)}var rg=P(3269);let rw=/^data:[a-z]+\/(?:[a-z]+);base64,/;function rb(E,I){if("string"==typeof E)return rv(E,I);if(E instanceof ArrayBuffer)return Promise.resolve(ry(new Uint8Array(E),void 0,I&&I.ignorePalette));if(E.buffer)return Promise.resolve(ry(E,void 0,I&&I.ignorePalette));throw Error('argument to "load" must be a string or buffer.')}function ry(E,I,P){let _=eS()(E);if(_)switch(_.mime){case"image/png":return rx(E);case"image/jpeg":return rk(E);case"image/tiff":return rE(E,P);default:return rI(T(_.mime))}return rI(T("application/octet-stream"));function T(P){return I||tq(E,P)}}function rv(E,I){let P;let _=E.slice(0,64).match(rw);return(P=null!==_?Promise.resolve(t$(E.slice(_[0].length))):tK(E,I)).then(P=>{let T=new Uint8Array(P);return ry(T,_?E:void 0,I&&I.ignorePalette)})}function rx(E){let I;let P=tY(E),_=P.channels,T=0;return(2===_||4===_?(I=_-1,T=1):I=_,P.palette)?rM(P):new ah(P.width,P.height,P.data,{components:I,alpha:T,bitDepth:P.depth})}function rM(E){let I=E.width*E.height,P=E.palette[0].length,_=new Uint8Array(I*P),T=8/E.depth,L=E.depth<8?T:1,N=parseInt("1".repeat(E.depth),2),F=4===P,O=0;for(let P=0;P<I;P++){let I=Math.floor(P/L),$=E.data[I];E.depth<8&&($=$>>>E.depth*(T-1-P%T)&N);let Z=E.palette[$];_[O++]=Z[0],_[O++]=Z[1],_[O++]=Z[2],F&&(_[O++]=Z[3])}return new ah(E.width,E.height,_,{components:3,alpha:F,bitDepth:8})}function rk(E){let I;let P=(0,eE.decode)(E);P.exif&&(I=rA(P.exif));let _=(0,tX.decode)(E,{useTArray:!0,maxMemoryUsageInMB:1024}),T=new ah(_.width,_.height,_.data,{meta:I});if(I&&I.tiff.tags.Orientation){let E=I.tiff.tags.Orientation;E>2&&(T=T.rotate({3:180,4:180,5:90,6:90,7:270,8:270}[E])),[2,4,5,7].includes(E)&&(T=T.flipX())}return T}function rE(E,I){let P=rd(E);return 1===P.length?rS(P[0],I):new rg.Z(P.map(function(E){return rS(E,I)}))}function rA(E){let I={tiff:{fields:E.fields,tags:E.map}};return E.exif&&(I.exif=E.exif),E.gps&&(I.gps=E.gps),I}function rS(E,I){if(I||3!==E.type)return new ah(E.width,E.height,E.data,{components:2===E.type?3:1,alpha:E.alpha,colorModel:2===E.type?ee:et,bitDepth:E.bitsPerSample.length?E.bitsPerSample[0]:E.bitsPerSample,meta:rA(E)});{let I=new Uint16Array(3*E.width*E.height),P=E.palette,_=0;for(let T=0;T<E.data.length;T++){let L=E.data[T],N=P[L];I[_++]=N[0],I[_++]=N[1],I[_++]=N[2]}return new ah(E.width,E.height,I,{components:3,alpha:E.alpha,colorModel:ee,bitDepth:16,meta:rA(E)})}}function rI(E,I){return I=I||{},new Promise(function(P,_){let T=new tZ;T.onload=function(){let E=T.width,_=T.height,L=tW(E,_).getContext("2d");L.drawImage(T,0,0,E,_);let N=L.getImageData(0,0,E,_).data;P(new ah(E,_,N,I))},T.onerror=function(){_(Error(`Could not load ${E}`))},T.src=E})}let rP={getValueXY(E,I,P){return this.data[(I*this.width+E)*this.channels+P]},setValueXY(E,I,P,_){return this.data[(I*this.width+E)*this.channels+P]=_,this.computed=null,this},getValue(E,I){return this.data[E*this.channels+I]},setValue(E,I,P){return this.data[E*this.channels+I]=P,this.computed=null,this},getPixelXY(E,I){return this.getPixel(I*this.width+E)},setPixelXY(E,I,P){return this.setPixel(I*this.width+E,P)},getPixel(E){let I=Array(this.channels),P=E*this.channels;for(let E=0;E<this.channels;E++)I[E]=this.data[P+E];return I},setPixel(E,I){let P=E*this.channels;for(let E=0;E<I.length;E++)this.data[P+E]=I[E];return this.computed=null,this}};function rD(E){for(let I in rP)E.prototype[I]=rP[I]}function r_(E){return{width:E.width,height:E.height,components:E.components,alpha:E.alpha,colorModel:E.colorModel,bitDepth:E.bitDepth}}function rC(E,I,P,_={}){let{out:T}=I;if(void 0===T)return _.copy?E.clone():ah.createFrom(E,P);{if(!ah.isImage(T))throw TypeError("out must be an Image object");let I=Object.assign(r_(E),P);for(let E in I)if(T[E]!==I[E])throw RangeError(`cannot use out. Its ${E} must be "${I[E]}" (found "${T[E]}")`);return T}}function rB(E,I,P){if(void 0!==I.inPlace&&"boolean"!=typeof I.inPlace)throw TypeError("inPlace option must be a boolean");if(I.inPlace){if(void 0!==I.out)throw TypeError("out option must not be set if inPlace option is true");return E}return rC(E,I,null,P)}function rT(E={}){this.checkProcessable("abs",{bitDepth:[32]});let I=rB(this,E);return rR(this,I),I}function rR(E,I){for(let P=0;P<E.data.length;P++)I.data[P]=Math.abs(E.data[P])}function rU(E,I){if(1===E.alpha&&1===I.alpha)for(let P=0;P<E.size;P++)I.data[P*I.channels+I.components]=E.data[P*E.channels+E.components]}function rL(E={}){this.checkProcessable("invert",{bitDepth:[1,8,16]});let I=rB(this,E);return 1===this.bitDepth?rN(this,I):(rF(this,I),this!==I&&rU(this,I)),I}function rN(E,I){for(let P=0;P<E.data.length;P++)I.data[P]=~E.data[P]}function rF(E,I){for(let P=0;P<E.data.length;P+=E.channels)for(let _=0;_<E.components;_++)I.data[P+_]=E.maxValue-E.data[P+_]}function rO(){this.checkProcessable("flipX",{bitDepth:[8,16]});for(let E=0;E<this.height;E++){let I=E*this.width*this.channels;for(let E=0;E<Math.floor(this.width/2);E++){let P=E*this.channels+I,_=(this.width-E-1)*this.channels+I;for(let E=0;E<this.channels;E++){let I=this.data[P+E];this.data[P+E]=this.data[_+E],this.data[_+E]=I}}}return this}function rY(){this.checkProcessable("flipY",{bitDepth:[8,16]});for(let E=0;E<Math.floor(this.height/2);E++)for(let I=0;I<this.width;I++){let P=I*this.channels+E*this.width*this.channels,_=I*this.channels+(this.height-1-E)*this.channels*this.width;for(let E=0;E<this.channels;E++){let I=this.data[P+E];this.data[P+E]=this.data[_+E],this.data[_+E]=I}}return this}function rV(E={}){let{radius:I=1}=E;if(I<1)throw Error("radius must be greater than 1");let P=2*I+1,_=Array(P);for(let E=0;E<P;E++){_[E]=Array(P);for(let I=0;I<P;I++)_[E][I]=1/(P*P)}return this.convolution(_)}var rX=P(5520),rz=P.n(rX);function rG(E,I={}){let{channels:P,allowAlpha:_,defaultAlpha:T}=I;return("boolean"!=typeof _&&(_=!0),void 0===P)?rj(E,T):r$(E,P,_)}function rj(E,I){let P=I?E.channels:E.components,_=Array(P);for(let E=0;E<P;E++)_[E]=E;return _}function r$(E,I,P){Array.isArray(I)||(I=[I]);for(let _=0;_<I.length;_++)I[_]=rq(E,I[_],P);return I}function rq(E,I,P=!0){if(void 0===I)throw RangeError(`validateChannel : the channel has to be >=0 and <${E.channels}`);if("string"==typeof I){switch(E.colorModel){case et:break;case ee:if("rgb".includes(I))switch(I){case"r":I=0;break;case"g":I=1;break;case"b":I=2}break;case er:if("hsl".includes(I))switch(I){case"h":I=0;break;case"s":I=1;break;case"l":I=2}break;case en:if("hsv".includes(I))switch(I){case"h":I=0;break;case"s":I=1;break;case"v":I=2}break;case eo:if("cmyk".includes(I))switch(I){case"c":I=0;break;case"m":I=1;break;case"y":I=2;break;case"k":I=3}break;default:throw Error(`Unexpected color model: ${E.colorModel}`)}if("a"===I){if(!E.alpha)throw Error("validateChannel : the image does not contain alpha channel");I=E.components}if("string"==typeof I)throw Error(`validateChannel : undefined channel: ${I}`)}if(I>=E.channels)throw RangeError(`validateChannel : the channel has to be >=0 and <${E.channels}`);if(!P&&I>=E.components)throw RangeError("validateChannel : alpha channel may not be selected");return I}function rH(E={}){let{radius:I=1,border:P="copy",channels:_}=E;if(this.checkProcessable("medianFilter",{bitDepth:[8,16]}),I<1)throw Error("radius must be greater than 0");_=rG(this,_,!0);let T=I,L=I,N=ah.createFrom(this),F=Array((2*T+1)*(2*L+1));for(let E=0;E<_.length;E++){let I=_[E];for(let E=L;E<this.height-L;E++)for(let P=T;P<this.width-T;P++){let _=0;for(let N=-L;N<=L;N++)for(let L=-T;L<=T;L++){let T=((E+N)*this.width+P+L)*this.channels+I;F[_++]=this.data[T]}let O=(E*this.width+P)*this.channels+I;N.data[O]=rz()(F)}}if(this.alpha&&!_.includes(this.channels))for(let E=this.components;E<this.data.length;E+=this.channels)N.data[E]=this.data[E];return N.setBorder({size:[T,L],algorithm:P}),N}function rZ(E={}){let{radius:I=1,sigma:P,channels:_,border:T="copy"}=E;this.checkProcessable("gaussian",{bitDepth:[8,16]});let L=rW(I,P);return this.convolution([L,L],{border:T,channels:_,algorithm:"separable"})}function rW(E,I){let P=2*E+1,_=Array(P),T=I||((P-1)*.5-1)*.3+.8,L=-.5/(T*T),N=0;for(let I=0;I<P;I++){let P=I-E,T=Math.exp(L*P*P);_[I]=T,N+=T}for(let E=0;E<P;E++)_[E]/=N;return _}let rK=[[-1,0,1],[-2,0,2],[-1,0,1]],rJ=[[-1,-2,-1],[0,0,0],[1,2,1]],rQ=[[3,0,-3],[10,0,-10],[3,0,-3]],r0=[[3,10,3],[0,0,0],[-3,-10,-3]];var r3=P(414),r5=P(8336),r4=P.n(r5);function r6(E){let I,P;if(Array.isArray(E)){if(Array.isArray(E[0])){if((1&E.length)==0||(1&E[0].length)==0)throw RangeError("validateKernel: Kernel rows and columns should be odd numbers");I=Math.floor(E.length/2),P=Math.floor(E[0].length/2)}else{let _=Math.sqrt(E.length);if(r4()(_))P=I=Math.floor(Math.sqrt(E.length)/2);else throw RangeError("validateKernel: Kernel array should be a square");let T=Array(_);for(let I=0;I<_;I++){T[I]=Array(_);for(let P=0;P<_;P++)T[I][P]=E[I*_+P]}E=T}}else throw Error(`validateKernel: Invalid Kernel: ${E}`);return{kernel:E,kWidth:P,kHeight:I}}function r8(E,I){return Math.round(Math.min(Math.max(E,0),I.maxValue))}function r7(E,I,P){if(void 0===P){let _=E.length+I.length-1;P=Array(_)}r9(P);for(var _=0;_<E.length;_++)for(var T=0;T<I.length;T++)P[_+T]+=E[_]*I[T];return P}function r9(E){for(var I=0;I<E.length;I++)E[I]=0}function ie(E,I,P,_){let T,L,N,F;let O=Array(E.length);N=((F=I[1]).length-1)/2,L=Array(P+F.length-1),T=Array(P);for(let I=0;I<_;I++){for(let _=0;_<P;_++)T[_]=E[I*P+_];r7(T,F,L);for(let E=0;E<P;E++)O[I*P+E]=L[N+E]}N=((F=I[0]).length-1)/2,L=Array(_+F.length-1),T=Array(_);for(let E=0;E<P;E++){for(let I=0;I<_;I++)T[I]=O[I*P+E];r7(T,F,L);for(let I=0;I<_;I++)O[I*P+E]=L[N+I]}return O}P(9645),P(995);var is=P(6943);function ia(E){let I=new is.Z(E,{autoTranspose:!0});if(1!==I.rank)return null;let P=Math.sqrt(I.s[0]),_=I.U.to2DArray().map(E=>E[0]*P),T=I.V.to2DArray().map(E=>E[0]*P);return[_,T]}function il(E,I={}){let P,_,T,L,N,F,O,$,{channels:Z,bitDepth:W,normalize:J=!1,divisor:Q=1,border:te="copy",algorithm:ti="auto"}=I,tn={};W&&(tn.bitDepth=W);let ta=ah.createFrom(this,tn);if(Z=rG(this,Z,!0),"separable"!==ti)({kernel:E}=r6(E));else if(!Array.isArray(E)||2!==E.length)throw RangeError("separable convolution requires two arrays of numbers to represent the kernel");if("auto"===ti){let I=ia(E);null!==I?(ti="separable",E=I):ti=(E.length>9||E[0].length>9)&&this.width<=4096&&this.height<=4096?"fft":"direct"}"separable"===ti?(P=Math.floor(E[0].length/2),_=Math.floor(E[1].length/2)):(P=Math.floor(E.length/2),_=Math.floor(E[0].length/2));let th=ta.isClamped,tu=Array(this.height*this.width);for(F=0;F<Z.length;F++){for(N=0,O=Z[F];N<this.height;N++)for(L=0;L<this.width;L++)tu[T=N*this.width+L]=this.data[T*this.channels+O];if("direct"===ti)$=(0,r3.direct)(tu,E,{rows:this.height,cols:this.width,normalize:J,divisor:Q});else if("separable"===ti){if($=ie(tu,E,this.width,this.height),J){Q=0;for(let I=0;I<E[0].length;I++)for(let P=0;P<E[1].length;P++)Q+=E[0][I]*E[1][P]}if(1!==Q)for(let E=0;E<$.length;E++)$[E]/=Q}else $=(0,r3.fft)(tu,E,{rows:this.height,cols:this.width,normalize:J,divisor:Q});for(N=0;N<this.height;N++)for(L=0;L<this.width;L++)T=N*this.width+L,th?ta.data[T*this.channels+O]=r8($[T],ta):ta.data[T*this.channels+O]=$[T]}if(this.alpha&&!Z.includes(this.channels))for(L=this.components;L<this.data.length;L+=this.channels)ta.data[L]=this.data[L];return"periodic"!==te&&ta.setBorder({size:[_,P],algorithm:te}),ta}function iu(E={}){let{direction:I="xy",border:P="copy",kernelX:_,kernelY:T,channels:L,bitDepth:N=this.bitDepth}=E;switch(this.checkProcessable("gradientFilter",{bitDepth:[8,16]}),I){case"x":if(!_)throw Error("kernelX option is missing");return il.call(this,_,{channels:L,border:P,bitDepth:N});case"y":if(!T)throw Error("kernelY option is missing");return il.call(this,T,{channels:L,border:P,bitDepth:N});case"xy":{if(!_)throw Error("kernelX option is missing");if(!T)throw Error("kernelY option is missing");let E=il.call(this,_,{channels:L,border:P,bitDepth:32}),I=il.call(this,T,{channels:L,border:P,bitDepth:32});return E.hypotenuse(I,{bitDepth:N,channels:L})}default:throw Error(`Unknown parameter direction: ${I}`)}}function ig(E){return iu.call(this,Object.assign({},E,{kernelX:rK,kernelY:rJ}))}function iw(E){return iu.call(this,Object.assign({},E,{kernelX:rQ,kernelY:r0}))}var ib=P(2664),iy=P.n(ib);function iv(E={}){let{algorithm:I="range",channels:P,min:_=this.min,max:T=this.max}=E;if(this.checkProcessable("level",{bitDepth:[8,16,32]}),(P=rG(this,{channels:P})).length!==this.channel&&(Array.isArray(_)&&_.length===this.channels&&(_=_.filter((E,I)=>P.includes(I))),Array.isArray(T)&&T.length===this.channels&&(T=T.filter((E,I)=>P.includes(I)))),"range"===I)_<0&&(_=0),T>this.maxValue&&(T=this.maxValue),Array.isArray(_)||(_=iy()(P.length,_)),Array.isArray(T)||(T=iy()(P.length,T)),ix(this,_,T,P);else throw Error(`level: algorithm not implement: ${I}`);return this}function ix(E,I,P,_){let T=1e-5,L=Array(_.length);for(let N=0;N<_.length;N++)0===I[N]&&P[N]===E.maxValue?L[N]=0:P[N]===I[N]?L[N]=0:L[N]=(E.maxValue+1-T)/(P[N]-I[N]),I[N]+=(.5-T/2)/L[N];for(let P=0;P<_.length;P++){let T=_[P];if(0!==L[P])for(let _=0;_<E.data.length;_+=E.channels)E.data[_+T]=Math.min(Math.max(0,(E.data[_+T]-I[P])*L[P]+.5|0),E.maxValue)}}var iM=P(7811),iE=P.n(iM);function iA(E){if(isNaN(E)){if(E instanceof ah)return E.data;if(!iE()(E))throw Error("checkNumberArray: the value should be either a number, array or Image");return E}if(E<=0)throw Error("checkNumberArray: the value must be greater than 0");return E}function iS(E,I={}){let{channels:P}=I;if(this.checkProcessable("add",{bitDepth:[8,16]}),P=rG(this,{channels:P}),isNaN(E=iA(E))){if(this.data.length!==E.length)throw Error("add: the data size is different");for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.max(0,Math.min(this.maxValue,this.data[I+_]+E[I+_]>>0))}}else for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.min(this.maxValue,this.data[I+_]+E>>0)}return this}function iI(E,I={}){let{channels:P}=I;if(this.checkProcessable("subtract",{bitDepth:[8,16]}),P=rG(this,{channels:P}),isNaN(E=iA(E))){if(this.data.length!==E.length)throw Error("subtract: the data size is different");for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.max(0,Math.min(this.maxValue,this.data[I+_]-E[I+_]>>0))}}else for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.max(0,this.data[I+_]-E>>0)}return this}function iP(E,I={}){let{channels:P,absolute:_=!1}=I;if(this.checkProcessable("subtractImage",{bitDepth:[8,16]}),this.width!==E.width||this.height!==E.height)throw Error("subtractImage: both images must have the same size");if(this.alpha!==E.alpha||this.bitDepth!==E.bitDepth)throw Error("subtractImage: both images must have the same alpha and bitDepth");if(this.channels!==E.channels)throw Error("subtractImage: both images must have the same number of channels");let T=this.clone();P=rG(this,{channels:P});for(let I=0;I<P.length;I++){let L=P[I];for(let I=L;I<this.data.length;I+=this.channels){let P=this.data[I]-E.data[I];_?T.data[I]=Math.abs(P):T.data[I]=Math.max(P,0)}}return T}function iD(E,I={}){let{bitDepth:P=this.bitDepth,channels:_}=I;if(this.checkProcessable("hypotenuse",{bitDepth:[8,16,32]}),this.width!==E.width||this.height!==E.height)throw Error("hypotenuse: both images must have the same size");if(this.alpha!==E.alpha||this.bitDepth!==E.bitDepth)throw Error("hypotenuse: both images must have the same alpha and bitDepth");if(this.channels!==E.channels)throw Error("hypotenuse: both images must have the same number of channels");let T=ah.createFrom(this,{bitDepth:P});_=rG(this,{channels:_});let L=T.isClamped;for(let I=0;I<_.length;I++){let P=_[I];for(let I=P;I<this.data.length;I+=this.channels){let P=Math.hypot(this.data[I],E.data[I]);L?T.data[I]=Math.min(Math.max(Math.round(P),0),T.maxValue):T.data[I]=P}}return T}function i_(E,I={}){let{channels:P}=I;if(this.checkProcessable("multiply",{bitDepth:[8,16]}),E<=0)throw Error("multiply: the value must be greater than 0");if(P=rG(this,{channels:P}),isNaN(E=iA(E))){if(this.data.length!==E.length)throw Error("multiply: the data size is different");for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.max(0,Math.min(this.maxValue,this.data[I+_]*E[I+_]>>0))}}else for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.min(this.maxValue,this.data[I+_]*E>>0)}return this}function iC(E,I={}){let{channels:P}=I;if(this.checkProcessable("divide",{bitDepth:[8,16]}),P=rG(this,{channels:P}),isNaN(E=iA(E))){if(this.data.length!==E.length)throw Error("divide: the: the data size is different");for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.max(0,Math.min(this.maxValue,this.data[I+_]/E[I+_]>>0))}}else for(let I=0;I<P.length;I++){let _=P[I];for(let I=0;I<this.data.length;I+=this.channels)this.data[I+_]=Math.min(this.maxValue,this.data[I+_]/E>>0)}return this}var iB=P(4091);class iT{constructor(){if(new.target===iT)throw Error("BaseRegression must be subclassed")}predict(E){if("number"==typeof E)return this._predict(E);if((0,iB.N)(E)){let I=[];for(let P=0;P<E.length;P++)I.push(this._predict(E[P]));return I}throw TypeError("x must be a number or array")}_predict(){throw Error("_predict must be implemented")}train(){}toString(){return""}toLaTeX(){return""}score(E,I){if(!(0,iB.N)(E)||!(0,iB.N)(I)||E.length!==I.length)throw Error("x and y must be arrays of the same length");let P=E.length,_=Array(P);for(let I=0;I<P;I++)_[I]=this._predict(E[I]);let T=0,L=0,N=0,F=0,O=0,$=0,Z=0;for(let E=0;E<P;E++)T+=_[E],L+=I[E],O+=_[E]*_[E],$+=I[E]*I[E],Z+=_[E]*I[E],0!==I[E]&&(N+=(I[E]-_[E])*(I[E]-_[E])/I[E]),F+=(I[E]-_[E])*(I[E]-_[E]);let W=(P*Z-T*L)/Math.sqrt((P*O-T*T)*(P*$-L*L));return{r:W,r2:W*W,chi2:N,rmsd:Math.sqrt(F/P)}}}var iR=P(5427);P(5922);var iU=P(8345),iL=P(6952),iN=P.n(iL);let iF={lambda:.1,kernelType:"gaussian",kernelOptions:{},computeCoefficient:!1};class iO extends iT{constructor(E,I,P){if(super(),!0===E)this.alpha=I.alpha,this.inputs=I.inputs,this.kernelType=I.kernelType,this.kernelOptions=I.kernelOptions,this.kernel=new(iN())(I.kernelType,I.kernelOptions);else{E=iR.Z.checkMatrix(E),P=Object.assign({},iF,P);let _=new(iN())(P.kernelType,P.kernelOptions),T=_.compute(E),L=E.rows;T.add(iR.Z.eye(L,L).mul(P.lambda)),this.alpha=(0,iU.F)(T,I),this.inputs=E,this.kernelType=P.kernelType,this.kernelOptions=P.kernelOptions,this.kernel=_}}_predict(E){return this.kernel.compute([E],this.inputs).mmul(this.alpha).getRow(0)}toJSON(){return{name:"kernelRidgeRegression",alpha:this.alpha,inputs:this.inputs,kernelType:this.kernelType,kernelOptions:this.kernelOptions}}static load(E){if("kernelRidgeRegression"!==E.name)throw TypeError("not a KRR model");return new iO(!0,E)}}function iY(E,I,P){let _=new iO(E,I,P),T=Array(this.size);for(let E=0;E<this.width;E++)for(let I=0;I<this.height;I++)T[I*this.width+E]=[E,I];let L=_.predict(T),N=ah.createFrom(this);for(let E=0;E<this.size;E++)N.data[E]=Math.min(this.maxValue,Math.max(0,L[E][0]));return N}function iV(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("dilate",{bitDepth:[1,8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("dilate: The number of rows and columns of the kernel must be odd");let _=!0;t:for(let E of I)for(let I of E)if(1!==I){_=!1;break t}let T=this;for(let E=0;E<P;E++)if(1===this.bitDepth){if(_){let E=T.clone();T=ij(T,E,I.length,I[0].length)}else{let E=ah.createFrom(T);T=iG(T,E,I)}}else if(_){let E=ah.createFrom(T);T=iz(T,E,I.length,I[0].length)}else{let E=ah.createFrom(T);T=iX(T,E,I)}return T}function iX(E,I,P){let _=P.length,T=P[0].length,L=(_-1)/2,N=(T-1)/2;for(let F=0;F<E.height;F++)for(let O=0;O<E.width;O++){let $=0;for(let I=0;I<T;I++)for(let T=0;T<_;T++){if(1!==P[T][I])continue;let _=T-L+O,Z=I-N+F;if(_<0||Z<0||_>=E.width||Z>=E.height)continue;let W=E.getValueXY(_,Z,0);W>$&&($=W)}I.setValueXY(O,F,0,$)}return I}function iz(E,I,P,_){let T=(P-1)/2,L=(_-1)/2,N=[];for(let I=0;I<E.width;I++)N.push(0);for(let P=0;P<E.height;P++){for(let I=0;I<E.width;I++){let _=0;for(let T=Math.max(0,P-L);T<Math.min(E.height,P+L+1);T++){let P=E.getValueXY(I,T,0);P>_&&(_=P)}N[I]=_}for(let _=0;_<E.width;_++){let L=0;for(let I=Math.max(0,_-T);I<Math.min(E.width,_+T+1);I++)N[I]>L&&(L=N[I]);I.setValueXY(_,P,0,L)}}return I}function iG(E,I,P){let _=P.length,T=P[0].length,L=(_-1)/2,N=(T-1)/2;for(let F=0;F<E.height;F++)for(let O=0;O<E.width;O++){let $=0;e:for(let I=0;I<T;I++)for(let T=0;T<_;T++){if(1!==P[T][I])continue;let _=T-L+O,Z=I-N+F;if(Z<0||_<0||_>=E.width||Z>=E.height)continue;let W=E.getBitXY(_,Z);if(1===W){$=1;break e}}1===$&&I.setBitXY(O,F)}return I}function ij(E,I,P,_){let T=(P-1)/2,L=(_-1)/2,N=[];for(let I=0;I<E.width;I++)N.push(1);for(let P=0;P<E.height;P++){for(let I=0;I<E.width;I++){N[I]=0;for(let _=Math.max(0,P-L);_<Math.min(E.height,P+L+1);_++)if(1===E.getBitXY(I,_)){N[I]=1;break}}for(let _=0;_<E.width;_++)if(1!==I.getBitXY(_,P)){for(let L=Math.max(0,_-T);L<Math.min(E.width,_+T+1);L++)if(1===N[L]){I.setBitXY(_,P);break}}}return I}function i$(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("erode",{bitDepth:[1,8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("erode: The number of rows and columns of the kernel must be odd");let _=!0;t:for(let E of I)for(let I of E)if(1!==I){_=!1;break t}let T=this;for(let E=0;E<P;E++)if(1===this.bitDepth){if(_){let E=T.clone();T=iW(T,E,I.length,I[0].length)}else{let E=ah.createFrom(T);T=iZ(T,E,I)}}else if(_){let E=ah.createFrom(T);T=iH(T,E,I.length,I[0].length)}else{let E=ah.createFrom(T);T=iq(T,E,I)}return T}function iq(E,I,P){let _=P.length,T=P[0].length,L=(_-1)/2,N=(T-1)/2;for(let F=0;F<E.height;F++)for(let O=0;O<E.width;O++){let $=E.maxValue;for(let I=0;I<T;I++)for(let T=0;T<_;T++){if(1!==P[T][I])continue;let _=T-L+O,Z=I-N+F;if(_<0||Z<0||_>=E.width||Z>=E.height)continue;let W=E.getValueXY(_,Z,0);W<$&&($=W)}I.setValueXY(O,F,0,$)}return I}function iH(E,I,P,_){let T=(P-1)/2,L=(_-1)/2,N=[];for(let I=0;I<E.width;I++)N.push(0);for(let P=0;P<E.height;P++){for(let I=0;I<E.width;I++){let _=E.maxValue;for(let T=Math.max(0,P-L);T<Math.min(E.height,P+L+1);T++){let P=E.getValueXY(I,T,0);P<_&&(_=P)}N[I]=_}for(let _=0;_<E.width;_++){let L=E.maxValue;for(let I=Math.max(0,_-T);I<Math.min(E.width,_+T+1);I++)N[I]<L&&(L=N[I]);I.setValueXY(_,P,0,L)}}return I}function iZ(E,I,P){let _=P.length,T=P[0].length,L=(_-1)/2,N=(T-1)/2;for(let F=0;F<E.height;F++)for(let O=0;O<E.width;O++){let $=1;e:for(let I=0;I<T;I++)for(let T=0;T<_;T++){if(1!==P[T][I])continue;let _=T-L+O,Z=I-N+F;if(Z<0||_<0||_>=E.width||Z>=E.height)continue;let W=E.getBitXY(_,Z);if(0===W){$=0;break e}}1===$&&I.setBitXY(O,F)}return I}function iW(E,I,P,_){let T=(P-1)/2,L=(_-1)/2,N=[];for(let I=0;I<E.width;I++)N.push(0);for(let P=0;P<E.height;P++){for(let I=0;I<E.width;I++){N[I]=1;for(let _=Math.max(0,P-L);_<Math.min(E.height,P+L+1);_++)if(0===E.getBitXY(I,_)){N[I]=0;break}}for(let _=0;_<E.width;_++)if(0!==I.getBitXY(_,P)){for(let L=Math.max(0,_-T);L<Math.min(E.width,_+T+1);L++)if(0===N[L]){I.clearBitXY(_,P);break}}}return I}function iK(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("open",{bitDepth:[8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("open: The number of rows and columns of the kernel must be odd");let _=this;for(let E=0;E<P;E++)_=(_=_.erode({kernel:I})).dilate({kernel:I});return _}function iJ(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("close",{bitDepth:[1,8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("close: The number of rows and columns of the kernel must be odd");let _=this;for(let E=0;E<P;E++)_=_.dilate({kernel:I}).erode({kernel:I});return _}function iQ(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("topHat",{bitDepth:[8,16],components:1,alpha:0}),I.length%2==0||I[0].length%2==0)throw TypeError("topHat: The number of rows and columns of the kernel must be odd");let _=this;for(let E=0;E<P;E++)_=_.open({kernel:I}).subtractImage(_,{absolute:!0});return _}function i0(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("blackHat",{bitDepth:[8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("blackHat: The number of rows and columns of the kernel must be odd");let _=this;for(let E=0;E<P;E++){let E=_.close({kernel:I});_=E.subtractImage(_,{absolute:!0})}return _}function i1(E={}){let{kernel:I=[[1,1,1],[1,1,1],[1,1,1]],iterations:P=1}=E;if(this.checkProcessable("morphologicalGradient",{bitDepth:[8,16],components:1,alpha:0}),I.columns%2==0||I.rows%2==0)throw TypeError("morphologicalGradient: The number of rows and columns of the kernel must be odd");let _=this;for(let E=0;E<P;E++){let E=_.dilate({kernel:I}),P=_.erode({kernel:I});_=E.subtractImage(P,{absolute:!0})}return _}function i2(E){let I=0,P=0,_=0,T=0,L=E[0][0],N=0;for(let I=1;I<E.length;I++)E[I][0]<L&&(L=E[I][0],N=I);let F=E[(N+1)%E.length][0],O=(N+1)%E.length;for(let I=1;I<E.length;I++)E[I][0]<F&&I!==N&&(F=E[I][0],O=I);return E[O][1]<E[N][1]?(I=E[O],T=E[N],N!==(O+1)%4?(P=E[(O+1)%4],_=E[(O+2)%4]):(P=E[(O+2)%4],_=E[(O+3)%4])):(T=E[O],I=E[N],O!==(N+1)%4?(P=E[(N+1)%4],_=E[(N+2)%4]):(P=E[(N+2)%4],_=E[(N+3)%4])),[I,P,_,T]}function i3(E,I){return Math.sqrt(Math.pow(E[0]-I[0],2)+Math.pow(E[1]-I[1],2))}function i5(E,I){return[E[1]*I[2]-E[2]*I[1],E[2]*I[0]-E[0]*I[2],E[0]*I[1]-E[1]*I[0]]}function i4(E,I){return E[0]*I[0]+E[1]*I[1]+E[2]*I[2]}function i6(E,I,P,_,T,L){let N=Math.max(i3(E,I),i3(_,P)),F=Math.max(i3(E,_),i3(I,P)),O=0,$=0,Z=Math.ceil(T/2),W=Math.ceil(L/2),J=N/F,Q=[E[0],E[1],1],te=[I[0],I[1],1],ti=[_[0],_[1],1],tn=[P[0],P[1],1],ta=i4(i5(Q,tn),ti)/i4(i5(te,tn),ti),th=i4(i5(Q,tn),te)/i4(i5(ti,tn),te),tu=[ta*te[0]-Q[0],ta*te[1]-Q[1],ta*te[2]-Q[2]],tf=[th*ti[0]-Q[0],th*ti[1]-Q[1],th*ti[2]-Q[2]],tc=tu[0],td=tu[1],tm=tu[2],tp=tf[0],tg=tf[1],tw=tf[2],tb=1/(tm*tw)*(tc*tp-(tc*tw+tm*tp)*Z+tm*tw*Z*Z+(td*tg-(td*tw+tm*tg)*W+tm*tw*W*W));tb=tb>=0?Math.sqrt(tb):Math.sqrt(-tb);let ty=new iR.Z([[tb,0,Z],[0,tb,W],[0,0,1]]),tv=ty.transpose(),tx=(0,iU.S)(tv),tM=(0,iU.S)(ty),tk=iR.Z.rowVector(tu),tE=iR.Z.rowVector(tf),tA=Math.sqrt(i4(tk.mmul(tx).mmul(tM).to1DArray(),tu)/i4(tE.mmul(tx).mmul(tM).to1DArray(),tf));return 0===tA||0===J?(O=Math.ceil(N),$=Math.ceil(F)):tA<J?$=Math.ceil((O=Math.ceil(N))/tA):O=Math.ceil(tA*($=Math.ceil(F))),[O,$]}function i8(E,I,P,_,T,L,N,F,O,$,Z,W){let[J,Q]=[(P*E+_*I+T)/(O*E+$*I+1),(L*E+N*I+F)/(O*E+$*I+1)];return Z.getValueXY(Math.floor(J),Math.floor(Q),W)}function i7(E,I={}){let P,_,{calculateRatio:T=!0}=I;if(4!==E.length)throw Error(`The array pts must have four elements, which are the four corners. Currently, pts have ${E.length} elements`);let[L,N,F,O]=E,[$,Z,W,J]=i2([L,N,F,O]);T?[P,_]=i6($,Z,W,J,this.width,this.height):(P=Math.ceil(Math.max(i3($,Z),i3(J,W))),_=Math.ceil(Math.max(i3($,J),i3(Z,W))));let Q=ah.createFrom(this,{width:P,height:_}),[te,ti]=$,[tn,ta]=Z,[th,tu]=W,[tf,tc]=J,[td,tm]=[0,0],[tp,tg]=[0,P-1],[tw,tb]=[_-1,P-1],[ty,tv]=[_-1,0],tx=new iR.Z([[td,tm,1,0,0,0,-td*te,-tm*te],[tp,tg,1,0,0,0,-tp*tn,-tg*tn],[tw,tb,1,0,0,0,-tw*th,-tm*th],[ty,tv,1,0,0,0,-ty*tf,-tv*tf],[0,0,0,td,tm,1,-td*ti,-tm*ti],[0,0,0,tp,tg,1,-tp*ta,-tg*ta],[0,0,0,tw,tb,1,-tw*tu,-tb*tu],[0,0,0,ty,tv,1,-ty*tc,-tv*tc]]),tM=iR.Z.columnVector([te,tn,th,tf,ti,ta,tu,tc]),[tk,tE,tA,tS,tI,tP,tD,t_]=new is.Z(tx).solve(tM).to1DArray(),tC=new iR.Z(_,P);for(let E=0;E<this.channels;E++){for(let I=0;I<_;I++)for(let _=0;_<P;_++)tC.set(I,_,i8(I,_,tk,tE,tA,tS,tI,tP,tD,t_,this,E));Q.setMatrix(tC,{channel:E})}return Q}function i9(E={}){let{x:I=0,y:P=0,width:_=this.width-I,height:T=this.height-P}=E;if(this.checkProcessable("crop",{bitDepth:[1,8,16]}),I=Math.round(I),P=Math.round(P),_=Math.round(_),T=Math.round(T),I>this.width-1||P>this.height-1)throw RangeError(`crop: origin (x:${I}, y:${P}) out of range (${this.width-1}; ${this.height-1})`);if(_<=0||T<=0)throw RangeError(`crop: width and height (width:${_}; height:${T}) must be positive numbers`);if(I<0||P<0)throw RangeError(`crop: x and y (x:${I}, y:${P}) must be positive numbers`);if(_>this.width-I||T>this.height-P)throw RangeError(`crop: (x: ${I}, y:${P}, width:${_}, height:${T}) size is out of range`);let L=this;if(1===this.bitDepth){let E=new ah(_,T,{kind:"BINARY",parent:this});L=no(this,E,I,P,_,T)}else{let E=ah.createFrom(this,{width:_,height:T,position:[I,P]});L=nt(this,E,I,P,_,T)}return L}function nt(E,I,P,_,T,L){let N=T*E.channels,F=_+L,O=0,$=P*E.channels;for(let P=_;P<F;P++){let _=P*E.width*E.channels+$,T=_+N;for(;_<T;_++)I.data[O++]=E.data[_]}return I}function no(E,I,P,_,T,L){let N=T*E.channels,F=_+L,O=0,$=P*E.channels;for(let P=_;P<F;P++){let _=P*E.width*E.channels+$,T=_+N;for(;_<T;_++)E.getBit(_)&&I.setBit(O),++O}return I}function ns(E={}){this.checkProcessable("cropAlpha",{alpha:1});let{threshold:I=this.maxValue}=E,P=na(this,I,this.components);if(-1===P)throw Error("Could not find new dimensions. Threshold may be too high.");let _=nh(this,I,this.components,P),T=nl(this,I,this.components,P),L=nc(this,I,this.components,P,_,T);return this.crop({x:P,y:_,width:L-P+1,height:T-_+1})}function na(E,I,P){for(let _=0;_<E.width;_++)for(let T=0;T<E.height;T++)if(E.getValueXY(_,T,P)>=I)return _;return -1}function nh(E,I,P,_){for(let T=0;T<E.height;T++)for(let L=_;L<E.width;L++)if(E.getValueXY(L,T,P)>=I)return T;return -1}function nl(E,I,P,_){for(let T=E.height-1;T>=0;T--)for(let L=_;L<E.width;L++)if(E.getValueXY(L,T,P)>=I)return T;return -1}function nc(E,I,P,_,T,L){for(let N=E.width-1;N>=_;N--)for(let _=T;_<=L;_++)if(E.getValueXY(N,_,P)>=I)return N;return -1}function nd(E){if("string"==typeof E){let I=E[E.length-1];E=parseFloat(E),"%"===I&&(E/=100)}return E}function nm(E,I){if(!I)throw Error("getThreshold : the maxValue should be specified");if("string"==typeof E){if("%"!==E[E.length-1])throw Error("getThreshold : if the value is a string it must finish by %");return parseFloat(E)/100*I}if("number"==typeof E)return E<1?E*I:E;throw Error("getThreshold : the value is not valid")}function np(E,I,P){let _=Math.round((E=nd(E))*I),T=Math.round(E*P);return _<=0&&(_=1),T<=0&&(T=1),{width:_,height:T}}function ng(E,I){if(I<0||I>=E.height)throw RangeError(`row must be included between 0 and ${E.height-1}. Current value: ${I}`)}function nw(E,I){if(I<0||I>=E.width)throw RangeError(`column must be included between 0 and ${E.width-1}. Current value: ${I}`)}function nb(E,I){if(I<0||I>=E.channels)throw RangeError(`channel must be included between 0 and ${E.channels-1}. Current value: ${I}`)}let nv={nearestneighbor:"nearestNeighbor",nearestneighbour:"nearestNeighbor",bilinear:"bilinear"};function nM(E){if("string"!=typeof E)throw TypeError("interpolation must be a string");if(!nv[E=E.toLowerCase()])throw RangeError(`invalid interpolation algorithm: ${E}`);return nv[E]}function nk(E,I,P){let _=this.width/I,T=this.height/P;if(this.bitDepth>1)for(let L=0;L<I;L++){let I=Math.floor((L+.5)*_);for(let _=0;_<P;_++){let P=Math.floor((_+.5)*T);for(let T=0;T<this.channels;T++)E.setValueXY(L,_,T,this.getValueXY(I,P,T))}}else for(let L=0;L<I;L++){let I=Math.floor((L+.5)*_);for(let _=0;_<P;_++){let P=Math.floor((_+.5)*T);this.getBitXY(I,P)&&E.setBitXY(L,_)}}}function nE(E={}){let{factor:I=1,interpolation:P=nv.nearestneighbor,preserveAspectRatio:_=!0}=E,T=nM(P),L=E.width,N=E.height;if(L||(L=N&&_?Math.round(N*(this.width/this.height)):this.width),N||(N=_?Math.round(L*(this.height/this.width)):this.height),{width:L,height:N}=np(I,L,N),L===this.width&&N===this.height){let E=this.clone();return E.position=[0,0],E}let F=Math.round((this.width-L)/2),O=Math.round((this.height-N)/2),$=ah.createFrom(this,{width:L,height:N,position:[F,O]});if(T===nv.nearestneighbor)nk.call(this,$,L,N);else throw Error(`unsupported resize interpolation: ${T}`);return $}function nA(){this.checkProcessable("hsv",{bitDepth:[8,16],alpha:[0,1],colorModel:[ee]});let E=ah.createFrom(this,{colorModel:en}),I=0,P=this.data;for(let _=0;_<P.length;_+=this.channels){let T=P[_],L=P[_+1],N=P[_+2],F=Math.min(T,L,N),O=Math.max(T,L,N),$=O-F,Z=0,W=0===O?0:$/O,J=O;if(O!==F){switch(O){case T:Z=(L-N)/$+(L<N?6:0);break;case L:Z=(N-T)/$+2;break;case N:Z=(T-L)/$+4;break;default:throw Error("unreachable")}Z/=6}E.data[I++]=Z*this.maxValue,E.data[I++]=W*this.maxValue,E.data[I++]=J,this.alpha&&(E.data[I++]=P[_+3])}return E}function nS(){this.checkProcessable("hsl",{bitDepth:[8,16],alpha:[0,1],colorModel:[ee]});let E=ah.createFrom(this,{colorModel:er}),I=Math.floor(this.maxValue/2),P=0,_=this.data;for(let T=0;T<_.length;T+=this.channels){let L=_[T],N=_[T+1],F=_[T+2],O=Math.max(L,N,F),$=Math.min(L,N,F),Z=0,W=0,J=(O+$)/2;if(O!==$){let E=O-$;switch(W=J>I?E/(2-O-$):E/(O+$),O){case L:Z=(N-F)/E+(N<F?6:0);break;case N:Z=(F-L)/E+2;break;case F:Z=(L-N)/E+4;break;default:throw Error("unreachable")}Z/=6}E.data[P++]=Z*this.maxValue,E.data[P++]=W*this.maxValue,E.data[P++]=J,this.alpha&&(E.data[P++]=_[T+3])}return E}function nI(){this.checkProcessable("cmyk",{bitDepth:[8,16],alpha:[0,1],colorModel:[ee]});let E=ah.createFrom(this,{components:4,colorModel:eo}),I=0,P=this.data;for(let _=0;_<P.length;_+=this.channels){let T=P[_],L=P[_+1],N=P[_+2],F=Math.min(this.maxValue-T,this.maxValue-L,this.maxValue-N),O=(this.maxValue-T-F)/(1-F/this.maxValue),$=(this.maxValue-L-F)/(1-F/this.maxValue),Z=(this.maxValue-N-F)/(1-F/this.maxValue);E.data[I++]=Math.round(O),E.data[I++]=Math.round($),E.data[I++]=Math.round(Z),E.data[I++]=Math.round(F),this.alpha&&(E.data[I++]=P[_+3])}return E}function nP(){return new ah(this.width,this.height,this.getRGBAData(),{kind:"RGBA",parent:this})}var nD=P(4686);function n_(E={}){let I,{algorithm:P="luma709",keepAlpha:_=!1,mergeAlpha:T=!0}=E;if("string"!=typeof P&&"function"!=typeof P)throw TypeError("algorithm must be a string or a function");this.checkProcessable("grey",{bitDepth:[8,16],alpha:[0,1]}),1===this.components&&(P="red"),_&=this.alpha,T&=this.alpha,_&&(T=!1);let L=rC(this,E,{components:1,alpha:_,colorModel:et});if("function"==typeof P)I=P;else if(!(I=nD.x[P.toLowerCase()]))throw Error(`unsupported grey algorithm: ${P}`);let N=0;for(let E=0;E<this.data.length;E+=this.channels)T?L.data[N++]=r8(I(this.data[E],this.data[E+1],this.data[E+2],this)*this.data[E+this.components]/this.maxValue,this):(L.data[N++]=r8(I(this.data[E],this.data[E+1],this.data[E+2],this),this),L.alpha&&(L.data[N++]=this.data[E+this.components]));return L}var nC=P(1114);function nB(E={}){let{algorithm:I=nC.R.otsu}=E;this.checkProcessable("getThreshold",{components:1,bitDepth:[8,16]});let P=nC.x[I.toLowerCase()];if(P)return P(this.getHistogram(),this.size);throw Error(`unknown thresholding algorithm: ${I}`)}let nT="threshold";function nR(E={}){let{algorithm:I=nT,threshold:P=.5,useAlpha:_=!0,invert:T=!1}=E;this.checkProcessable("mask",{components:1,bitDepth:[8,16]}),P=I===nT?nm(P,this.maxValue):nB.call(this,E);let L=new ah(this.width,this.height,{kind:"BINARY",parent:this}),N=0;if(this.alpha&&_)for(let E=0;E<this.data.length;E+=this.channels){let I=this.data[E]+(this.maxValue-this.data[E])*(this.maxValue-this.data[E+1])/this.maxValue;(T&&I<=P||!T&&I>=P)&&L.setBit(N),N++}else for(let E=0;E<this.data.length;E+=this.channels)(T&&this.data[E]<=P||!T&&this.data[E]>=P)&&L.setBit(N),N++;return L}function nU(E,I,P,_){let T=E.width,L=E.height,N=I.width,F=E.channels;for(let O=0;O<T;O++)for(let $=0;$<L;$++)for(let L=0;L<F;L++){let Z=($*T+O)*F+L,W=((_+$)*N+P+O)*F+L;I.data[W]=E.data[Z]}}function nL(E={}){let{size:I=0,algorithm:P="copy",color:_}=E;if(this.checkProcessable("pad",{bitDepth:[8,16]}),"set"===P){if(_.length!==this.channels)throw Error(`pad: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let E=0;E<_.length;E++)0===_[E]&&(_[E]=.001)}else _=iy()(this.channels,null);Array.isArray(I)||(I=[I,I]);let T=this.width+2*I[0],L=this.height+2*I[1],N=this.channels,F=ah.createFrom(this,{width:T,height:L});nU(this,F,I[0],I[1]);for(let E=I[0];E<T-I[0];E++)for(let P=0;P<N;P++){let O=_[P]||F.data[(I[1]*T+E)*N+P];for(let _=0;_<I[1];_++)F.data[(_*T+E)*N+P]=O;O=_[P]||F.data[((L-I[1]-1)*T+E)*N+P];for(let _=L-I[1];_<L;_++)F.data[(_*T+E)*N+P]=O}for(let E=0;E<L;E++)for(let P=0;P<N;P++){let L=_[P]||F.data[(E*T+I[0])*N+P];for(let _=0;_<I[0];_++)F.data[(E*T+_)*N+P]=L;L=_[P]||F.data[(E*T+T-I[0]-1)*N+P];for(let _=T-I[0];_<T;_++)F.data[(E*T+_)*N+P]=L}return F}function nN(E=8){if(this.checkProcessable("colorDepth",{bitDepth:[1,8,16]}),![8,16].includes(E))throw Error("You need to specify the new colorDepth as 8 or 16");if(this.bitDepth===E)return this.clone();let I=ah.createFrom(this,{bitDepth:E});switch(E){case 8:if(1===this.bitDepth)for(let E=0;E<this.size;E++)this.getBit(E)&&(I.data[E]=255);else for(let E=0;E<this.data.length;E++)I.data[E]=this.data[E]>>8;break;case 16:if(1===this.bitDepth)for(let E=0;E<this.size;E++)this.getBit(E)&&(I.data[E]=65535);else for(let E=0;E<this.data.length;E++)I.data[E]=this.data[E]<<8|this.data[E];break;default:throw Error("colorDepth conversion unexpected case")}return I}function nF(E,I={}){let{interpolation:P=nv.nearestneighbor,width:_=this.width,height:T=this.height}=I;if("number"!=typeof E)throw TypeError("degrees must be a number");let L=nM(P),N=E*Math.PI/180,F=Math.floor(Math.abs(_*Math.cos(N))+Math.abs(T*Math.sin(N))),O=Math.floor(Math.abs(T*Math.cos(N))+Math.abs(_*Math.sin(N))),$=Math.cos(-N),Z=Math.sin(-N),W=F/2,J=O/2;F%2==0?W-=.5:W=Math.floor(W),O%2==0?J-=.5:J=Math.floor(J);let Q=Math.floor(_/2-W),te=Math.floor(T/2-J);if(1===this.bitDepth){let E=new ah(F,O,{kind:"BINARY",parent:this});switch(L){case nv.nearestneighbor:return nY(this,E,Q,te,W,J,$,Z);case nv.bilinear:return nX(this,E,Q,te,W,J,$,Z);default:throw Error(`unsupported rotate interpolation: ${L}`)}}else{let E=ah.createFrom(this,{width:F,height:O});switch(L){case nv.nearestneighbor:return nO(this,E,Q,te,W,J,$,Z);case nv.bilinear:return nV(this,E,Q,te,W,J,$,Z);default:throw Error(`unsupported rotate interpolation: ${L}`)}}}function nO(E,I,P,_,T,L,N,F){for(let O=0;O<I.width;O+=1)for(let $=0;$<I.height;$+=1)for(let Z=0;Z<E.channels;Z++){let W=Math.round((O-T)*N-($-L)*F+T)+P,J=Math.round(($-L)*N+(O-T)*F+L)+_;W<0||W>=E.width||J<0||J>=E.height?1===E.alpha&&Z===E.channels-1?I.setValueXY(O,$,Z,0):I.setValueXY(O,$,Z,E.maxValue):I.setValueXY(O,$,Z,E.getValueXY(W,J,Z))}return I}function nY(E,I,P,_,T,L,N,F){for(let O=0;O<I.width;O+=1)for(let $=0;$<I.height;$+=1){let Z=Math.round((O-T)*N-($-L)*F+T)+P,W=Math.round(($-L)*N+(O-T)*F+L)+_;(Z<0||Z>=E.width||W<0||W>=E.height||E.getBitXY(Z,W))&&I.setBitXY(O,$)}return I}function nV(E,I,P,_,T,L,N,F){let O=E.width*E.channels;for(let $=0;$<I.height;$++)for(let Z=0;Z<I.width;Z++){let W=(Z-T)*N-($-L)*F+T+P,J=($-L)*N+(Z-T)*F+L+_,Q=0|W,te=0|J,ti=W-Q,tn=J-te;for(let P=0;P<E.channels;P++)if(W<0||W>=E.width||J<0||J>=E.height)1===E.alpha&&P===E.channels-1?I.setValueXY(Z,$,P,0):I.setValueXY(Z,$,P,E.maxValue);else{let _=(te*E.width+Q)*E.channels+P,T=E.data[_],L=E.data[_+E.channels],N=E.data[_+O],F=T+ti*(L-T)+tn*(N-T)+ti*tn*(T-L-N+E.data[_+O+E.channels])|0;I.setValueXY(Z,$,P,F)}}return I}function nX(E,I,P,_,T,L,N,F){let O=E.width;for(let $=0;$<I.height;$++)for(let Z=0;Z<I.width;Z++){let W=(Z-T)*N-($-L)*F+T+P,J=($-L)*N+(Z-T)*F+L+_,Q=0|W,te=0|J,ti=W-Q,tn=J-te;if(W<0||W>=E.width||J<0||J>=E.height)I.setBitXY(Z,$);else{let P=te*E.width+Q,_=E.getBit(P),T=E.getBit(P+1),L=E.getBit(P+O);(_|ti&T-_|tn&L-_|ti&tn&_-T-L+E.getBit(P+1+O))>0&&I.setBitXY(Z,$)}}return I}function nz(E,I){if(this.checkProcessable("rotate",{bitDepth:[1,8,16]}),"number"!=typeof E)throw TypeError("angle must be a number");switch(E<0&&(E=360*Math.ceil(-E/360)+E),E%360){case 0:return this.clone();case 90:return nj.call(this);case 180:return n$.call(this);case 270:return nG.call(this);default:return nF.call(this,E,I)}}function nG(){if(1===this.bitDepth){let E=new ah(this.height,this.width,{kind:"BINARY",parent:this}),I=E.height-1;for(let P=0;P<this.height;P++)for(let _=0;_<this.width;_++)this.getBitXY(_,P)&&E.setBitXY(P,I-_);return E}{let E=ah.createFrom(this,{width:this.height,height:this.width}),I=E.height-1;for(let P=0;P<this.height;P++)for(let _=0;_<this.width;_++)for(let T=0;T<this.channels;T++)E.setValueXY(P,I-_,T,this.getValueXY(_,P,T));return E}}function nj(){if(1===this.bitDepth){let E=new ah(this.height,this.width,{kind:"BINARY",parent:this}),I=E.width-1;for(let P=0;P<this.height;P++)for(let _=0;_<this.width;_++)this.getBitXY(_,P)&&E.setBitXY(I-P,_);return E}{let E=ah.createFrom(this,{width:this.height,height:this.width}),I=E.width-1;for(let P=0;P<this.height;P++)for(let _=0;_<this.width;_++)for(let T=0;T<this.channels;T++)E.setValueXY(I-P,_,T,this.getValueXY(_,P,T));return E}}function n$(){if(1===this.bitDepth){let E=new ah(this.width,this.height,{kind:"BINARY",parent:this}),I=E.width-1,P=E.height-1;for(let _=0;_<this.height;_++)for(let T=0;T<this.width;T++)this.getBitXY(T,_)&&E.setBitXY(I-T,P-_);return E}{let E=ah.createFrom(this),I=E.width-1,P=E.height-1;for(let _=0;_<this.height;_++)for(let T=0;T<this.width;T++)for(let L=0;L<this.channels;L++)E.setValueXY(I-T,P-_,L,this.getValueXY(T,_,L));return E}}function nq(E,I={}){let P=r_(E);this.checkProcessable("insert",P);let{x:_=0,y:T=0}=I,L=rB(this,I,{copy:!0}),N=Math.min(L.height,T+E.height),F=Math.min(L.width,_+E.width);if(1===L.bitDepth)for(let I=T;I<N;I++)for(let P=_;P<F;P++){let N=E.getBitXY(P-_,I-T);N?L.setBitXY(P,I):L.clearBitXY(P,I)}else for(let I=T;I<N;I++)for(let P=_;P<F;P++)L.setPixelXY(P,I,E.getPixelXY(P-_,I-T));return L}function nH(E={}){let{size:I=0,algorithm:P="copy",color:_}=E;if(this.checkProcessable("setBorder",{bitDepth:[8,16,32,64]}),"set"===P){if(_.length!==this.channels)throw Error(`setBorder: the color array must have the same length as the number of channels. Here: ${this.channels}`);for(let E=0;E<_.length;E++)0===_[E]&&(_[E]=.001)}else _=iy()(this.channels,null);Array.isArray(I)||(I=[I,I]);let T=I[0],L=I[1],N=this.channels;for(let E=T;E<this.width-T;E++)for(let I=0;I<N;I++){let P=_[I]||this.data[(E+this.width*L)*N+I];for(let _=0;_<L;_++)this.data[(_*this.width+E)*N+I]=P;P=_[I]||this.data[(E+this.width*(this.height-L-1))*N+I];for(let _=this.height-L;_<this.height;_++)this.data[(_*this.width+E)*N+I]=P}for(let E=0;E<this.height;E++)for(let I=0;I<N;I++){let P=_[I]||this.data[(E*this.width+T)*N+I];for(let _=0;_<T;_++)this.data[(E*this.width+_)*N+I]=P;P=_[I]||this.data[(E*this.width+this.width-T-1)*N+I];for(let _=this.width-T;_<this.width;_++)this.data[(E*this.width+_)*N+I]=P}return this}function nZ(E={}){let{preserveAlpha:I=!0}=E;if(this.checkProcessable("split",{bitDepth:[8,16]}),1===this.components)return new rg.Z([this.clone()]);let P=new rg.Z,_=this.data;if(this.alpha&&I)for(let E=0;E<this.components;E++){let I=ah.createFrom(this,{components:1,alpha:!0,colorModel:et}),T=0;for(let P=0;P<_.length;P+=this.channels)I.data[T++]=_[P+E],I.data[T++]=_[P+this.components];P.push(I)}else for(let E=0;E<this.channels;E++){let I=ah.createFrom(this,{components:1,alpha:!1,colorModel:et}),T=0;for(let P=0;P<_.length;P+=this.channels)I.data[T++]=_[P+E];P.push(I)}return P}function nW(E,I={}){let{keepAlpha:P=!1,mergeAlpha:_=!1}=I;P&=this.alpha,_&=this.alpha,this.checkProcessable("getChannel",{bitDepth:[8,16]}),E=rq(this,E);let T=ah.createFrom(this,{components:1,alpha:P,colorModel:et}),L=0;for(let I=0;I<this.data.length;I+=this.channels)_?T.data[L++]=this.data[I+E]*this.data[I+this.components]/this.maxValue:(T.data[L++]=this.data[I+E],P&&(T.data[L++]=this.data[I+this.components]));return T}function nK(E=nJ,I={}){let{mergeAlpha:P=!1,keepAlpha:_=!1}=I;P&=this.alpha,_&=this.alpha,this.checkProcessable("combineChannels",{bitDepth:[8,16]});let T=ah.createFrom(this,{components:1,alpha:_,colorModel:et}),L=0;for(let I=0;I<this.size;I++){let N=E(this.getPixel(I));P?T.data[L++]=N*this.data[I*this.channels+this.components]/this.maxValue:(T.data[L++]=N,_&&(T.data[L++]=this.data[I*this.channels+this.components]))}return T}function nJ(E){return(E[0]+E[1]+E[2])/3}function nQ(E,I){if(this.checkProcessable("setChannel",{bitDepth:[8,16]}),I.checkProcessable("setChannel (image parameter check)",{bitDepth:[this.bitDepth],alpha:[0],components:[1]}),I.width!==this.width||I.height!==this.height)throw Error("Images must have exactly the same width and height");let P=E=rq(this,E);for(let E=0;E<I.data.length;E++)this.data[P]=I.data[E],P+=this.channels;return this}function n0(E,I={}){let{shift:P=[0,0],average:_,channels:T,defaultAlpha:L,normalize:N,border:F=[0,0]}=I;if(this.checkProcessable("getSimilarity",{bitDepth:[8,16]}),Array.isArray(F)||(F=[F,F]),T=rG(this,{channels:T,defaultAlpha:L}),this.bitDepth!==E.bitDepth)throw Error("Both images must have the same bitDepth");if(this.channels!==E.channels)throw Error("Both images must have the same number of channels");if(this.colorModel!==E.colorModel)throw Error("Both images must have the same colorModel");void 0===_&&(_=!0);let O=Math.max(F[0],-P[0]),$=Math.min(this.width-F[0],this.width-P[0]),Z=Math.max(F[1],-P[1]),W=Math.min(this.height-F[1],this.height-P[1]),J=iy()(T.length,0);for(let I=0;I<T.length;I++){let _=T[I],L=N?this.sum[_]:Math.max(this.sum[_],E.sum[_]),F=N?E.sum[_]:Math.max(this.sum[_],E.sum[_]);if(0!==L&&0!==F)for(let T=O;T<$;T++)for(let N=Z;N<W;N++){let O=T*this.multiplierX+N*this.multiplierY+_,$=O+P[0]*this.multiplierX+P[1]*this.multiplierY;J[I]+=Math.min(this.data[O]/L,E.data[$]/F)}}return _?J.reduce((E,I)=>E+I)/J.length:J}function n1(E={}){let{sampling:I=[10,10],painted:P=!1,mask:_}=E;this.checkProcessable("getPixelsGrid",{bitDepth:[8,16],channels:1}),Array.isArray(I)||(I=[I,I]);let T=I[0],L=I[1],N=[],F=[],O=this.width/T,$=this.height/L,Z=Math.floor(O/2);for(let E=0;E<T;E++){let E=Math.floor($/2);for(let I=0;I<L;I++){let I=Math.round(Z),P=Math.round(E);(!_||_.getBitXY(I,P))&&(N.push([I,P]),F.push(this.getPixelXY(I,P))),E+=$}Z+=O}let W={xyS:N,zS:F};return P&&(W.painted=this.rgba8().paintPoints(N)),W}function n5(E,I,P){let _=Array(E);for(let P=0;P<E;P++)_[P]=Array(I);if(P)for(let T=0;T<E;T++)for(let E=0;E<I;E++)_[T][E]=P;return _.width=E,_.height=I,Object.setPrototypeOf(_,n5.prototype),_}function n6(E,I={}){let{border:P}=I;if(this.checkProcessable("getChannel",{bitDepth:[8,16]}),this.bitDepth!==E.bitDepth)throw Error("Both images must have the same bitDepth");if(this.channels!==E.channels)throw Error("Both images must have the same number of channels");if(this.colorModel!==E.colorModel)throw Error("Both images must have the same colorModel");let _=new n5(E.width,E.height,-1/0),T=Math.floor(E.width/2),L=Math.floor(E.height/2),N=T,F=L,O=!1;for(;!O;){let I=_.localSearch(T,L,-1/0);for(let T=0;T<I.length;T++){let L=I[T],O=this.getSimilarity(E,{border:P,shift:[N-L[0],F-L[1]]});_[L[0]][L[1]]=O}let $=_.localMax(T,L);$.position[0]!==T||$.position[1]!==L?(T=$.position[0],L=$.position[1]):O=!0}return[T-N,L-F]}function n7(E,I=0){this.checkProcessable("getRow",{bitDepth:[8,16]}),ng(this,E),nb(this,I);let P=Array(this.width),_=0,T=E*this.width*this.channels+I,L=T+this.width*this.channels;for(let E=T;E<L;E+=this.channels)P[_++]=this.data[E];return P}function n9(E,I=0){this.checkProcessable("getColumn",{bitDepth:[8,16]}),nw(this,E),nb(this,I);let P=Array(this.height),_=0,T=this.width*this.channels;for(let L=I+E*this.channels;L<this.data.length;L+=T)P[_++]=this.data[L];return P}function ot(E={}){let{channel:I}=E;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===I){if(this.components>1)throw RangeError("You need to define the channel for an image that contains more than one channel");I=0}let P=new iR.Z(this.height,this.width);for(let E=0;E<this.height;E++)for(let _=0;_<this.width;_++)P.set(E,_,this.getValueXY(_,E,I));return P}function oe(E,I={}){E=new iR.Z(E);let{channel:P}=I;if(this.checkProcessable("getMatrix",{bitDepth:[8,16]}),void 0===P){if(this.components>1)throw RangeError("You need to define the channel for an image that contains more than one channel");P=0}if(this.width!==E.columns||this.height!==E.rows)throw RangeError("The size of the matrix must be equal to the size of the image");for(let I=0;I<this.height;I++)for(let _=0;_<this.width;_++)this.setValueXY(_,I,P,E.get(I,_));return this}function or(){this.checkProcessable("getPixelsArray",{bitDepth:[8,16,32]});let E=Array(this.size),I=0;for(let P=0;P<this.data.length;P+=this.channels){let _=Array(this.components);for(let E=0;E<this.components;E++)_[E]=this.data[P+E];E[I++]=_}return E}function oi(E){let I=this,P=I.getClosestCommonParent(E),_=I.getRelativePosition(P,{defaultFurther:!0}),T=on(I,_),L=E.getRelativePosition(P,{defaultFurther:!0}),N=on(E,L),F=oo(T,N),O={whitePixelsMask1:[],whitePixelsMask2:[],commonWhitePixels:[]};for(let P=0;P<F.length;P++){let T=F[P],N=[T[0]-_[0],T[1]-_[1]],$=[T[0]-L[0],T[1]-L[1]],Z=I.getBitXY(N[0],N[1]),W=E.getBitXY($[0],$[1]);1===Z&&1===W&&O.commonWhitePixels.push(T)}for(let E=0;E<T.length;E++){let P,_;0!==E&&(P=Math.floor(E/I.width),_=E%I.width),1===I.getBitXY(P,_)&&O.whitePixelsMask1.push(T[E])}for(let I=0;I<N.length;I++){let P=0,_=0;0!==I&&(P=Math.floor(I/E.width),_=I%E.width),1===E.getBitXY(P,_)&&O.whitePixelsMask2.push(N[I])}return O}function on(E,I){let P=[];for(let _=0;_<E.height;_++)for(let T=0;T<E.width;T++){let E=[_,T];P.push([E[0]+I[0],E[1]+I[1]])}return P}function oo(E,I){let P=0,_=0,T=[];for(;P<E.length&&_<I.length;)E[P][0]===I[_][0]&&E[P][1]===I[_][1]?(T.push(E[P]),P++,_++):E[P][0]<I[_][0]||E[P][0]===I[_][0]&&E[P][1]<I[_][1]?P++:_++;return T}function os(E){let I,P=oa(this),_=oa(E);if(I=P>=_?oh(this,P):oh(E,_),0===P||0===_)return I;let T=this,L=E;for(;P!==_;)if(P>_){if(null===(T=T.parent))return I;P-=1}else{if(null===(L=L.parent))return I;_-=1}for(;T!==L&&null!==T&&null!==L;)if(T=T.parent,L=L.parent,null===T||null===L)return I;return T!==L?I:T}function oa(E){let I=0,P=E;for(;null!=P.parent;)P=P.parent,I++;return I}function oh(E,I){let P=E;for(;I>0;)P=P.parent,I-=1;return P}n5.prototype.localMin=function(E,I){let P=this[E][I],_=[E,I];for(let T=Math.max(0,E-1);T<Math.min(this.length,E+2);T++)for(let E=Math.max(0,I-1);E<Math.min(this[0].length,I+2);E++)this[T][E]<P&&(P=this[T][E],_=[T,E]);return{position:_,value:P}},n5.prototype.localMax=function(E,I){let P=this[E][I],_=[E,I];for(let T=Math.max(0,E-1);T<Math.min(this.length,E+2);T++)for(let E=Math.max(0,I-1);E<Math.min(this[0].length,I+2);E++)this[T][E]>P&&(P=this[T][E],_=[T,E]);return{position:_,value:P}},n5.prototype.localSearch=function(E,I,P){let _=[];for(let T=Math.max(0,E-1);T<Math.min(this.length,E+2);T++)for(let E=Math.max(0,I-1);E<Math.min(this[0].length,I+2);E++)this[T][E]===P&&_.push([T,E]);return _};let ol={lowThreshold:10,highThreshold:30,gaussianBlur:1.1},ou=[[-1,0,1],[-2,0,2],[-1,0,1]],of=[[-1,-2,-1],[0,0,0],[1,2,1]],oc={bitDepth:32,mode:"periodic"};function od(E,I){E.checkProcessable("Canny edge detector",{bitDepth:8,channels:1,components:1}),I=Object.assign({},ol,I);let P=E.width,_=E.height,T=E.maxValue,L={sigma:I.gaussianBlur,radius:3},N=E.gaussianFilter(L),F=N.convolution(of,oc),O=N.convolution(ou,oc),$=O.hypotenuse(F),Z=E.constructor,W=new Z(P,_,{kind:"GREY",bitDepth:32}),J=new Z(P,_,{kind:"GREY",bitDepth:32}),Q=new Z(P,_,{kind:"GREY"});for(var te=1;te<P-1;te++)for(var ti=1;ti<_-1;ti++){var tn=(Math.round(Math.atan2(O.getValueXY(te,ti,0),F.getValueXY(te,ti,0))*(5/Math.PI))+5)%5;0===tn&&($.getValueXY(te,ti,0)<=$.getValueXY(te,ti-1,0)||$.getValueXY(te,ti,0)<=$.getValueXY(te,ti+1,0))||1===tn&&($.getValueXY(te,ti,0)<=$.getValueXY(te-1,ti+1,0)||$.getValueXY(te,ti,0)<=$.getValueXY(te+1,ti-1,0))||2===tn&&($.getValueXY(te,ti,0)<=$.getValueXY(te-1,ti,0)||$.getValueXY(te,ti,0)<=$.getValueXY(te+1,ti,0))||3===tn&&($.getValueXY(te,ti,0)<=$.getValueXY(te-1,ti-1,0)||$.getValueXY(te,ti,0)<=$.getValueXY(te+1,ti+1,0))||W.setValueXY(te,ti,0,$.getValueXY(te,ti,0))}for(te=0;te<P*_;++te){var ta=W.data[te],th=0;ta>I.highThreshold&&(th++,Q.data[te]=T),ta>I.lowThreshold&&th++,J.data[te]=th}var tu=[];for(te=1;te<P-1;++te)for(ti=1;ti<_-1;++ti)if(1===J.getValueXY(te,ti,0)){t:for(var tf=te-1;tf<te+2;++tf)for(var tc=ti-1;tc<ti+2;++tc)if(2===J.getValueXY(tf,tc,0)){tu.push([te,ti]),Q.setValueXY(te,ti,0,T);break t}}for(;tu.length>0;){var td=[];for(te=0;te<tu.length;++te)for(ti=-1;ti<2;++ti)for(tf=-1;tf<2;++tf)if(0!==ti||0!==tf){var tm=tu[te][0]+ti,tp=tu[te][1]+tf;1===J.getValueXY(tm,tp,0)&&0===Q.getValueXY(tm,tp,0)&&(td.push([tm,tp]),Q.setValueXY(tm,tp,0,T))}tu=td}return Q}function om(E){return od(this,E)}function op(E,I={}){let{position:P}=I;if(this.checkProcessable("extract",{bitDepth:[1,8,16]}),!P&&!(P=E.getRelativePosition(this)))throw Error("extract : can not extract an image because the relative position can not be determined, try to specify manually the position as an array of 2 elements [x,y].");if(this.bitDepth>1){let I=ah.createFrom(this,{width:E.width,height:E.height,alpha:1,position:P,parent:this});for(let _=0;_<E.width;_++)for(let T=0;T<E.height;T++){for(let E=0;E<this.channels;E++){let L=this.getValueXY(_+P[0],T+P[1],E);I.setValueXY(_,T,E,L)}E.getBitXY(_,T)||I.setValueXY(_,T,this.components,0)}return I}{let I=ah.createFrom(this,{width:E.width,height:E.height,position:P,parent:this});for(let _=0;_<E.height;_++)for(let T=0;T<E.width;T++)E.getBitXY(T,_)&&this.getBitXY(T+P[0],_+P[1])&&I.setBitXY(T,_);return I}}var og=P(8737),ow=P.n(og);function ob(E={}){let{x:I=0,y:P=0,inPlace:_=!0}=E,T=_?this:ah.createFrom(this);this.checkProcessable("floodFill",{bitDepth:1});let L=this.getBitXY(I,P);if(L)return T;let N=new(ow());for(N.push(new oy(I,P));N.length>0;){let E=N.shift();T.setBitXY(E.x,E.y);for(let I=E.x+1;I<this.width&&!(T.getBitXY(I,E.y)||this.getBitXY(I,E.y));I++)T.setBitXY(I,E.y),E.y+1<this.height&&!this.getBitXY(I,E.y+1)&&N.push(new oy(I,E.y+1)),E.y-1>=0&&!this.getBitXY(I,E.y-1)&&N.push(new oy(I,E.y-1));for(let I=E.x-1;I>=0&&!(T.getBitXY(I,E.y)||this.getBitXY(I,E.y));I++)T.setBitXY(I,E.y),E.y+1<this.height&&!this.getBitXY(I,E.y+1)&&N.push(new oy(I,E.y+1)),E.y-1>=0&&!this.getBitXY(I,E.y-1)&&N.push(new oy(I,E.y-1))}return T}function oy(E,I){this.x=E,this.y=I}var ov=P(7462);function ox(E,I,P){var _=[],T=(P/=100)*(I/=100),L=E/60,N=T*(1-Math.abs(L%2-1)),F=P-T;return{r:Math.round(255*((_=L>=0&&L<1?[T,N,0]:L>=1&&L<2?[N,T,0]:L>=2&&L<3?[0,T,N]:E>=3&&L<4?[0,N,T]:E>=4&&L<5?[N,0,T]:E>=5&&L<=6?[T,0,N]:[0,0,0])[0]+F)),g:Math.round(255*(_[1]+F)),b:Math.round(255*(_[2]+F))}}function oM(E,I,P){return{h:E,s:2*(I*=(P<50?P:100-P)/100)/(P+I)*100,v:P+I}}function ok(E,I,P){var _=oM(E,I,P);return ox(_.h,_.s,_.v)}var oE={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]};function oA(E){return oS(E)||o_(E)||oD(E)||oI(E)||oP(E)||oC(E)||oB(E)}function oS(E){var I=oE[E.toLowerCase()];if(I)return{r:I[0],g:I[1],b:I[2],a:100}}function oI(E){var I=E.match(/rgb\(([^)]+)\)/);if(I){var P=I[1].split(/ *, */).map(Number);return{r:P[0],g:P[1],b:P[2],a:100}}}function oP(E){var I=E.match(/rgba\(([^)]+)\)/);if(I){var P=I[1].split(/ *, */).map(Number);return{r:P[0],g:P[1],b:P[2],a:100*P[3]}}}function oD(E){if("#"===E[0]&&7===E.length)return{r:parseInt(E.slice(1,3),16),g:parseInt(E.slice(3,5),16),b:parseInt(E.slice(5,7),16),a:100}}function o_(E){if("#"===E[0]&&4===E.length)return{r:parseInt(E[1]+E[1],16),g:parseInt(E[2]+E[2],16),b:parseInt(E[3]+E[3],16),a:100}}function oC(E){var I=E.match(/hsl\(([^)]+)\)/);if(I){var P=I[1].split(/ *, */),_=ok(parseInt(P[0],10),parseInt(P[1],10),parseInt(P[2],10));return(0,ov.Z)({},_,{a:100})}}function oB(E){var I=E.match(/hsla\(([^)]+)\)/);if(I){var P=I[1].split(/ *, */),_=parseInt(P[0],10),T=parseInt(P[1],10),L=parseInt(P[2],10),N=parseInt(100*parseFloat(P[3]),10),F=ok(_,T,L);return(0,ov.Z)({},F,{a:N})}}function oT(E){let I=oA(E);return[I.r,I.g,I.b,Math.round(255*I.a/100)]}function oR(E,I,P){return(P<0&&(P+=1),P>1&&(P-=1),P<1/6)?E+(I-E)*6*P:P<.5?I:P<2/3?E+(I-E)*(2/3-P)*6:E}function oU(E,I,P){let _,T,L,N,F,O;return P/=100,0==(I/=100)?N=F=O=255*P:(T=P<=.5?P*(I+1):P+I-P*I,N=oR(_=2*P-T,T,(L=E/360)+1/3),F=oR(_,T,L),O=oR(_,T,L-1/3)),{r:N,g:F,b:O}}function oL(E){let I=Array(E),P=0;for(let _=0;_<360;_+=360/E){let E=oU(_,100,30+ ++P%4*15);I[P-1]=[Math.round(255*E.r),Math.round(255*E.g),Math.round(255*E.b)]}return I}function oN(){return[Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random())]}function oF(E){let{color:I,colors:P,randomColors:_,numberColors:T=50}=E;if(I&&!Array.isArray(I)&&(I=oT(I)),I)return[I];if(P)return P.map(function(E){return Array.isArray(E)?E:oT(E)});if(_){P=Array(T);for(let E=0;E<T;E++)P[E]=oN()}return oL(T)}function oO(E,I,P={}){let{color:_="blue",colors:T,font:L="12px Helvetica",rotate:N=0}=P;if(this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:ee}),!Array.isArray(E))throw Error("paintLabels: labels must be an array");if(!Array.isArray(I))throw Error("paintLabels: positions must be an array");if(_&&!Array.isArray(_)&&(_=oT(_)),T=T?T.map(function(E){return Array.isArray(E)?E:oT(E)}):[_],E.length!==I.length)throw Error("paintLabels: positions and labels must be arrays from the same size");Array.isArray(L)||(L=[L]),Array.isArray(N)||(N=[N]);let F=this.getCanvas().getContext("2d");for(let P=0;P<E.length;P++){F.save();let _=T[P%T.length];F.fillStyle=`rgba(${_[0]},${_[1]},${_[2]},${_[3]/this.maxValue})`,F.font=L[P%L.length];let O=I[P];F.translate(O[0],O[1]),F.rotate(N[P%N.length]/180*Math.PI),F.fillText(E[P],0,0),F.restore()}return this.data=Uint8Array.from(F.getImageData(0,0,this.width,this.height).data),this}function oY(E,I={}){let{alpha:P=255,labels:_=[],labelsPosition:T=[],labelColor:L="blue",labelFont:N="12px Helvetica"}=I;this.checkProcessable("paintMasks",{channels:[3,4],bitDepth:[8,16],colorModel:ee});let F=oF(Object.assign({},I,{numberColors:E.length}));Array.isArray(E)||(E=[E]);for(let I=0;I<E.length;I++){let _=E[I],T=F[I%F.length];for(let E=0;E<_.width;E++)for(let I=0;I<_.height;I++)if(_.getBitXY(E,I))for(let L=0;L<Math.min(this.components,T.length);L++)if(255===P)this.setValueXY(E+_.position[0],I+_.position[1],L,T[L]);else{let N=this.getValueXY(E+_.position[0],I+_.position[1],L);N=Math.round((N*(255-P)+T[L]*P)/255),this.setValueXY(E+_.position[0],I+_.position[1],L,N)}}if(Array.isArray(_)&&_.length>0){let I=this.getCanvas().getContext("2d");I.fillStyle=L,I.font=N;for(let P=0;P<Math.min(E.length,_.length);P++){let L=T[P]?T[P]:E[P].position;I.fillText(_[P],L[0],L[1])}this.data=Uint8Array.from(I.getImageData(0,0,this.width,this.height).data)}return this}var oV=P(3114);function oX(E,I={}){let{shape:P}=I;this.checkProcessable("paintPoints",{bitDepth:[8,16]});let _=oF(Object.assign({},I,{numberColors:E.length})),T=new oV.Z(P).getPoints(),L=Math.min(this.channels,_[0].length);for(let I=0;I<E.length;I++){let P=_[I%_.length],N=E[I][0],F=E[I][1];for(let E=0;E<T.length;E++){let I=T[E][0],_=T[E][1];if(N+I>=0&&F+_>=0&&N+I<this.width&&F+_<this.height){let E=(N+I+(F+_)*this.width)*this.channels;for(let I=0;I<L;I++)this.data[E+I]=P[I]}}}return this}function oz(E,I={}){let{color:P=[this.maxValue,0,0],closed:_=!1}=I;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]});let T=Math.min(this.channels,P.length);for(let I=0;I<E.length-1+_;I++){let _=E[I],L=E[(I+1)%E.length],N=L[0]-_[0],F=L[1]-_[1],O=Math.max(Math.abs(N),Math.abs(F)),$=N/O,Z=F/O,W=_[0],J=_[1];for(let E=0;E<=O;E++){let E=Math.round(W),I=Math.round(J);if(E>=0&&I>=0&&E<this.width&&I<this.height){if(1===this.bitDepth)this.setBitXY(E,I);else{let _=(E+I*this.width)*this.channels;for(let E=0;E<T;E++)this.data[_+E]=P[E]}}W+=$,J+=Z}}return this}function oG(E,I={}){let P=Object.assign({},I);this.checkProcessable("paintPolylines",{bitDepth:[8,16]});let _=oF(Object.assign({},I,{numberColors:E.length}));for(let I=0;I<E.length;I++)P.color=_[I%_.length],this.paintPolyline(E[I],P);return this}function oj(E,I={}){let{color:P=[this.maxValue,0,0],filled:_=!1}=I;this.checkProcessable("paintPoints",{bitDepth:[1,8,16]}),I.closed=!0;let T=o$(E);if(!1===_)return this.paintPolyline(E,I);{let _=Array(this.height);for(let E=0;E<this.height;E++){_[E]=[];for(let I=0;I<this.width;I++)_[E].push(0)}for(let E=0;E<T.length;E++){let I=oq(T[E],T[(E+1)%T.length]);for(let E=0;E<this.height;E++)for(let P=0;P<this.width;P++)oH(P,E,I,this.height)&&(_[E][P]=0===_[E][P]?1:0)}for(let E=0;E<this.height;E++)for(let I=0;I<this.width;I++)if(1===_[E][I]){if(1===this.bitDepth)this.setBitXY(I,E);else{let _=Math.min(this.channels,P.length),T=(I+E*this.width)*this.channels;for(let E=0;E<_;E++)this.data[T+E]=P[E]}}return this.paintPolyline(E,I)}}function o$(E){let I=[];for(let P=0;P<E.length;P++)if(E[P][0]!==E[(P+1)%E.length][0]||E[P][1]!==E[(P+1)%E.length][1]){if(E[P][0]===E[(P-1+E.length)%E.length][0]&&E[P][1]===E[(P-1+E.length)%E.length][1])continue;if(E[(P+1)%E.length][0]===E[(P-1+E.length)%E.length][0]&&E[(P-1+E.length)%E.length][1]===E[(P+1)%E.length][1])continue;I.push(E[P])}return I}function oq(E,I){if(E[0]===I[0])return{a:0,b:E[0],vertical:!0};{let P=(I[1]-E[1])/(I[0]-E[0]),_=E[1]-P*E[0];return{a:P,b:_,vertical:!1}}}function oH(E,I,P,_){if(!0===P.vertical)return P.b<=E;if(0===P.a)return!1;{let T=(I-P.b)/P.a;return T<E&&T>=0&&T<=_}}function oZ(E,I={}){let P=Object.assign({},I);this.checkProcessable("paintPolygons",{bitDepth:[8,16]});let _=oF(Object.assign({},I,{numberColors:E.length}));for(let I=0;I<E.length;I++)P.color=_[I%_.length],this.paintPolygon(E[I],P);return this}function oW(E={}){let{maxSlots:I=256,channel:P,useAlpha:_=!0}=E;if(this.checkProcessable("getHistogram",{bitDepth:[1,8,16]}),void 0===P){if(this.components>1)throw RangeError("You need to define the channel for an image that contains more than one channel");P=0}return oJ.call(this,P,{useAlpha:_,maxSlots:I})}function oK(E={}){let{maxSlots:I=256,useAlpha:P=!0}=E;this.checkProcessable("getHistograms",{bitDepth:[8,16]});let _=Array(P?this.components:this.channels);for(let E=0;E<_.length;E++)_[E]=oJ.call(this,E,{useAlpha:P,maxSlots:I});return _}function oJ(E,I){let{useAlpha:P,maxSlots:_}=I;if(1===this.bitDepth){let E=[0,0];for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++){let _=this.getBitXY(I,P);0===_?E[0]+=1:1===_&&(E[1]+=1)}return E}let T=Math.log2(_);if(!r4()(T))throw RangeError("maxSlots must be a power of 2, for example: 64, 256, 1024");let L=0;this.bitDepth>T&&(L=this.bitDepth-T);let N=this.data,F=iy()(Math.pow(2,Math.min(this.bitDepth,T)),0);if(P&&this.alpha){let I=this.channels-E-1;for(let P=E;P<N.length;P+=this.channels)F[N[P]>>L]+=N[P+I]/this.maxValue}else for(let I=E;I<N.length;I+=this.channels)F[N[I]>>L]++;return F}function oQ(E={}){let{useAlpha:I=!0,nbSlots:P=512}=E;this.checkProcessable("getColorHistogram",{bitDepth:[8,16],components:[3]});let _=Math.log(P)/Math.log(8);if(_!==Math.floor(_))throw RangeError("nbSlots must be a power of 8. Usually 8, 64, 512 or 4096");let T=this.bitDepth-_,L=this.data,N=iy()(Math.pow(8,_),0),F=Math.pow(2,2*_),O=Math.pow(2,_);for(let E=0;E<L.length;E+=this.channels){let P=(L[E]>>T)*F+(L[E+1]>>T)*O+(L[E+2]>>T);I&&this.alpha?N[P]+=L[E+this.channels-1]/this.maxValue:N[P]++}return N}function o6(){this.checkProcessable("min",{bitDepth:[8,16,32]});let E=iy()(this.channels,Infinity);for(let I=0;I<this.data.length;I+=this.channels)for(let P=0;P<this.channels;P++)this.data[I+P]<E[P]&&(E[P]=this.data[I+P]);return E}function o8(){this.checkProcessable("max",{bitDepth:[8,16,32]});let E=iy()(this.channels,-1/0);for(let I=0;I<this.data.length;I+=this.channels)for(let P=0;P<this.channels;P++)this.data[I+P]>E[P]&&(E[P]=this.data[I+P]);return E}function o7(){this.checkProcessable("sum",{bitDepth:[8,16]});let E=iy()(this.channels,0);for(let I=0;I<this.data.length;I+=this.channels)for(let P=0;P<this.channels;P++)E[P]+=this.data[I+P];return E}function o9(E=0,I=0){this.checkProcessable("getMoment",{bitDepth:[1]});let P=0;for(let _=0;_<this.width;_++)for(let T=0;T<this.height;T++)1===this.getBitXY(_,T)&&(P+=_**E*T**I);return P}function st(E={}){let{mask:I,region:P=3,removeClosePoints:_=0,invert:T=!1,maxEquals:L=2}=E,N=this;this.checkProcessable("localMaxima",{bitDepth:[8,16],components:1});let F=T?0:1,O=[1,0,-1,0,1,1,-1,-1,2,0,-2,0,2,2,-2,-2],$=[0,1,0,-1,1,-1,1,-1,0,2,0,-2,2,-2,2,-2],Z=(P*=4)<=8?1:2,W=[];for(let E=Z;E<N.height-Z;E++)for(let _=Z;_<N.width-Z;_++){if(I&&I.getBitXY(_,E)!==F)continue;let Z=0,J=0,Q=N.data[_+E*N.width];for(let I=0;I<P;I++)T?N.data[_+O[I]+(E+$[I])*N.width]>Q&&Z++:N.data[_+O[I]+(E+$[I])*N.width]<Q&&Z++,N.data[_+O[I]+(E+$[I])*N.width]===Q&&J++;Z+J===P&&J<=L&&W.push([_,E])}if(_>0)for(let E=0;E<W.length;E++)for(let I=E+1;I<W.length;I++)Math.sqrt(Math.pow(W[E][0]-W[I][0],2)+Math.pow(W[E][1]-W[I][1],2))<_&&(W[E][0]=W[E][0]+W[I][0]>>1,W[E][1]=W[E][1]+W[I][1]>>1,W.splice(I,1),I--);return W}var se=P(5890);function sr(){let E=this.getHistograms({maxSlots:this.maxValue+1}),I=Array(E.length);for(let P=0;P<E.length;P++){let _=E[P];I[P]=(0,se.J)(_)}return I}function so(){let E=this.getHistograms({maxSlots:this.maxValue+1}),I=Array(E.length);for(let P=0;P<E.length;P++){let _=E[P];I[P]=(0,se.C)(_)}return I}function ss(){this.checkProcessable("points",{bitDepth:[1]});let E=[];for(let I=0;I<this.width;I++)for(let P=0;P<this.height;P++)1===this.getBitXY(I,P)&&E.push([I,P]);return E}function sh(){this.checkProcessable("extendedPoints",{bitDepth:[1]});let E=[];for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++)if(1===this.getBitXY(P,I))for(E.push([P,I]),1!==this.getBitXY(P+1,I)?(E.push([P+1,I]),E.push([P+1,I+1]),1!==this.getBitXY(P,I+1)&&E.push([P,I+1])):1!==this.getBitXY(P,I+1)&&(E.push([P,I+1]),E.push([P+1,I+1]));P<this.width-2&&1===this.getBitXY(P+1,I)&&1===this.getBitXY(P+2,I);)P++;return E}function sl(E,I={}){if(this===E)return[0,0];let P=[0,0],_=this;for(;_;){if(_===E)return P;_.position&&(P[0]+=_.position[0],P[1]+=_.position[1]),_=_.parent}return!!I.defaultFurther&&P}function su(E={}){let{alpha:I=1}=E;this.checkProcessable("countAlphaPixels",{bitDepth:[8,16],alpha:1});let P=0;if(void 0===I)return this.size;for(let E=this.components;E<this.data.length;E+=this.channels)this.data[E]===I&&P++;return P}function sc(E,I={}){let{sorted:P}=I;P||(E=E.slice().sort(sm));let _=E.length,T=Array(2*_),L=0;for(let I=0;I<_;I++){let P=E[I];for(;L>=2&&0>=sd(T[L-2],T[L-1],P);)L--;T[L++]=P}let N=L+1;for(let I=_-2;I>=0;I--){let P=E[I];for(;L>=N&&0>=sd(T[L-2],T[L-1],P);)L--;T[L++]=P}return T.slice(0,L-1)}function sd(E,I,P){return(I[1]-E[1])*(P[0]-E[0])-(I[0]-E[0])*(P[1]-E[1])}function sm(E,I){return E[0]===I[0]?E[1]-I[1]:E[0]-I[0]}function sg(){return sc(this.extendedPoints,{sorted:!1})}function sw(E){for(let I=0;I<E.length;I++)E[I][0]=Math.round(E[I][0]),E[I][1]=Math.round(E[I][1]);return E}function sb(E,I){return[E[0]-I[0],E[1]-I[1]]}function sy(E){let I=Math.sqrt(E[0]**2+E[1]**2);return[E[0]/I,E[1]/I]}function sv(E,I,P){void 0===P&&(P=Array(I.length));let _=Math.cos(E),T=Math.sin(E);for(let E=0;E<P.length;++E)P[E]=[_*I[E][0]-T*I[E][1],T*I[E][0]+_*I[E][1]];return P}function sx(E){let I=0;for(let P=0;P<E.length;P++){let _=E[P][0],T=E[P][1];I+=Math.sqrt((E[P===E.length-1?0:P+1][0]-_)**2+(E[P===E.length-1?0:P+1][1]-T)**2)}return I}function sM(E){let I=0;for(let P=0;P<E.length;P++){let _=E[P][0],T=E[P===E.length-1?0:P+1][1],L=E[P===E.length-1?0:P+1][0],N=E[P][1];I+=_*T*.5,I-=L*N*.5}return Math.abs(I)}function sE(E){let I=Infinity,P=Infinity,_=-1/0,T=-1/0;for(let L=0;L<E.length;L++)E[L][0]<I&&(I=E[L][0]),E[L][0]>_&&(_=E[L][0]),E[L][1]<P&&(P=E[L][1]),E[L][1]>T&&(T=E[L][1]);return[[I,P],[_,T]]}function sA(E,I){void 0===I&&(I=Array(E.length).fill(0).map(()=>[]));let P=sE(E),_=P[0][0],T=P[0][1];for(let P=0;P<E.length;P++)I[P][0]=E[P][0]-_,I[P][1]=E[P][1]-T;return I}function sS(E={}){let I;let{originalPoints:P=sg.call(this)}=E;if(0===P.length)return[];if(1===P.length)return[P[0],P[0],P[0],P[0]];let _=Array(P.length),T=Infinity,L=0;for(let E=0;E<_.length;E++){let N=sI(P[E],P[(E+1)%_.length]);sv(-N,P,_);let F=_[E][0],O=_[E][1],$=_[(E+1)%_.length][0],Z=_[(E+1)%_.length][1],W=!0,J=0,Q=0,te=0;for(let E=0;E<_.length;E++){let I=_[E][0],P=_[E][1],T=(I-F)/($-F);!0===W?(W=!1,J=T,Q=T):(T<J&&(J=T),T>Q&&(Q=T));let L=(-($-F)*P+$*O-Z*F)/($-F);Math.abs(L)>Math.abs(te)&&(te=L)}let ti=[F+J*($-F),O],tn=[F+Q*($-F),O],ta=Math.abs(te*(J-Q)*($-F));ta<T&&(L=N,T=ta,I=[ti,tn,[tn[0],tn[1]-te],[ti[0],ti[1]-te]])}return sv(L,I,I),I}function sI(E,I){let P=sy(sb(I,E)),_=Math.acos(P[0]);return P[1]<0?-_:_}function sP(E){let I={inPlace:!0};E.extendMethod("invert",rL),E.extendMethod("abs",rT),E.extendMethod("level",iv,I),E.extendMethod("add",iS,I),E.extendMethod("subtract",iI,I),E.extendMethod("subtractImage",iP),E.extendMethod("multiply",i_,I),E.extendMethod("divide",iC,I),E.extendMethod("hypotenuse",iD),E.extendMethod("background",iY),E.extendMethod("flipX",rO),E.extendMethod("flipY",rY),E.extendMethod("blurFilter",rV),E.extendMethod("medianFilter",rH),E.extendMethod("gaussianFilter",rZ),E.extendMethod("sobelFilter",ig),E.extendMethod("gradientFilter",iu),E.extendMethod("scharrFilter",iw),E.extendMethod("dilate",iV),E.extendMethod("erode",i$),E.extendMethod("open",iK),E.extendMethod("close",iJ),E.extendMethod("topHat",iQ),E.extendMethod("blackHat",i0),E.extendMethod("morphologicalGradient",i1),E.extendMethod("warpingFourPoints",i7),E.extendMethod("crop",i9),E.extendMethod("cropAlpha",ns),E.extendMethod("resize",nE).extendMethod("scale",nE),E.extendMethod("hsv",nA),E.extendMethod("hsl",nS),E.extendMethod("cmyk",nI),E.extendMethod("rgba8",nP),E.extendMethod("grey",n_).extendMethod("gray",n_),E.extendMethod("mask",nR),E.extendMethod("pad",nL),E.extendMethod("colorDepth",nN),E.extendMethod("setBorder",nH,I),E.extendMethod("rotate",nz),E.extendMethod("rotateLeft",nG),E.extendMethod("rotateRight",nj),E.extendMethod("insert",nq),E.extendMethod("getRow",n7),E.extendMethod("getColumn",n9),E.extendMethod("getMatrix",ot),E.extendMethod("setMatrix",oe),E.extendMethod("getPixelsArray",or),E.extendMethod("getIntersection",oi),E.extendMethod("getClosestCommonParent",os),E.extendMethod("getThreshold",nB),E.extendMethod("split",nZ),E.extendMethod("getChannel",nW),E.extendMethod("combineChannels",nK),E.extendMethod("setChannel",nQ),E.extendMethod("getSimilarity",n0),E.extendMethod("getPixelsGrid",n1),E.extendMethod("getBestMatch",n6),E.extendMethod("cannyEdge",om),E.extendMethod("convolution",il),E.extendMethod("extract",op),E.extendMethod("floodFill",ob),E.extendMethod("paintLabels",oO,I),E.extendMethod("paintMasks",oY,I),E.extendMethod("paintPoints",oX,I),E.extendMethod("paintPolyline",oz,I),E.extendMethod("paintPolylines",oG,I),E.extendMethod("paintPolygon",oj,I),E.extendMethod("paintPolygons",oZ,I),E.extendMethod("countAlphaPixels",su),E.extendMethod("monotoneChainConvexHull",sg),E.extendMethod("minimalBoundingRectangle",sS),E.extendMethod("getHistogram",oW).extendProperty("histogram",oW),E.extendMethod("getHistograms",oK).extendProperty("histograms",oK),E.extendMethod("getColorHistogram",oQ).extendProperty("colorHistogram",oQ),E.extendMethod("getMin",o6).extendProperty("min",o6),E.extendMethod("getMax",o8).extendProperty("max",o8),E.extendMethod("getSum",o7).extendProperty("sum",o7),E.extendMethod("getMoment",o9).extendProperty("moment",o9),E.extendMethod("getLocalMaxima",st),E.extendMethod("getMedian",so).extendProperty("median",so),E.extendMethod("getMean",sr).extendProperty("mean",sr),E.extendMethod("getPoints",ss).extendProperty("points",ss),E.extendMethod("getExtendedPoints",sh).extendProperty("extendedPoints",sh),E.extendMethod("getRelativePosition",sl)}var sD=P(2229),s_=P.n(sD);function sC(E,I=""){for(let P of I.split(".")){if(void 0===E[P])return;E=E[P]}return E}var sB=P(4707),sT=P.n(sB);function sR(E={}){let{originalPoints:I=sg.call(this)}=E;if(0===I.length)return{min:0,max:0,minLine:[],maxLine:[],aspectRatio:1};if(1===I.length)return{min:1,max:1,minLine:[I[0],I[0]],maxLine:[I[0],I[0]],aspectRatio:1};let P=Array(I.length),_=Infinity,T=0,L=[];for(let E=0;E<I.length;E++){let N=sU(I[E],I[(E+1)%I.length]);sv(-N,I,P);let F=0,O=[];for(let _=0;_<I.length;_++){let I=Math.abs(P[E][1]-P[_][1]);I>F&&(F=I,(O=[]).push([P[_][0],P[E][1]],[P[_][0],P[_][1]]))}F<_&&(_=F,T=N,L=O)}sv(T,L,L);let N=0,F=[],O=0;for(let E=0;E<I.length-1;E++)for(let P=E+1;P<I.length;P++){let _=(I[E][0]-I[P][0])**2+(I[E][1]-I[P][1])**2;_>O&&(O=_,N=Math.sqrt(_),F=[I[E],I[P]])}return{min:_,minLine:L,max:N,maxLine:F,aspectRatio:_/N}}function sU(E,I){let P=sy(sb(I,E)),_=Math.acos(P[0]);return P[1]<0?-_:_}class sL{constructor(E,I){this.map=E,this.id=I,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY,this.meanX=0,this.meanY=0,this.surface=0,this.computed={}}getMask(E={}){let I;let{scale:P=1,kind:_=""}=E;switch(_){case"contour":I=this.contourMask;break;case"box":I=this.boxMask;break;case"filled":I=this.filledMask;break;case"center":I=this.centerMask;break;case"mbr":I=this.mbrFilledMask;break;case"hull":I=this.convexHullFilledMask;break;case"hullContour":I=this.convexHullMask;break;case"mbrContour":I=this.mbrMask;break;case"feret":I=this.feretMask;break;default:I=this.mask}return P<1&&((I=I.resize({factor:P})).parent=this.mask.parent,I.position[0]+=this.minX,I.position[1]+=this.minY),I}get mean(){throw Error("Roi mean not implemented yet")}get center(){return this.computed.center||(this.computed.center=[this.width/2>>0,this.height/2>>0]),this.computed.center}get ratio(){return this.width/this.height}get width(){return this.maxX-this.minX+1}get height(){return this.maxY-this.minY+1}_computExternalIDs(){let E=this.borderIDs,I=this.borderLengths;this.computed.externalIDs=[],this.computed.externalLengths=[];let P=this.internalIDs;for(let _=0;_<E.length;_++)P.includes(E[_])||(this.computed.externalIDs.push(E[_]),this.computed.externalLengths.push(I[_]))}get externalIDs(){return this.computed.externalIDs||this._computExternalIDs(),this.computed.externalIDs}get externalLengths(){return this.computed.externalLengths||this._computExternalIDs(),this.computed.externalLengths}_computeBorderIDs(){let E=sN(this);this.computed.borderIDs=E.ids,this.computed.borderLengths=E.lengths}get borderIDs(){return this.computed.borderIDs||this._computeBorderIDs(),this.computed.borderIDs}get borderLengths(){return this.computed.borderLengths||this._computeBorderIDs(),this.computed.borderLengths}get boxIDs(){return this.computed.boxIDs||(this.computed.boxIDs=sF(this)),this.computed.boxIDs}get internalIDs(){return this.computed.internalIDs||(this.computed.internalIDs=sG(this)),this.computed.internalIDs}get box(){return this.computed.box||(this.computed.box=sO(this)),this.computed.box}get external(){return this.computed.external||(this.computed.external=sX(this)),this.computed.external}get holesInfo(){return this.computed.holesInfo||(this.computed.holesInfo=sz(this)),this.computed.holesInfo}get border(){return this.computed.border||(this.computed.border=sY(this)),this.computed.border}get contourMask(){if(!this.computed.contourMask){let E=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});for(let I=0;I<this.width;I++)for(let P=0;P<this.height;P++)this.map.data[I+this.minX+(P+this.minY)*this.map.width]===this.id&&(I>0&&I<this.width-1&&P>0&&P<this.height-1?(this.map.data[I-1+this.minX+(P+this.minY)*this.map.width]!==this.id||this.map.data[I+1+this.minX+(P+this.minY)*this.map.width]!==this.id||this.map.data[I+this.minX+(P-1+this.minY)*this.map.width]!==this.id||this.map.data[I+this.minX+(P+1+this.minY)*this.map.width]!==this.id)&&E.setBitXY(I,P):E.setBitXY(I,P));this.computed.contourMask=E}return this.computed.contourMask}get boxMask(){if(!this.computed.boxMask){let E=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});for(let I=0;I<this.width;I++)E.setBitXY(I,0),E.setBitXY(I,this.height-1);for(let I=0;I<this.height;I++)E.setBitXY(0,I),E.setBitXY(this.width-1,I);this.computed.boxMask=E}return this.computed.boxMask}get mask(){if(!this.computed.mask){let E=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});for(let I=0;I<this.width;I++)for(let P=0;P<this.height;P++)this.map.data[I+this.minX+(P+this.minY)*this.map.width]===this.id&&E.setBitXY(I,P);this.computed.mask=E}return this.computed.mask}get filledMask(){if(!this.computed.filledMask){let E=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});for(let I=0;I<this.width;I++)for(let P=0;P<this.height;P++){let _=I+this.minX+(P+this.minY)*this.map.width;this.internalIDs.includes(this.map.data[_])&&E.setBitXY(I,P)}this.computed.filledMask=E}return this.computed.filledMask}get centerMask(){if(!this.computed.centerMask){let E=new oV.Z({kind:"smallCross"}).getMask();E.parent=this.map.parent,E.position=[this.minX+this.center[0]-1,this.minY+this.center[1]-1],this.computed.centerMask=E}return this.computed.centerMask}get convexHull(){if(!this.computed.convexHull){let E=[];for(let I=0;I<this.width;I++)for(let P=0;P<this.height;P++)this.map.data[I+this.minX+(P+this.minY)*this.map.width]===this.id&&(I>0&&I<this.width-1&&P>0&&P<this.height-1?(this.map.data[I-1+this.minX+(P+this.minY)*this.map.width]!==this.id||this.map.data[I+1+this.minX+(P+this.minY)*this.map.width]!==this.id||this.map.data[I+this.minX+(P-1+this.minY)*this.map.width]!==this.id||this.map.data[I+this.minX+(P+1+this.minY)*this.map.width]!==this.id)&&(E.push([I,P]),E.push([I+1,P]),E.push([I,P+1]),E.push([I+1,P+1])):(E.push([I,P]),E.push([I+1,P]),E.push([I,P+1]),E.push([I+1,P+1])));let I=sc(E);this.computed.convexHull={polyline:I,surface:sM(I),perimeter:sx(I)}}return this.computed.convexHull}get convexHullMask(){if(!this.computed.convexHullMask){let E=this.convexHull,I=new ah(this.width+1,this.height+1,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});I.paintPolyline(E.polyline,{closed:!0}),this.computed.convexHullMask=I}return this.computed.convexHullMask}get convexHullFilledMask(){if(!this.computed.convexHullFilledMask){let E=this.convexHull,I=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});for(let P=0;P<this.width;P++)for(let _=0;_<this.height;_++)1!==sT()(E.polyline,[P,_])&&I.setBitXY(P,_);this.computed.convexHullFilledMask=I}return this.computed.convexHullFilledMask}get mbr(){if(!this.computed.mbr){let E=sS({originalPoints:this.convexHull.polyline});if(0===E.length)this.computed.mbr={width:0,height:0,surface:0,perimeter:0,rectangle:E};else{let I=E[0],P=E[1],_=E[2],T=Math.sqrt((I[0]-P[0])**2+(I[1]-P[1])**2),L=Math.sqrt((_[0]-P[0])**2+(_[1]-P[1])**2);this.computed.mbr={width:T,height:L,elongation:1-T/L,aspectRatio:T/L,surface:T*L,perimeter:(T+L)*2,rectangle:E}}}return this.computed.mbr}get fillRatio(){return this.surface/(this.surface+this.holesInfo.surface)}get feretDiameters(){return this.computed.feretDiameters||(this.computed.feretDiameters=sR({originalPoints:this.convexHull.polyline})),this.computed.feretDiameters}get eqpc(){return this.computed.eqpc||(this.computed.eqpc=2*Math.sqrt(this.surface/Math.PI)),this.computed.eqpc}get perimeterInfo(){return this.computed.perimeterInfo||(this.computed.perimeterInfo=sV(this)),this.computed.perimeterInfo}get perimeter(){let E=this.perimeterInfo,I=2-Math.sqrt(2);return E.one+2*E.two+3*E.three+4*E.four-I*(E.two+2*E.three+E.four)}get ped(){return this.computed.ped||(this.computed.ped=this.perimeter/Math.PI),this.computed.ped}get feretMask(){if(!this.computed.feretMask){let E=new ah(this.width+1,this.height+1,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent});E.paintPolyline(this.feretDiameters.minLine),E.paintPolyline(this.feretDiameters.maxLine),this.computed.feretMask=E}return this.computed.feretMask}get mbrMask(){if(!this.computed.mbrMask){let E=sw(this.mbr.rectangle);if(E.length>0){let I=sE(E),P=new ah(I[1][0]-I[0][0]+1,I[1][1]-I[0][1]+1,{kind:eg.$h,position:[this.minX+I[0][0],this.minY+I[0][1]],parent:this.map.parent});E=sA(E),P.paintPolyline(E,{closed:!0}),this.computed.mbrMask=P}else this.computed.mbrMask=new ah(1,1,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent})}return this.computed.mbrMask}get mbrFilledMask(){if(!this.computed.mbrFilledMask){let E=new ah(this.width,this.height,{kind:eg.$h,position:[this.minX,this.minY],parent:this.map.parent}),I=this.mask.minimalBoundingRectangle();for(let P=0;P<this.width;P++)for(let _=0;_<this.height;_++)1!==sT()(I,[P,_])&&E.setBitXY(P,_);this.computed.mbrFilledMask=E}return this.computed.mbrFilledMask}get points(){if(!this.computed.points){let E=[];for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++){let _=(I+this.minY)*this.map.width+P+this.minX;this.map.data[_]===this.id&&E.push([P,I])}this.computed.points=E}return this.computed.points}get maxLengthPoints(){if(!this.computed.maxLengthPoints){let E,I=0,P=this.points;for(let _=0;_<P.length;_++)for(let T=_+1;T<P.length;T++){let L=Math.pow(P[_][0]-P[T][0],2)+Math.pow(P[_][1]-P[T][1],2);L>=I&&(I=L,E=[P[_],P[T]])}this.computed.maxLengthPoints=E}return this.computed.maxLengthPoints}get maxLength(){if(!this.computed.maxLength){let E=Math.sqrt(Math.pow(this.maxLengthPoints[0][0]-this.maxLengthPoints[1][0],2)+Math.pow(this.maxLengthPoints[0][1]-this.maxLengthPoints[1][1],2));this.computed.maxLength=E}return this.computed.maxLength}get roundness(){return 4*this.surface/(Math.PI*this.feretDiameters.max**2)}get sphericity(){return 2*Math.sqrt(this.surface*Math.PI)/this.perimeter}get solidity(){return this.surface/this.convexHull.surface}get angle(){if(!this.computed.angle){let E=this.maxLengthPoints,I=-(180*Math.atan2(E[0][1]-E[1][1],E[0][0]-E[1][0]))/Math.PI;this.computed.angle=I}return this.computed.angle}toJSON(){return{id:this.id,minX:this.minX,maxX:this.maxX,minY:this.minY,maxY:this.maxY,meanX:this.meanX,meanY:this.meanY,height:this.height,width:this.width,surface:this.surface,mbrWidth:this.mbr.width,mbrHeight:this.mbr.height,mbrSurface:this.mbr.surface,eqpc:this.eqpc,ped:this.ped,feretDiameterMin:this.feretDiameters.min,feretDiameterMax:this.feretDiameters.max,aspectRatio:this.feretDiameters.aspectRatio,fillRatio:this.fillRatio,sphericity:this.sphericity,roundness:this.roundness,solidity:this.solidity,perimeter:this.perimeter}}}function sN(E){let I=E.map,P=I.data,_=new Set,T=new Map,L=new Set,N=[1,0,-1,0],F=[0,1,0,-1];for(let O=E.minX;O<=E.maxX;O++)for(let $=E.minY;$<=E.maxY;$++)if(P[O+$*I.width]===E.id)for(let Z=0;Z<4;Z++){let W=O+N[Z],J=$+F[Z];if(W>=0&&J>=0&&W<I.width&&J<I.height){let N=W+J*I.width;if(P[N]!==E.id&&!L.has(N)){L.add(N),_.add(P[N]);let E=T.get(P[N]);E?T.set(P[N],++E):T.set(P[N],1)}}}let O=Array.from(_),$=O.map(function(E){return T.get(E)});return{ids:O,lengths:$}}function sF(E){let I=new Set,P=E.map,_=P.data;for(let T of[0,E.height-1])for(let L=0;L<E.width;L++){let N=(T+E.minY)*P.width+L+E.minX;if(L-E.minX>0&&_[N]===E.id&&_[N-1]!==E.id){let E=_[N-1];I.add(E)}if(P.width-L-E.minX>1&&_[N]===E.id&&_[N+1]!==E.id){let E=_[N+1];I.add(E)}}for(let T of[0,E.width-1])for(let L=0;L<E.height;L++){let N=(L+E.minY)*P.width+T+E.minX;if(L-E.minY>0&&_[N]===E.id&&_[N-P.width]!==E.id){let E=_[N-P.width];I.add(E)}if(P.height-L-E.minY>1&&_[N]===E.id&&_[N+P.width]!==E.id){let E=_[N+P.width];I.add(E)}}return Array.from(I)}function sO(E){let I=0,P=E.map,_=P.data,T=[0];for(let L of(E.height>1&&(T[1]=E.height-1),T))for(let T=1;T<E.width-1;T++)_[(L+E.minY)*P.width+T+E.minX]===E.id&&I++;let L=[0];for(let T of(E.width>1&&(L[1]=E.width-1),L))for(let L=0;L<E.height;L++)_[(L+E.minY)*P.width+T+E.minX]===E.id&&I++;return I}function sY(E){let I=0,P=E.map,_=P.data;for(let T=1;T<E.width-1;T++)for(let L=1;L<E.height-1;L++){let N=(L+E.minY)*P.width+T+E.minX;_[N]===E.id&&(_[N-1]!==E.id||_[N+1]!==E.id||_[N-P.width]!==E.id||_[N+P.width]!==E.id)&&I++}return I+E.box}function sV(E){let I=E.map,P=I.data,_=0,T=0,L=0,N=0;for(let F=0;F<E.width;F++)for(let O=0;O<E.height;O++){let $=(O+E.minY)*I.width+F+E.minX;if(P[$]===E.id){let Z=0;switch(0===F?Z++:E.externalIDs.includes(P[$-1])&&Z++,F===E.width-1?Z++:E.externalIDs.includes(P[$+1])&&Z++,0===O?Z++:E.externalIDs.includes(P[$-I.width])&&Z++,O===E.height-1?Z++:E.externalIDs.includes(P[$+I.width])&&Z++,Z){case 1:_++;break;case 2:T++;break;case 3:L++;break;case 4:N++}}}return{one:_,two:T,three:L,four:N}}function sX(E){let I=0,P=E.map,_=P.data;for(let T=1;T<E.width-1;T++)for(let L=1;L<E.height-1;L++){let N=(L+E.minY)*P.width+T+E.minX;_[N]===E.id&&(E.externalIDs.includes(_[N-1])||E.externalIDs.includes(_[N+1])||E.externalIDs.includes(_[N-P.width])||E.externalIDs.includes(_[N+P.width]))&&I++}return I+E.box}function sz(E){let I=0,P=E.map.width,_=E.map.data;for(let T=1;T<E.width-1;T++)for(let L=1;L<E.height-1;L++){let N=(L+E.minY)*P+T+E.minX;E.internalIDs.includes(_[N])&&_[N]!==E.id&&I++}return{number:E.internalIDs.length-1,surface:I}}function sG(E){let I=[E.id],P=E.map,_=P.data;if(E.height>2)for(let T=0;T<E.width;T++){let L=E.minY*P.width+T+E.minX;if(I.includes(_[L])){let T=_[L+P.width];I.includes(T)||E.boxIDs.includes(T)||I.push(T)}}let T=[,,,,];for(let L=1;L<E.width-1;L++)for(let N=1;N<E.height-1;N++){let F=(N+E.minY)*P.width+L+E.minX;if(I.includes(_[F])){T[0]=_[F-1],T[1]=_[F+1],T[2]=_[F-P.width],T[3]=_[F+P.width];for(let P=0;P<4;P++){let _=T[P];I.includes(_)||E.boxIDs.includes(_)||I.push(_)}}}return I}class sj{constructor(E,I){this.roiMap=E,this.options=I,this.roi=this.createRoi()}createRoi(){let E=this.roiMap.data,I={};this.roiMap.positive=0,this.roiMap.negative=0;for(let P=0;P<E.length;P++)E[P]&&!I[E[P]]&&(I[E[P]]=!0,E[P]>0?this.roiMap.positive++:this.roiMap.negative++);let P={};for(let E in I)P[E]=new sL(this.roiMap,1*E);let _=this.roiMap.width,T=this.roiMap.height;for(let I=0;I<T;I++)for(let T=0;T<_;T++){let L=I*_+T;if(0!==E[L]){let _=E[L],N=P[_];T<N.minX&&(N.minX=T),T>N.maxX&&(N.maxX=T),I<N.minY&&(N.minY=I),I>N.maxY&&(N.maxY=I),N.meanX+=T,N.meanY+=I,N.surface++}}let L=[];for(let E in I)P[E].meanX/=P[E].surface,P[E].meanY/=P[E].surface,L.push(P[E]);return L}}function s$(E){let I=E.data,P=[1,0,-1,0],_=[0,1,0,-1],T=E.minMax,L=-T.min,N=T.max+L,F=[];for(let E=0;E<=N;E++)F.push(Object.create(null));for(let T=0;T<E.width;T++)for(let N=0;N<E.height;N++){let O=I[T+N*E.width];if(0!==O){let $=Object.create(null),Z=!1;for(let W=0;W<4;W++){let J=T+P[W],Q=N+_[W];if(J>=0&&Q>=0&&J<E.width&&Q<E.height){let P=I[J+Q*E.width];O!==P&&(Z=!0,0!==P&&void 0===$[P]&&($[P]=!0,F[P+L][O]?F[P+L][O]++:F[P+L][O]=1))}else Z=!0}Z&&(F[O+L][O]?F[O+L][O]++:F[O+L][O]=1)}}let O={};for(let E=0;E<F.length;E++)Object.keys(F[E]).length>0&&(O[E-L]=F[E]);return O}function sq(E={}){let{algorithm:I="commonBorderLength",minCommonBorderLength:P=5,maxCommonBorderLength:_=100,minCommonBorderRatio:T=.3,maxCommonBorderRatio:L=1}=E,N=function(E,I,T){return E[T]>=P&&E[T]<=_};"function"==typeof I&&(N=I),"commonborderratio"===I.toLowerCase()&&(N=function(E,I,P){let _=Math.min(E[P]/E[I],1);return _>=T&&_<=L});let F=this,O=F.commonBorderLength,$={},Z={};for(let E of Object.keys(O)){let I=O[E];for(let P of Object.keys(I))if(P!==E&&N(I,E,P)){let I=P;Z[P]&&(I=Z[P]);let _=E;if(Z[E]&&(_=Z[E]),Number(I)!==_){let E=Math.min(I,_),P=Math.max(I,_);if($[E]||($[E]={}),$[E][P]=!0,Z[P]=E,$[P]){for(let I of Object.keys($[P]))$[E][I]=!0,Z[I]=E;delete $[P]}}}}let W=F.minMax,J=-W.min,Q=Array(W.max+J+1).fill(0);for(let E of Object.keys(Z))Q[Number(E)+J]=Z[E];let te=F.data;for(let E=0;E<te.length;E++){let I=te[E];if(0!==I){let P=Q[I+J];0!==P&&(te[E]=P)}}return F.computed={},F}class sH{constructor(E,I){this.parent=E,this.width=E.width,this.height=E.height,this.data=I,this.negative=0,this.positive=0}get total(){return this.negative+this.positive}get minMax(){let E=Number.MAX_SAFE_INTEGER,I=Number.MIN_SAFE_INTEGER;for(let P=0;P<this.data.length;P++)this.data[P]<E&&(E=this.data[P]),this.data[P]>I&&(I=this.data[P]);return{min:E,max:I}}get commonBorderLength(){return s$(this)}mergeRoi(E={}){return sq.call(this,E)}mergeRois(E){let I=E[0],P=E.slice(1);for(let E=0;E<this.data.length;E++)P.includes(this.data[E])&&(this.data[E]=I)}rowsInfo(){let E=Array(this.height),I=0;for(let P=0;P<this.data.length;P+=this.width){let _={row:I,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};E[I++]=_;let T={},L={},N=[],F=this.data[P],O=0;for(let E=P;E<P+this.width;E++){let I=this.data[E];F!==I&&(F=I,N.push(O),O=0),O++,I>0?(_.positivePixel++,T[I]||(T[I]=!0)):I<0?(_.negativePixel++,L[I]||(L[I]=!0)):_.zeroPixel++}N.push(O),_.medianChange=N.sort((E,I)=>E-I)[Math.floor(N.length/2)],_.positiveRoiIDs=Object.keys(T),_.negativeRoiIDs=Object.keys(L),_.positiveRoi=_.positiveRoiIDs.length,_.negativeRoi=_.negativeRoiIDs.length}return E}colsInfo(){let E=Array(this.width),I=0;for(let P=0;P<this.width;P++){let _={col:I,positivePixel:0,negativePixel:0,zeroPixel:0,positiveRoi:0,negativeRoi:0,medianChange:0};E[I++]=_;let T={},L={},N=[],F=this.data[P],O=0;for(let E=P;E<P+this.data.length;E+=this.width){let I=this.data[E];F!==I&&(F=I,N.push(O),O=0),O++,I>0?(_.positivePixel++,T[I]||(T[I]=!0)):I<0?(_.negativePixel++,L[I]||(L[I]=!0)):_.zeroPixel++}N.push(O),_.medianChange=N.sort((E,I)=>E-I)[Math.floor(N.length/2)],_.positiveRoiIDs=Object.keys(T),_.negativeRoiIDs=Object.keys(L),_.positiveRoi=_.positiveRoiIDs.length,_.negativeRoi=_.negativeRoiIDs.length}return E}}function sZ(E,I={}){let{allowCorners:P=!1}=I,_=65535,T=new Int16Array(E.size),L=0,N=0,F=new Uint16Array(_+1),O=new Uint16Array(_+1);for(let I=0;I<E.width;I++)for(let P=0;P<E.height;P++)0===T[P*E.width+I]&&$(I,P);function $(I,$){let Z=0,W=0,J=E.getBitXY(I,$),Q=J?++L:--N;if(L>32767||N<-32768)throw Error("Too many regions of interest");for(F[0]=I,O[0]=$;Z<=W;){let I=F[Z&_],L=O[Z&_];if(T[L*E.width+I]=Q,I>0&&0===T[L*E.width+I-1]&&E.getBitXY(I-1,L)===J&&(F[++W&_]=I-1,O[W&_]=L,T[L*E.width+I-1]=-32768),L>0&&0===T[(L-1)*E.width+I]&&E.getBitXY(I,L-1)===J&&(F[++W&_]=I,O[W&_]=L-1,T[(L-1)*E.width+I]=-32768),I<E.width-1&&0===T[L*E.width+I+1]&&E.getBitXY(I+1,L)===J&&(F[++W&_]=I+1,O[W&_]=L,T[L*E.width+I+1]=-32768),L<E.height-1&&0===T[(L+1)*E.width+I]&&E.getBitXY(I,L+1)===J&&(F[++W&_]=I,O[W&_]=L+1,T[(L+1)*E.width+I]=-32768),P&&(I>0&&L>0&&0===T[(L-1)*E.width+I-1]&&E.getBitXY(I-1,L-1)===J&&(F[++W&_]=I-1,O[W&_]=L-1,T[(L-1)*E.width+I-1]=-32768),I<E.width-1&&L>0&&0===T[(L-1)*E.width+I+1]&&E.getBitXY(I+1,L-1)===J&&(F[++W&_]=I+1,O[W&_]=L-1,T[(L-1)*E.width+I+1]=-32768),I>0&&L<E.height-1&&0===T[(L+1)*E.width+I-1]&&E.getBitXY(I-1,L+1)===J&&(F[++W&_]=I-1,O[W&_]=L+1,T[(L+1)*E.width+I-1]=-32768),I<E.width-1&&L<E.height-1&&0===T[(L+1)*E.width+I+1]&&E.getBitXY(I+1,L+1)===J&&(F[++W&_]=I+1,O[W&_]=L+1,T[(L+1)*E.width+I+1]=-32768)),W-++Z>_)throw Error("analyseMask can not finish, the array to manage internal data is not big enough.You could improve mask by changing MAX_ARRAY")}}return new sH(E,T)}var sW=P(530),sK=P.n(sW);let sJ=[-1,0],sQ=[0,-1],s0=[null,null],s1=[-1,-1,0,1],s3=[0,-1,-1,-1],s5=[null,null,null,null];function s4(E,I={}){let P,_,T;let{allowCorners:L=!1}=I,N=4;if(L&&(N=8),8===N)P=s1,_=s3,T=s5;else if(4===N)P=sJ,_=sQ,T=s0;else throw RangeError(`unsupported neighbours count: ${N}`);let F=E.size,O=E.width,$=E.height,Z=Array(F),W=new Uint32Array(F),J=new(sK()),Q=1;for(let I=0;I<$;I++)for(let L=0;L<O;L++){let N=L+I*O;if(E.getBit(N)){let E=null;for(let N=0;N<T.length;N++){let F=L+P[N],W=I+_[N];if(F>=0&&W>=0&&F<O&&W<$){let I=F+W*O,P=Z[I];P?(T[N]=P,(!E||T[N].value<E.value)&&(E=T[N])):T[N]=null}}if(E){Z[N]=E;for(let I=0;I<T.length;I++)T[I]&&T[I]!==E&&J.union(E,T[I])}else Z[N]=J.add(Q++)}}for(let I=0;I<$;I++)for(let P=0;P<O;P++){let _=P+I*O;E.getBit(_)&&(W[_]=J.find(Z[_]).value)}return new sH(E,W)}function s6(E={}){let{allowCorner:I=!0,onlyTop:P=!1,invert:_=!1}=E,T=this;T.checkProcessable("fromMaxima",{components:[1]});let L=1,N=2,F=0,O=0,$=new Int16Array(T.size),Z=new Int8Array(T.size),W=new Float32Array(T.size),J=1048575,Q=new Uint16Array(J+1),te=new Uint16Array(J+1),ti=0,tn=0,ta=new Uint16Array(J+1),th=new Uint16Array(J+1),tu=0,tf=0;for(tc(T,{maxima:!_});ti<tn;)tm(Q[ti&J],te[ti&J],N),ti++;return new sH(T,$);function tc({maxima:E=!0}){for(let P=1;P<T.height-1;P++)for(let _=1;_<T.width-1;_++){let N=_+P*T.width;if(0===Z[N]){let Z=E?T.data[N]:-T.data[_+P*T.width];if(T.data[P*T.width+_-1]>Z||T.data[P*T.width+_+1]>Z||T.data[(P-1)*T.width+_]>Z||T.data[(P+1)*T.width+_]>Z||I&&(T.data[(P-1)*T.width+_-1]>Z||T.data[(P-1)*T.width+_+1]>Z||T.data[(P+1)*T.width+_-1]>Z||T.data[(P+1)*T.width+_+1]>Z))continue;$[N]=E?++F:--O,!td(_,P,L)&&(E?--F:++O)}}}function td(E,I){let P=tn;tu=0,tf=1,ta[0]=E,th[0]=I;let _=!0;for(;tu<tf;)_&=tm(ta[tu&J],th[tu&J],L),tu++;if(!_){for(let E=0;E<tf;E++){let I=ta[E&J];$[th[E&J]*T.width+I]=0}tn=P}return _}function tm(E,I,_){let F=$[I*T.width+E],O=T.data[I*T.width+E];for(let ti=I-1;ti<=I+1;ti++)for(let I=E-1;I<=E+1;I++){let E=ti*T.width+I;if(0===Z[E])switch(Z[E]=1,W[E]=T.data[E]-O,_){case L:if(0===W[E]){if(0===I||0===ti||I===T.width-1||ti===T.height-1)return!1;$[E]=F,ta[tf&J]=I,th[tf&J]=ti,tf++}else{if(W[E]>0)return!1;!P&&($[E]=F,Q[tn&J]=I,te[tn&J]=ti,tn++)}break;case N:W[E]<=0&&($[E]=F,Q[tn&J]=I,te[tn&J]=ti,tn++);break;default:throw Error("unreachable")}}return!0}}function s8(E,I={}){let P=new oV.Z(I),_=new Int16Array(this.size),T=0,L=P.getPoints();for(let I=0;I<E.length;I++){T++;let P=E[I][0],N=E[I][1];for(let E=0;E<L.length;E++){let I=L[E][0],F=L[E][1];P+I>=0&&N+F>=0&&P+I<this.width&&N+F<this.height&&(_[P+I+(N+F)*this.width]=T)}}return new sH(this,_)}var s7=P(5307),s9=P.n(s7);let ae=[1,0,-1,0,1,1,-1,-1],ai=[0,1,0,-1,1,-1,1,-1];function an(E={}){let{points:I,mask:P,image:_,fillMaxValue:T=this.maxValue,invert:L=!1}=E,N=_||this;N.checkProcessable("fromWaterShed",{bitDepth:[8,16],components:1}),L=!L,I||(I=N.getLocalMaxima({invert:L,mask:P}));let F=L?0:1,O=new Int16Array(N.size),$=N.width,Z=N.height,W=new(s9())({comparator:(E,I)=>E[2]-I[2],strategy:s9().BinaryHeapStrategy});for(let E=0;E<I.length;E++){let P=I[E][0]+I[E][1]*$;O[P]=E+1;let _=N.data[P];(L&&_<=T||!L&&_>=T)&&W.queue([I[E][0],I[E][1],_])}for(;W.length>0;){let E=W.dequeue(),I=E[0]+E[1]*$;for(let _=0;_<4;_++){let J=E[0]+ae[_],Q=E[1]+ai[_];if(J>=0&&Q>=0&&J<$&&Q<Z){let Z=J+Q*$;if(!P||P.getBit(Z)===F){let P=N.data[Z];(L&&P<=T||!L&&P>=T)&&0===O[Z]&&(O[Z]=O[I],W.queue([E[0]+ae[_],E[1]+ai[_],P]))}}}}return new sH(N,O)}class ao{constructor(E,I={}){this._image=E,this._options=I,this._options.label||(this._options.label="default"),this._layers={},this._painted=null}fromMaxima(E={}){let I=Object.assign({},this._options,E),P=s6.call(this._image,E);this._layers[I.label]=new sj(P,I)}fromPoints(E,I={}){let P=Object.assign({},this._options,I),_=s8.call(this._image,E,I);return this._layers[P.label]=new sj(_,P),this}putMap(E,I={}){let P=new sH(this._image,E),_=Object.assign({},this._options,I);return this._layers[_.label]=new sj(P,_),this}fromWaterShed(E={}){let I=Object.assign({},this._options,E),P=an.call(this._image,E);this._layers[I.label]=new sj(P,I)}fromMask(E,I={}){let P=Object.assign({},this._options,I),_=sZ.call(this._image,E,I);return this._layers[P.label]=new sj(_,P),this}fromMaskConnectedComponentLabelingAlgorithm(E,I={}){let P=Object.assign({},this._options,I),_=s4.call(this._image,E,I);return this._layers[P.label]=new sj(_,P),this}getMap(E={}){let I=Object.assign({},this._options,E);return this._assertLayerWithLabel(I.label),this._layers[I.label].roiMap}rowsInfo(E={}){return this.getMap(E).rowsInfo()}colsInfo(E={}){return this.getMap(E).rowsInfo()}getRoiIds(E={}){let I=this.getRois(E);if(I){let E=Array(I.length);for(let P=0;P<I.length;P++)E[P]=I[P].id;return E}throw Error("ROIs not found")}getRois(E={}){let{label:I=this._options.label,positive:P=!0,negative:_=!0,minSurface:T=0,maxSurface:L=Number.POSITIVE_INFINITY,minWidth:N=0,maxWidth:F=Number.POSITIVE_INFINITY,minHeight:O=0,maxHeight:$=Number.POSITIVE_INFINITY,minRatio:Z=0,maxRatio:W=Number.POSITIVE_INFINITY}=E;if(!this._layers[I])throw Error(`this Roi layer (${I}) does not exist`);let J=this._layers[I].roi,Q=[];for(let E of J)(E.id<0&&_||E.id>0&&P)&&E.surface>=T&&E.surface<=L&&E.width>=N&&E.width<=F&&E.height>=O&&E.height<=$&&E.ratio>=Z&&E.ratio<=W&&Q.push(E);return Q}getRoi(E,I={}){let{label:P=this._options.label}=I;if(!this._layers[P])throw Error(`this Roi layer (${P}) does not exist`);let _=this._layers[P].roi.find(I=>I.id===E);if(!_)throw Error(`found no Roi with id ${E}`);return _}getMasks(E={}){let I=this.getRois(E),P=Array(I.length);for(let _=0;_<I.length;_++)P[_]=I[_].getMask(E);return P}getAnalysisMasks(E={}){let{analysisProperty:I}=E,P=`${I}Mask`,_=this.getRois(E);return 0!==_.length&&_[0][P]?_.map(E=>E[P]):[]}getData(E={}){let I=Object.assign({},this._options,E);return this._assertLayerWithLabel(I.label),this._layers[I.label].roiMap.data}paint(E={}){let{labelProperty:I,analysisProperty:P}=E;this._painted||(this._painted=this._image.rgba8());let _=this.getMasks(E);if(I){let P=this.getRois(E);E.labels=P.map(E=>sC(E,I));let _=Math.max(...E.labels),T=!1,L=!1;if(I.includes("surface")?T=!0:/(?:perimeter|min|max|external|width|height|length)/.test(I)&&(L=!0),isFinite(_)){let I="";if("pixel"!==E.unit&&E.pixelSize&&(L||T)){I=T?`${E.unit}^2`:E.unit;let P=T?"m^2":"m",_=T?E.pixelSize**2:E.pixelSize,L=s_().swiftConverter(P,I);E.labels=E.labels.map(E=>L(_*E))}_>50?E.labels=E.labels.map(E=>Math.round(E)+I):_>10?E.labels=E.labels.map(E=>E.toFixed(1)+I):E.labels=E.labels.map(E=>E.toFixed(2)+I)}E.labelsPosition=P.map(E=>[E.meanX,E.meanY])}if(this._painted.paintMasks(_,E),P){let I=this.getAnalysisMasks(E);this._painted.paintMasks(I,{color:E.analysisColor,alpha:E.analysisAlpha})}return this._painted}getMask(E={}){let I=new ah(this._image.width,this._image.height,{kind:"BINARY"}),P=this.getMasks(E);for(let E=0;E<P.length;E++){let _=P[E];for(let E=0;E<_.width;E++)for(let P=0;P<_.height;P++)_.getBitXY(E,P)&&I.setBitXY(E+_.position[0],P+_.position[1])}return I}resetPainted(E={}){let{image:I}=E;I?this._painted=this.image.rgba8():this._painted=this._image.rgba8()}mergeRoi(E={}){let I=this.getMap(E);return I.mergeRoi(E),this.putMap(I.data,E),this}mergeRois(E,I={}){if(!Array.isArray(E)||E.some(E=>!Number.isInteger(E)))throw Error("Roi ids must be an array of integers");if(E.length<2)throw Error("Roi ids must have at least two elements");if(new Set(E).size!==E.length)throw Error("Roi ids must be all different");E.forEach(E=>this.getRoi(E));let P=this.getMap(I);return P.mergeRois(E),this.putMap(P.data,I),this}findCorrespondingRoi(E,I={}){let P=this.getRois(I),_=[];for(let I=0;I<P.length;I++){let T=P[I],L=as(T.minX,T.minY,T.points,E,Math.sign(T.id));_.push(L)}return _}_assertLayerWithLabel(E){if(!this._layers[E])throw Error(`no layer with label ${E}`)}}function as(E,I,P,_,T){let L={id:[],surface:[],roiSurfaceCovered:[],same:0,opposite:0,total:0};for(let T=0;T<P.length;T++){let N=P[T],F=N[0]+E+(N[1]+I)*_.width,O=_.data[F];(O>0||O<0)&&(L.id.includes(O)?L.surface[L.id.indexOf(O)]+=1:(L.id.push(O),L.surface.push(1)))}for(let E=0;E<L.id.length;E++)Math.sign(L.id[E])===T?L.same+=L.surface[E]:L.opposite+=L.surface[E],L.roiSurfaceCovered[E]=L.surface[E]/P.length;return L.total=L.opposite+L.same,L}let aa=Object.prototype.toString;class ah{constructor(E,I,P,_){if(1==arguments.length?(_=E,{width:E,height:I,data:P}=_):P&&!P.length&&(_=P,{data:P}=_),void 0===E&&(E=1),void 0===I&&(I=1),void 0===_&&(_={}),"object"!=typeof _||null===_)throw TypeError("options must be an object");if(!Number.isInteger(E)||E<=0)throw RangeError("width must be a positive integer");if(!Number.isInteger(I)||I<=0)throw RangeError("height must be a positive integer");let{kind:T=eg.VS}=_;if("string"!=typeof T)throw TypeError("kind must be a string");let L=eb(T),N=Object.assign({},_);for(let E in L)void 0===N[E]&&(N[E]=L[E]);ev(N);let{components:F,bitDepth:O,colorModel:$}=N,Z=N.alpha+0,W=E*I,J=F+Z,Q=32===O?Number.MAX_VALUE:2**O-1;if(void 0===P)P=eM(W,F,Z,J,O,Q);else{let E=ex(W,J,O);if(P.length!==E)throw RangeError(`incorrect data size: ${P.length}. Should be ${E}`)}this.width=E,this.height=I,this.data=P,this.size=W,this.components=F,this.alpha=Z,this.bitDepth=O,this.maxValue=Q,this.colorModel=$,this.channels=J,this.meta=_.meta||{},Object.defineProperty(this,"parent",{enumerable:!1,writable:!0,configurable:!0,value:_.parent||null}),this.position=_.position||[0,0],this.computed=null,this.sizes=[this.width,this.height],this.multiplierX=this.channels,this.multiplierY=this.channels*this.width,this.isClamped=this.bitDepth<32,this.borderSizes=[0,0]}get[Symbol.toStringTag](){return"IJSImage"}static isImage(E){return"[object IJSImage]"===aa.call(E)}static fromCanvas(E){let I=E.getContext("2d"),P=I.getImageData(0,0,E.width,E.height);return new ah(P.width,P.height,P.data)}static createFrom(E,I){let P=r_(E);return Object.assign(P,{parent:E,position:[0,0]},I),new ah(P)}getRoiManager(E){return new ao(this,E)}clone(){let E=this.data.slice();return new ah(this.width,this.height,E,this)}apply(E){for(let I=0;I<this.height;I++)for(let P=0;P<this.width;P++){let _=(I*this.width+P)*this.channels;E.call(this,_)}}}rD(ah),ti(ah),t5(ah),ah.prototype.checkProcessable=tn,ah.prototype.getRGBAData=es,ah.load=rb,ah.extendMethod=t7,ah.extendProperty=t9,sP(ah)},2084:function(E,I,P){"use strict";P.d(I,{$h:function(){return _},Hq:function(){return $},NC:function(){return O},VS:function(){return F},XE:function(){return L},eX:function(){return N},s7:function(){return T}});let _="BINARY",T="GREY",L="GREYA",N="RGB",F="RGBA",O="CMYK",$="CMYKA"},4686:function(E,I,P){"use strict";P.d(I,{R:function(){return T},x:function(){return _}});let _={luma709:(E,I,P)=>6966*E+23436*I+2366*P>>15,luma601:(E,I,P)=>9798*E+19235*I+3735*P>>15,maximum:(E,I,P)=>Math.max(E,I,P),minimum:(E,I,P)=>Math.min(E,I,P),average:(E,I,P)=>(E+I+P)/3>>0,minmax:(E,I,P)=>(Math.max(E,I,P)+Math.min(E,I,P))/2,red:E=>E,green:(E,I)=>I,blue:(E,I,P)=>P,cyan(E,I,P,T){let L=_.black(E,I,P,T);return(T.maxValue-E-L)/(1-L/T.maxValue)>>0},magenta(E,I,P,T){let L=_.black(E,I,P,T);return(T.maxValue-I-L)/(1-L/T.maxValue)>>0},yellow(E,I,P,T){let L=_.black(E,I,P,T);return(T.maxValue-P-L)/(1-L/T.maxValue)>>0},black:(E,I,P,_)=>Math.min(_.maxValue-E,_.maxValue-I,_.maxValue-P),hue(E,I,P,T){let L=_.min(E,I,P),N=_.max(E,I,P);if(N===L)return 0;let F=0,O=N-L;switch(N){case E:F=(I-P)/O+(I<P?6:0);break;case I:F=(P-E)/O+2;break;case P:F=(E-I)/O+4;break;default:throw Error("unreachable")}return F/6*T.maxValue>>0},saturation(E,I,P,T){let L=_.min(E,I,P),N=_.max(E,I,P),F=N-L;return 0===N?0:F/N*T.maxValue},lightness(E,I,P){let T=_.min(E,I,P);return(_.max(E,I,P)+T)/2}};Object.defineProperty(_,"luminosity",{enumerable:!1,value:_.lightness}),Object.defineProperty(_,"luminance",{enumerable:!1,value:_.lightness}),Object.defineProperty(_,"min",{enumerable:!1,value:_.minimum}),Object.defineProperty(_,"max",{enumerable:!1,value:_.maximum}),Object.defineProperty(_,"brightness",{enumerable:!1,value:_.maximum});let T={};Object.keys(_).forEach(E=>{T[E]=E})},1114:function(E,I,P){"use strict";function _(E){let I=0;for(let P=0;P<E.length;P++)if(0!==E[P]){I=P;break}let P=E.length-1;for(let _=E.length-1;_>=I;_--)if(0!==E[_]){P=_;break}let _=1/(P-I),T=Array(E.length),L=0,N=0;for(let P=I;P<E.length;P++)L+=P*E[P],N+=E[P],T[P]=L/N;let F=Array(E.length);L=N=0;for(let I=P;I>0;I--)L+=I*E[I],N+=E[I],F[I-1]=L/N;let O=-1,$=Number.MAX_VALUE;for(let I=0;I<E.length;I++){let P,L=0;for(let N=0;N<=I;N++)(P=1/(1+_*Math.abs(N-T[I])))<1e-6||P>.999999||(L+=E[N]*(-P*Math.log(P)-(1-P)*Math.log(1-P)));for(let T=I+1;T<E.length;T++)(P=1/(1+_*Math.abs(T-F[I])))<1e-6||P>.999999||(L+=E[T]*(-P*Math.log(P)-(1-P)*Math.log(1-P)));L<$&&($=L,O=I)}return O}function T(E){let I=E.slice(),P=0;for(;!L(I);){let _=0,T=0,L=I[0];for(let P=0;P<E.length-1;P++)_=T,T=L,L=I[P+1],I[P]=(_+T+L)/3;if(I[E.length-1]=(T+L)/3,++P>1e4)throw Error("Intermodes Threshold not found after 10000 iterations")}let _=0;for(let P=1;P<E.length-1;P++)I[P-1]<I[P]&&I[P+1]<I[P]&&(_+=P);return Math.floor(_/2)}function L(E){let I=!1,P=0;for(let I=1;I<E.length-1;I++)if(E[I-1]<E[I]&&E[I+1]<E[I]&&++P>2)return!1;return 2===P&&(I=!0),I}function N(E){let I,P,_,T;let L=0;for(let I=1;I<E.length;I++)if(E[I]>0){L=I+1;break}for(;;){I=0,_=0;for(let P=0;P<L;P++)_+=E[P],I+=E[P]*P;T=0,P=0;for(let I=L+1;I<E.length;I++)P+=E[I],T+=E[I]*I;if(_>0&&P>0&&L===Math.round(((I/=_)+(T/=P))/2))break;if(++L>E.length-2)throw Error("Threshold not found")}return L}function F(E,I){let P,_,T,L,N,F,O,$,Z,W,J,Q;J=.5,W=0;for(let I=0;I<E.length;I++)W+=I*E[I];W/=I,O=W;do{P=(F=O)+.5|0,_=0,L=0;for(let I=0;I<=P;I++)_+=I*E[I],L+=E[I];$=0===L?0:_/L,T=0,N=0;for(let I=P+1;I<E.length;I++)T+=I*E[I],N+=E[I];O=(Q=($-(Z=0===N?0:T/N))/(Math.log($)-Math.log(Z)))<-Number.EPSILON?Q-.5|0:Q+.5|0}while(Math.abs(O-F)>J);return P}function O(E,I){let P,_,T,L=Array(E.length);for(let P=0;P<E.length;P++)L[P]=E[P]/I;let N=Array(E.length),F=Array(E.length);N[0]=L[0],F[0]=1-N[0];for(let I=1;I<E.length;I++)N[I]=N[I-1]+L[I],F[I]=1-N[I];let O=0;for(let I=0;I<E.length;I++)if(Math.abs(N[I])>=Number.EPSILON){O=I;break}let $=E.length-1;for(let I=E.length-1;I>=O;I--)if(Math.abs(F[I])>=Number.EPSILON){$=I;break}let Z=-1,W=Number.MIN_VALUE;for(let I=O;I<=$;I++){_=0;for(let P=0;P<=I;P++)0!==E[P]&&(_-=L[P]/N[I]*Math.log(L[P]/N[I]));T=0;for(let P=I+1;P<E.length;P++)0!==E[P]&&(T-=L[P]/F[I]*Math.log(L[P]/F[I]));W<(P=_+T)&&(W=P,Z=I)}return Z}function $(E,I){let P=0;for(let I=0;I<E.length;I++)P+=I*E[I];return Math.floor(P/I)}function Z(E,I){let P,_,T,L,N,F,O,$,Z,te,ti;let tn=-2,ta=0;for(let I=0;I<E.length;I++)ta+=I*E[I];for(ta/=I,P=ta;P!==tn;){let I=W(E,P),ta=W(E,E.length-1),th=J(E,P),tu=J(E,E.length-1),tf=Q(E,P),tc=Q(E,E.length-1);if(_=th/I,T=(tu-th)/(ta-I),L=I/ta,N=(ta-I)/ta,$=1/(F=tf/I-_*_)-1/(O=(tc-tf)/(ta-I)-T*T),(te=(Z=_/F-T/O)*Z-$*(_*_/F-T*T/O+Math.log10(F*(N*N)/(O*(L*L)))))<0)break;tn=P,P=isNaN(ti=(Z+Math.sqrt(te))/$)?tn:Math.floor(ti)}return P}function W(E,I){let P=0;for(let _=0;_<=I;_++)P+=E[_];return P}function J(E,I){let P=0;for(let _=0;_<=I;_++)P+=_*E[_];return P}function Q(E,I){let P=0;for(let _=0;_<=I;_++)P+=_*_*E[_];return P}function te(E){if(E.length<2)return 0;let I=0,P=-1,_=-1,T=Array(E.length);for(let I=0;I<E.length;I++)T[I]=E[I],E[I]>0&&(_=I);for(;!ta(T);)if(T=ti(T),++I>1e4)return P;return tn(T,_)}function ti(E){let I=Array(E.length);for(let P=1;P<E.length-1;P++)I[P]=(E[P-1]+E[P]+E[P+1])/3;return I[0]=(E[0]+E[1])/3,I[E.length-1]=(E[E.length-2]+E[E.length-1])/3,I}function tn(E,I){let P;for(let _=1;_<I;_++)if(E[_-1]>E[_]&&E[_+1]>=E[_]){P=_;break}return P}function ta(E){let I=E.length,P=!1,_=0;for(let P=1;P<I-1;P++)if(E[P-1]<E[P]&&E[P+1]<E[P]&&++_>2)return!1;return 2===_&&(P=!0),P}function th(E,I){let P,_,T,L,N,F,O=1,$=0,Z=0,W=0,J=0,Q=-1,te=E.length,ti=Array(te);for(let P=0;P<te;P++)ti[P]=E[P]/I;for(let E=0;E<te;E++)$+=E*ti[E],Z+=E*E*ti[E],W+=E*E*E*ti[E];_=O*Z-$*$,T=(-Z*Z+$*W)/_,N=.5*(-(L=(-(O*W)+Z*$)/_)-Math.sqrt(L*L-4*T)),P=((F=.5*(-L+Math.sqrt(L*L-4*T)))-$)/(F-N);for(let E=0;E<te;E++)if((J+=ti[E])>P){Q=E;break}return Q}function tu(E,I){let P=0,_=0,T=0,L=0,N=0;for(let I=0;I<E.length;I++)N+=I*E[I];for(let F=0;F<E.length;F++){_+=E[F];let O=I-_;if(0===_||0===O)continue;P+=F*E[F];let $=(N-P)/O,Z=_*O*(P/_-$)*(P/_-$);Z>=T&&(L=F,T=Z)}return L}function tf(E){let I=-1,P=.5,_=Array(E.length),T=tc(E,E.length-1),L=1;for(let N=0;N<E.length;N++)_[N]=Math.abs(tc(E,N)/T-P),_[N]<L&&(L=_[N],I=N);return I}function tc(E,I){let P=0;for(let _=0;_<=I;_++)P+=E[_];return P}function td(E,I){let P,_,T;let L=Array(E.length),N=Array(E.length),F=Array(E.length),O=0,$=0,Z=0,W=0,J=0,Q=0,te=2,ti=-1;for(let P=0;P<E.length;P++)L[P]=E[P]/I;N[0]=L[0],F[0]=1-N[0];for(let I=1;I<E.length;I++)N[I]=N[I-1]+L[I],F[I]=1-N[I];P=0;for(let I=0;I<E.length;I++)if(Math.abs(N[I])>=Number.EPSILON){P=I;break}_=E.length-1;for(let I=E.length-1;I>=P;I--)if(Math.abs(F[I])>=Number.EPSILON){_=I;break}for(let I=P;I<=_;I++){let P=0,_=0,T=0;for(let F=0;F<=I;F++)0!==E[F]&&(P-=L[F]/N[I]*Math.log(L[F]/N[I])),_+=Math.sqrt(L[F]/N[I]),T+=L[F]*L[F]/(N[I]*N[I]);let tn=0,ta=0,th=0;for(let P=I+1;P<E.length;P++)0!==E[P]&&(tn-=L[P]/F[I]*Math.log(L[P]/F[I])),ta+=Math.sqrt(L[P]/F[I]),th+=L[P]*L[P]/(F[I]*F[I]);let tu=P+tn,tf=te*(_*ta>0?Math.log(_*ta):0),tc=ti*(T*th>0?Math.log(T*th):0);tu>W&&(W=tu,O=I),tf>J&&(J=tf,$=I),tc>Q&&(Q=tc,Z=I)}let tn=[O,$,Z];tn.sort((E,I)=>E-I),T=5>=Math.abs(tn[0]-tn[1])?5>=Math.abs(tn[1]-tn[2])?[1,2,1]:[0,1,3]:5>=Math.abs(tn[1]-tn[2])?[3,1,0]:[1,2,1];let ta=N[tn[2]]-N[tn[0]];return Math.round(tn[0]*(N[tn[0]]+.25*ta*T[0])+.25*tn[1]*ta*T[1]+tn[2]*(F[tn[2]]+.25*ta*T[2]))}function tm(E,I){let P,_,T,L,N=Array(E.length);for(let P=0;P<E.length;P++)N[P]=E[P]/I;let F=Array(E.length),O=Array(E.length);F[0]=N[0],O[0]=1-F[0];for(let I=1;I<E.length;I++)F[I]=F[I-1]+N[I],O[I]=1-F[I];let $=0;for(let I=0;I<E.length;I++)if(Math.abs(F[I])>=Number.EPSILON){$=I;break}let Z=E.length-1;for(let I=E.length-1;I>=$;I--)if(Math.abs(O[I])>=Number.EPSILON){Z=I;break}let W=-1,J=Number.MAX_VALUE;for(let I=$;I<=Z;I++){T=0,P=.5/F[I];for(let E=1;E<=I;E++)T-=N[E]*Math.log(1-P*F[E-1]);T*=P,L=0,P=.5/O[I];for(let _=I+1;_<E.length;_++)L-=N[_]*Math.log(1-P*O[_]);L*=P,(_=Math.abs(T-L))<J&&(J=_,W=I)}return W}function tp(E){let I,P,_,T=0,L=0,N=0,F=0;for(let I=0;I<E.length;I++)if(E[I]>0){T=I;break}T>0&&T--;for(let I=E.length-1;I>0;I--)if(E[I]>0){F=I;break}F<E.length-1&&F++;for(let I=0;I<E.length;I++)E[I]>L&&(N=I,L=E[I]);let O=!1;if(N-T<F-N){O=!0;let I=0,P=E.length-1;for(;I<P;){let _=E[I];E[I]=E[P],E[P]=_,I++,P--}T=E.length-1-F,N=E.length-1-N}if(T===N)return T;_=Math.sqrt((I=E[N])*I+(P=T-N)*P),I/=_,P/=_,_=I*T+P*E[T];let $=T,Z=0;for(let L=T+1;L<=N;L++){let T=I*L+P*E[L]-_;T>Z&&($=L,Z=T)}if($--,!O)return $;{let I=0,P=E.length-1;for(;I<P;){let _=E[I];E[I]=E[P],E[P]=_,I++,P--}return E.length-1-$}}function tg(E,I){let P,_=Array(E.length);for(let P=0;P<E.length;P++)_[P]=E[P]/I;let T=Array(E.length);T[0]=_[0];for(let I=1;I<E.length;I++)T[I]=T[I-1]+_[I];let L=Array(E.length);L[0]=_[0]*_[0];for(let I=1;I<E.length;I++)L[I]=L[I-1]+_[I]*_[I];let N=Array(E.length);N[E.length-1]=0;for(let I=E.length-2;I>=0;I--)N[I]=N[I+1]+_[I+1]*_[I+1];let F=-1,O=Number.MIN_VALUE;for(let I=0;I<E.length;I++)(P=-1*(L[I]*N[I]>0?Math.log(L[I]*N[I]):0)+2*(T[I]*(1-T[I])>0?Math.log(T[I]*(1-T[I])):0))>O&&(O=P,F=I);return F}P.d(I,{x:function(){return tw},R:function(){return tb}});let tw={huang:_,intermodes:T,isodata:N,li:F,maxentropy:O,mean:$,minerror:Z,minimum:te,moments:th,otsu:tu,percentile:tf,renyientropy:td,shanbhag:tm,triangle:tp,yen:tg},tb={};Object.keys(tw).forEach(E=>{tb[E]=E})},3269:function(E,I,P){"use strict";P.d(I,{Z:function(){return th}});var _=P(2251),T=P.n(_),L=P(4066);function N(E={}){let{algorithm:I="matchToPrevious",ignoreBorder:P=[0,0]}=E;this.checkProcessable("matchAndCrop",{bitDepth:[8,16]});let _="matchToPrevious"===I,T=this[0],L=[];L[0]={position:[0,0],image:this[0]};let N=[0,0];for(let E=1;E<this.length;E++){let I=T.getBestMatch(this[E],{border:P});L[E]={position:[I[0]+N[0],I[1]+N[1]],image:this[E]},_&&(N[0]+=I[0],N[1]+=I[1],T=this[E])}let F=0,O=0,$=0,Z=0;for(let E=0;E<L.length;E++){let I=L[E];I.position[0]>F&&(F=I.position[0]),I.position[0]<O&&(O=I.position[0]),I.position[1]>$&&($=I.position[1]),I.position[1]<Z&&(Z=I.position[1])}O=0-O,Z=0-Z;for(let E=0;E<L.length;E++){let I=L[E];I.crop=I.image.crop({x:F-I.position[0],y:$-I.position[1],width:T.width-O-F,height:T.height-Z-$})}let W=[];for(let E=0;E<L.length;E++)W[E]=L[E].crop;return new th(W)}function F(){this.checkProcessable("min",{bitDepth:[8,16]});let E=this[0].min;for(let I=1;I<this.length;I++)for(let P=0;P<E.length;P++)E[P]=Math.min(E[P],this[I].min[P]);return E}function O(){this.checkProcessable("min",{bitDepth:[8,16]});let E=this[0].max;for(let I=1;I<this.length;I++)for(let P=0;P<E.length;P++)E[P]=Math.max(E[P],this[I].max[P]);return E}var $=P(5890);function Z(){this.checkProcessable("median",{bitDepth:[8,16]});let E=this.getHistograms({maxSlots:this[0].maxValue+1}),I=Array(E.length);for(let P=0;P<E.length;P++){let _=E[P];I[P]=(0,$.C)(_)}return I}function W(E){this.checkProcessable("min",{bitDepth:[8,16]});let I=this[0].getHistogram(E);for(let P=1;P<this.length;P++){let _=this[P].getHistogram(E);for(let E=0;E<I.length;E++)I[E]+=_[E]}return I}function J(E){this.checkProcessable("min",{bitDepth:[8,16]});let I=this[0].getHistograms(E),P=I[0].length;for(let _=1;_<this.length;_++){let T=this[_].getHistograms(E);for(let E=0;E<I.length;E++)for(let _=0;_<P;_++)I[E][_]+=T[E][_]}return I}function Q(){this.checkProcessable("averageImage",{bitDepth:[8,16]});let E=new Uint32Array(this[0].data.length);for(let I=0;I<this.length;I++){let P=this[I];for(let I=0;I<this[0].data.length;I++)E[I]+=P.data[I]}let I=L.Z.createFrom(this[0]),P=I.data;for(let I=0;I<this[0].data.length;I++)P[I]=E[I]/this.length;return I}function te(){this.checkProcessable("max",{bitDepth:[8,16]});let E=L.Z.createFrom(this[0]);for(let I of(E.data.fill(0),this))for(let P=0;P<E.data.length;P++)E.data[P]=Math.max(I.data[P],E.data[P]);return E}function ti(){this.checkProcessable("max",{bitDepth:[8,16]});let E=L.Z.createFrom(this[0]);for(let I of(E.data.fill(E.maxValue),this))for(let P=0;P<E.data.length;P++)E.data[P]=Math.min(I.data[P],E.data[P]);return E}function tn(E){E.extendMethod("matchAndCrop",N),E.extendMethod("getMin",F),E.extendMethod("getMax",O),E.extendMethod("getMedian",Z),E.extendMethod("getHistogram",W),E.extendMethod("getHistograms",J),E.extendMethod("getAverage",Q),E.extendMethod("getAverageImage",Q),E.extendMethod("getMaxImage",te),E.extendMethod("getMinImage",ti)}let ta={configurable:!0,enumerable:!1,get:void 0};class th extends Array{constructor(E){if(Array.isArray(E)){super(E.length);for(let I=0;I<E.length;I++)this[I]=E[I]}else"number"==typeof E?super(E):super();this.computed=null}static load(E){return Promise.all(E.map(L.Z.load)).then(E=>new th(E))}static extendMethod(E,I,P={}){let{inPlace:_=!1,returnThis:T=!0,partialArgs:L=[]}=P;return _?th.prototype[E]=function(...E){this.computed=null;let P=I.apply(this,[...L,...E]);return T?this:P}:th.prototype[E]=function(...E){return I.apply(this,[...L,...E])},th}static extendProperty(E,I,P={}){let{partialArgs:_=[]}=P;return ta.get=function(){if(null===this.computed)this.computed={};else if(T()(E,this.computed))return this.computed[E];let P=I.apply(this,_);return this.computed[E]=P,P},Object.defineProperty(th.prototype,E,ta),th}checkProcessable(E,I={}){if("string"!=typeof E)throw TypeError("checkProcessable requires as first parameter the processName (a string)");if(0===this.size)throw TypeError(`The process: ${E} can not be applied on an empty stack`);this[0].checkProcessable(E,I);for(let P=1;P<this.length;P++){if((void 0===I.sameSize||I.sameSize)&&this[0].width!==this[P].width)throw TypeError(`The process: ${E} can not be applied if width is not identical in all images`);if((void 0===I.sameSize||I.sameSize)&&this[0].height!==this[P].height)throw TypeError(`The process: ${E} can not be applied if height is not identical in all images`);if((void 0===I.sameAlpha||I.sameAlpha)&&this[0].alpha!==this[P].alpha)throw TypeError(`The process: ${E} can not be applied if alpha is not identical in all images`);if((void 0===I.sameBitDepth||I.sameBitDepth)&&this[0].bitDepth!==this[P].bitDepth)throw TypeError(`The process: ${E} can not be applied if bitDepth is not identical in all images`);if((void 0===I.sameColorModel||I.sameColorModel)&&this[0].colorModel!==this[P].colorModel)throw TypeError(`The process: ${E} can not be applied if colorModel is not identical in all images`);if((void 0===I.sameNumberChannels||I.sameNumberChannels)&&this[0].channels!==this[P].channels)throw TypeError(`The process: ${E} can not be applied if channels is not identical in all images`)}}}Array[Symbol.species]||(th.prototype.map=function(E,I){if("function"!=typeof E)throw TypeError(`${E} is not a function`);let P=new th(this.length);for(let _=0;_<this.length;_++)P[_]=E.call(I,this[_],_,this);return P}),tn(th)},3114:function(E,I,P){"use strict";P.d(I,{Z:function(){return O}});var _=P(4066),T=P(2084);function L(E,I){let P=Array(E);for(let _=0;_<E;_++)P[_]=Array(I).fill(0);return P}let N=[[0,0,1,0,0],[0,0,1,0,0],[1,1,1,1,1],[0,0,1,0,0],[0,0,1,0,0]],F=[[0,1,0],[1,1,1],[0,1,0]];class O{constructor(E={}){let{kind:I="cross",shape:P,size:_,width:T,height:L,filled:O=!0}=E;if(_&&(T=_,L=_),P)switch(P.toLowerCase()){case"square":case"rectangle":this.matrix=$(T,L,{filled:O});break;case"circle":case"ellipse":this.matrix=Z(T,L,{filled:O});break;case"triangle":this.matrix=W(T,L,{filled:O});break;default:throw Error(`Shape: unexpected shape: ${P}`)}else if(I)switch(I.toLowerCase()){case"cross":this.matrix=N;break;case"smallcross":this.matrix=F;break;default:throw Error(`Shape: unexpected kind: ${I}`)}else throw Error("Shape: expected a kind or a shape option");this.height=this.matrix.length,this.width=this.matrix[0].length,this.halfHeight=this.height/2>>0,this.halfWidth=this.width/2>>0}getPoints(){let E=this.matrix,I=[];for(let P=0;P<E.length;P++)for(let _=0;_<E[0].length;_++)E[P][_]&&I.push([_-this.halfWidth,P-this.halfHeight]);return I}getMask(){let E=new _.Z(this.width,this.height,{kind:T.$h});for(let I=0;I<this.matrix.length;I++)for(let P=0;P<this.matrix[0].length;P++)this.matrix[I][P]&&E.setBitXY(P,I);return E}}function $(E,I,P){let _=L(I,E);if(P.filled)for(let P=0;P<I;P++)for(let I=0;I<E;I++)_[P][I]=1;else{for(let P of[0,I-1])for(let I=0;I<E;I++)_[P][I]=1;for(let P=0;P<I;P++)for(let I of[0,E-1])_[P][I]=1}return _}function Z(E,I,P){let _=L(I,E,P),T=1-I%2,N=1-E%2,F=Math.floor((E-1)/2),O=Math.floor((I-1)/2),$=F*F,Z=O*O;if(P.filled)for(let I=0;I<=O;I++){let P=Math.floor(Math.sqrt($-$*I*I/Z));for(let L=F-P;L<=F;L++)_[O-I][L]=1,_[O+I+T][L]=1,_[O-I][E-L-1]=1,_[O+I+T][E-L-1]=1}else{for(let I=0;I<=O;I++){let P=F-Math.floor(Math.sqrt($-$*I*I/Z));_[O-I][P]=1,_[O+I+T][P]=1,_[O-I][E-P-1]=1,_[O+I+T][E-P-1]=1}for(let E=0;E<=F;E++){let P=O-Math.floor(Math.sqrt(Z-Z*E*E/$));_[P][F-E]=1,_[P][F+E+N]=1,_[I-P-1][F-E]=1,_[I-P-1][F+E+N]=1}}return _}function W(E,I,P){if(!P.filled)throw Error("Non filled triangle is not implemented");let _=L(I,E,P);for(let P=0;P<I;P++){let T=Math.floor((1-P/I)*E/2);for(let I=T;I<E-T;I++)_[P][I]=1}return _}},5890:function(E,I,P){"use strict";function _(E){let I,P=E.reduce((E,I)=>E+I);if(0===P)throw Error("unreachable");let _=0,T=0,L=P/2;for(;;){if(E[_]>0){if(void 0!==I)return(I+_)/2;if((T+=E[_])>L)return _;T===L&&(I=_)}_++}}function T(E){let I=0,P=0;for(let _=0;_<E.length;_++)I+=E[_],P+=E[_]*_;return 0===I?0:P/I}P.d(I,{C:function(){return _},J:function(){return T}})},4106:function(E,I,P){"use strict";let _=P(7769),T=new Set(["jpg","png","gif","webp","flif","cr2","tif","bmp","jxr","psd","ico","bpg","jp2","jpm","jpx","heic","cur","dcm"]),L=E=>{let I=_(E);return T.has(I&&I.ext)?I:null};E.exports=L,E.exports.default=L,Object.defineProperty(L,"minimumBytes",{value:_.minimumBytes})},9498:function(E,I,P){"use strict";function _(E,I="utf8"){let P=new TextDecoder(I);return P.decode(E)}P.r(I),P.d(I,{IOBuffer:function(){return $}}),P(7396);let T=new TextEncoder;function L(E){return T.encode(E)}let N=8192,F=(()=>{let E=new Uint8Array(4),I=new Uint32Array(E.buffer);return!((I[0]=1)&E[0])})(),O={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class ${constructor(E=N,I={}){let P=!1;"number"==typeof E?E=new ArrayBuffer(E):(P=!0,this.lastWrittenByte=E.byteLength);let _=I.offset?I.offset>>>0:0,T=E.byteLength-_,L=_;(ArrayBuffer.isView(E)||E instanceof $)&&(E.byteLength!==E.buffer.byteLength&&(L=E.byteOffset+_),E=E.buffer),P?this.lastWrittenByte=T:this.lastWrittenByte=0,this.buffer=E,this.length=T,this.byteLength=T,this.byteOffset=L,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,L,T),this._mark=0,this._marks=[]}available(E=1){return this.offset+E<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(E=1){return this.offset+=E,this}back(E=1){return this.offset-=E,this}seek(E){return this.offset=E,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){let E=this._marks.pop();if(void 0===E)throw Error("Mark stack empty");return this.seek(E),this}rewind(){return this.offset=0,this}ensureAvailable(E=1){if(!this.available(E)){let I=this.offset+E,P=2*I,_=new Uint8Array(P);_.set(new Uint8Array(this.buffer)),this.buffer=_.buffer,this.length=this.byteLength=P,this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(E=1){return this.readArray(E,"uint8")}readArray(E,I){let P=O[I].BYTES_PER_ELEMENT*E,_=this.byteOffset+this.offset,T=this.buffer.slice(_,_+P);if(this.littleEndian===F&&"uint8"!==I&&"int8"!==I){let E=new Uint8Array(this.buffer.slice(_,_+P));E.reverse();let T=new O[I](E.buffer);return this.offset+=P,T.reverse(),T}let L=new O[I](T);return this.offset+=P,L}readInt16(){let E=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,E}readUint16(){let E=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,E}readInt32(){let E=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,E}readUint32(){let E=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat32(){let E=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,E}readFloat64(){let E=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,E}readBigInt64(){let E=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,E}readBigUint64(){let E=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,E}readChar(){return String.fromCharCode(this.readInt8())}readChars(E=1){let I="";for(let P=0;P<E;P++)I+=this.readChar();return I}readUtf8(E=1){return _(this.readBytes(E))}decodeText(E=1,I="utf-8"){return _(this.readBytes(E),I)}writeBoolean(E){return this.writeUint8(E?255:0),this}writeInt8(E){return this.ensureAvailable(1),this._data.setInt8(this.offset++,E),this._updateLastWrittenByte(),this}writeUint8(E){return this.ensureAvailable(1),this._data.setUint8(this.offset++,E),this._updateLastWrittenByte(),this}writeByte(E){return this.writeUint8(E)}writeBytes(E){this.ensureAvailable(E.length);for(let I=0;I<E.length;I++)this._data.setUint8(this.offset++,E[I]);return this._updateLastWrittenByte(),this}writeInt16(E){return this.ensureAvailable(2),this._data.setInt16(this.offset,E,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(E){return this.ensureAvailable(2),this._data.setUint16(this.offset,E,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(E){return this.ensureAvailable(4),this._data.setInt32(this.offset,E,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(E){return this.ensureAvailable(4),this._data.setUint32(this.offset,E,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(E){return this.ensureAvailable(4),this._data.setFloat32(this.offset,E,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(E){return this.ensureAvailable(8),this._data.setFloat64(this.offset,E,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(E){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,E,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(E){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,E,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(E){return this.writeUint8(E.charCodeAt(0))}writeChars(E){for(let I=0;I<E.length;I++)this.writeUint8(E.charCodeAt(I));return this}writeUtf8(E){return this.writeBytes(L(E))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},7396:function(){"use strict";!function(E){function I(E="utf-8"){if("utf-8"!==E)throw RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${E}') is invalid.`)}function P(E="utf-8",I={fatal:!1}){if("utf-8"!==E)throw RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${E}') is invalid.`);if(I.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}E.TextEncoder&&E.TextDecoder||(Object.defineProperty(I.prototype,"encoding",{value:"utf-8"}),I.prototype.encode=function(E,I={stream:!1}){if(I.stream)throw Error("Failed to encode: the 'stream' option is unsupported.");let P=0,_=E.length,T=0,L=Math.max(32,_+(_>>1)+7),N=new Uint8Array(L>>3<<3);for(;P<_;){let I=E.charCodeAt(P++);if(I>=55296&&I<=56319){if(P<_){let _=E.charCodeAt(P);(64512&_)==56320&&(++P,I=((1023&I)<<10)+(1023&_)+65536)}if(I>=55296&&I<=56319)continue}if(T+4>N.length){L+=8,L*=1+P/E.length*2,L=L>>3<<3;let I=new Uint8Array(L);I.set(N),N=I}if((4294967168&I)==0){N[T++]=I;continue}if((4294965248&I)==0)N[T++]=I>>6&31|192;else if((4294901760&I)==0)N[T++]=I>>12&15|224,N[T++]=I>>6&63|128;else{if((4292870144&I)!=0)continue;N[T++]=I>>18&7|240,N[T++]=I>>12&63|128,N[T++]=I>>6&63|128}N[T++]=63&I|128}return N.slice(0,T)},Object.defineProperty(P.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(P.prototype,"fatal",{value:!1}),Object.defineProperty(P.prototype,"ignoreBOM",{value:!1}),P.prototype.decode=function(E,I={stream:!1}){if(I.stream)throw Error("Failed to decode: the 'stream' option is unsupported.");let P=new Uint8Array(E),_=0,T=P.length,L=[];for(;_<T;){let E=P[_++];if(0===E)break;if((128&E)==0)L.push(E);else if((224&E)==192){let I=63&P[_++];L.push((31&E)<<6|I)}else if((240&E)==224){let I=63&P[_++],T=63&P[_++];L.push((31&E)<<12|I<<6|T)}else if((248&E)==240){let I=63&P[_++],T=63&P[_++],N=63&P[_++],F=(7&E)<<18|I<<12|T<<6|N;F>65535&&(F-=65536,L.push(F>>>10&1023|55296),F=56320|1023&F),L.push(F)}}return String.fromCharCode.apply(null,L)},E.TextEncoder=I,E.TextDecoder=P)}("undefined"!=typeof window?window:"undefined"!=typeof self?self:this)},4091:function(E,I,P){"use strict";P.d(I,{N:function(){return T}});let _=Object.prototype.toString;function T(E){let I=_.call(E);return I.endsWith("Array]")&&!I.includes("Big")}},7811:function(E){"use strict";var I=Object.prototype.toString;E.exports=function(E){return"Array"===I.call(E).substr(-6,5)}},1867:function(E){"use strict";E.exports=Number.isFinite||function(E){return!("number"!=typeof E||E!=E||E===1/0||E===-1/0)}},8336:function(E,I,P){var _=P(1867);E.exports=Number.isInteger||function(E){return"number"==typeof E&&_(E)&&Math.floor(E)===E}},7870:function(E,I,P){var _=P(587),T=P(914);E.exports={encode:_,decode:T}},914:function(E,I,P){var _=P(8764).lW,T=function(){"use strict";var E=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),I=4017,P=799,_=3406,T=2276,L=1567,N=3784,F=5793,O=2896;function $(){}function Z(E,I){for(var P,_,T=0,L=[],N=16;N>0&&!E[N-1];)N--;L.push({children:[],index:0});var F,O=L[0];for(P=0;P<N;P++){for(_=0;_<E[P];_++){for((O=L.pop()).children[O.index]=I[T];O.index>0;){if(0===L.length)throw Error("Could not recreate Huffman Table");O=L.pop()}for(O.index++,L.push(O);L.length<=P;)L.push(F={children:[],index:0}),O.children[O.index]=F.children,O=F;T++}P+1<N&&(L.push(F={children:[],index:0}),O.children[O.index]=F.children,O=F)}return L[0].children}function W(I,P,_,T,L,N,F,O,$,Z){_.precision,_.samplesPerLine,_.scanLines;var W,J,Q,te=_.mcusPerLine,ti=_.progressive;_.maxH,_.maxV;var tn=P,ta=0,th=0;function tu(){if(th>0)return ta>>--th&1;if(255==(ta=I[P++])){var E=I[P++];if(E)throw Error("unexpected marker: "+(ta<<8|E).toString(16))}return th=7,ta>>>7}function tf(E){for(var I,P=E;null!==(I=tu());){if("number"==typeof(P=P[I]))return P;if("object"!=typeof P)throw Error("invalid huffman sequence")}return null}function tc(E){for(var I=0;E>0;){var P=tu();if(null===P)return;I=I<<1|P,E--}return I}function td(E){var I=tc(E);return I>=1<<E-1?I:I+(-1<<E)+1}function tm(I,P){var _=tf(I.huffmanTableDC),T=0===_?0:td(_);P[0]=I.pred+=T;for(var L=1;L<64;){var N=tf(I.huffmanTableAC),F=15&N,O=N>>4;if(0===F){if(O<15)break;L+=16;continue}P[E[L+=O]]=td(F),L++}}function tp(E,I){var P=tf(E.huffmanTableDC),_=0===P?0:td(P)<<$;I[0]=E.pred+=_}function tg(E,I){I[0]|=tu()<<$}var tw=0;function tb(I,P){if(tw>0){tw--;return}for(var _=N,T=F;_<=T;){var L=tf(I.huffmanTableAC),O=15&L,Z=L>>4;if(0===O){if(Z<15){tw=tc(Z)+(1<<Z)-1;break}_+=16;continue}P[E[_+=Z]]=td(O)*(1<<$),_++}}var ty,tv=0;function tx(I,P){for(var _=N,T=F,L=0;_<=T;){var O=E[_],Z=P[O]<0?-1:1;switch(tv){case 0:var W=tf(I.huffmanTableAC),J=15&W,L=W>>4;if(0===J)L<15?(tw=tc(L)+(1<<L),tv=4):(L=16,tv=1);else{if(1!==J)throw Error("invalid ACn encoding");ty=td(J),tv=L?2:3}continue;case 1:case 2:P[O]?P[O]+=(tu()<<$)*Z:0==--L&&(tv=2==tv?3:0);break;case 3:P[O]?P[O]+=(tu()<<$)*Z:(P[O]=ty<<$,tv=0);break;case 4:P[O]&&(P[O]+=(tu()<<$)*Z)}_++}4===tv&&0==--tw&&(tv=0)}function tM(E,I,P,_,T){var L=P/te|0,N=P%te,F=L*E.v+_,O=N*E.h+T;void 0===E.blocks[F]&&Z.tolerantDecoding||I(E,E.blocks[F][O])}function tk(E,I,P){var _=P/E.blocksPerLine|0,T=P%E.blocksPerLine;void 0===E.blocks[_]&&Z.tolerantDecoding||I(E,E.blocks[_][T])}var tE=T.length;t_=ti?0===N?0===O?tp:tg:0===O?tb:tx:tm;var tA,tS,tI,tP,tD,t_,tC,tB=0;for(W=1==tE?T[0].blocksPerLine*T[0].blocksPerColumn:te*_.mcusPerColumn,L||(L=W);tB<W;){for(tS=0;tS<tE;tS++)T[tS].pred=0;if(tw=0,1==tE)for(tD=0,tA=T[0];tD<L;tD++)tk(tA,t_,tB),tB++;else for(tD=0;tD<L;tD++){for(tS=0;tS<tE;tS++)for(tI=0,J=(tA=T[tS]).h,Q=tA.v;tI<Q;tI++)for(tP=0;tP<J;tP++)tM(tA,t_,tB,tI,tP);if(++tB===W)break}if(tB===W)do{if(255===I[P]&&0!==I[P+1])break;P+=1}while(P<I.length-2);if(th=0,(tC=I[P]<<8|I[P+1])<65280)throw Error("marker was not found");if(tC>=65488&&tC<=65495)P+=2;else break}return P-tn}function J(E,$){var Z,W,J=[],Q=$.blocksPerLine,te=$.blocksPerColumn,ti=Q<<3,ta=new Int32Array(64),th=new Uint8Array(64);function tu(E,Z,W){var J,Q,te,ti,tn,ta,th,tu,tf,tc,td=$.quantizationTable,tm=W;for(tc=0;tc<64;tc++)tm[tc]=E[tc]*td[tc];for(tc=0;tc<8;++tc){var tp=8*tc;if(0==tm[1+tp]&&0==tm[2+tp]&&0==tm[3+tp]&&0==tm[4+tp]&&0==tm[5+tp]&&0==tm[6+tp]&&0==tm[7+tp]){tf=F*tm[0+tp]+512>>10,tm[0+tp]=tf,tm[1+tp]=tf,tm[2+tp]=tf,tm[3+tp]=tf,tm[4+tp]=tf,tm[5+tp]=tf,tm[6+tp]=tf,tm[7+tp]=tf;continue}J=F*tm[0+tp]+128>>8,Q=F*tm[4+tp]+128>>8,te=tm[2+tp],ti=tm[6+tp],tn=O*(tm[1+tp]-tm[7+tp])+128>>8,tu=O*(tm[1+tp]+tm[7+tp])+128>>8,ta=tm[3+tp]<<4,th=tm[5+tp]<<4,tf=J-Q+1>>1,J=J+Q+1>>1,Q=tf,tf=te*N+ti*L+128>>8,te=te*L-ti*N+128>>8,ti=tf,tf=tn-th+1>>1,tn=tn+th+1>>1,th=tf,tf=tu+ta+1>>1,ta=tu-ta+1>>1,tu=tf,tf=J-ti+1>>1,J=J+ti+1>>1,ti=tf,tf=Q-te+1>>1,Q=Q+te+1>>1,te=tf,tf=tn*T+tu*_+2048>>12,tn=tn*_-tu*T+2048>>12,tu=tf,tf=ta*P+th*I+2048>>12,ta=ta*I-th*P+2048>>12,th=tf,tm[0+tp]=J+tu,tm[7+tp]=J-tu,tm[1+tp]=Q+th,tm[6+tp]=Q-th,tm[2+tp]=te+ta,tm[5+tp]=te-ta,tm[3+tp]=ti+tn,tm[4+tp]=ti-tn}for(tc=0;tc<8;++tc){var tg=tc;if(0==tm[8+tg]&&0==tm[16+tg]&&0==tm[24+tg]&&0==tm[32+tg]&&0==tm[40+tg]&&0==tm[48+tg]&&0==tm[56+tg]){tf=F*W[tc+0]+8192>>14,tm[0+tg]=tf,tm[8+tg]=tf,tm[16+tg]=tf,tm[24+tg]=tf,tm[32+tg]=tf,tm[40+tg]=tf,tm[48+tg]=tf,tm[56+tg]=tf;continue}J=F*tm[0+tg]+2048>>12,Q=F*tm[32+tg]+2048>>12,te=tm[16+tg],ti=tm[48+tg],tn=O*(tm[8+tg]-tm[56+tg])+2048>>12,tu=O*(tm[8+tg]+tm[56+tg])+2048>>12,ta=tm[24+tg],th=tm[40+tg],tf=J-Q+1>>1,J=J+Q+1>>1,Q=tf,tf=te*N+ti*L+2048>>12,te=te*L-ti*N+2048>>12,ti=tf,tf=tn-th+1>>1,tn=tn+th+1>>1,th=tf,tf=tu+ta+1>>1,ta=tu-ta+1>>1,tu=tf,tf=J-ti+1>>1,J=J+ti+1>>1,ti=tf,tf=Q-te+1>>1,Q=Q+te+1>>1,te=tf,tf=tn*T+tu*_+2048>>12,tn=tn*_-tu*T+2048>>12,tu=tf,tf=ta*P+th*I+2048>>12,ta=ta*I-th*P+2048>>12,th=tf,tm[0+tg]=J+tu,tm[56+tg]=J-tu,tm[8+tg]=Q+th,tm[48+tg]=Q-th,tm[16+tg]=te+ta,tm[40+tg]=te-ta,tm[24+tg]=ti+tn,tm[32+tg]=ti-tn}for(tc=0;tc<64;++tc){var tw=128+(tm[tc]+8>>4);Z[tc]=tw<0?0:tw>255?255:tw}}tn(ti*te*8);for(var tf=0;tf<te;tf++){var tc=tf<<3;for(Z=0;Z<8;Z++)J.push(new Uint8Array(ti));for(var td=0;td<Q;td++){tu($.blocks[tf][td],th,ta);var tm=0,tp=td<<3;for(W=0;W<8;W++){var tg=J[tc+W];for(Z=0;Z<8;Z++)tg[tp+Z]=th[tm++]}}}return J}function Q(E){return E<0?0:E>255?255:E}$.prototype={load:function(E){var I=new XMLHttpRequest;I.open("GET",E,!0),I.responseType="arraybuffer",I.onload=(function(){var E=new Uint8Array(I.response||I.mozResponseArrayBuffer);this.parse(E),this.onload&&this.onload()}).bind(this),I.send(null)},parse:function(I){var P=1e6*this.opts.maxResolutionInMP,_=0;function T(){var E=I[_]<<8|I[_+1];return _+=2,E}function L(){var E=T(),P=I.subarray(_,_+E-2);return _+=P.length,P}function N(E){var I,P,_=1,T=1;for(P in E.components)E.components.hasOwnProperty(P)&&(I=E.components[P],_<I.h&&(_=I.h),T<I.v&&(T=I.v));var L=Math.ceil(E.samplesPerLine/8/_),N=Math.ceil(E.scanLines/8/T);for(P in E.components)if(E.components.hasOwnProperty(P)){I=E.components[P];var F=Math.ceil(Math.ceil(E.samplesPerLine/8)*I.h/_),O=Math.ceil(Math.ceil(E.scanLines/8)*I.v/T),$=L*I.h,Z=N*I.v,W=[];tn(256*(Z*$));for(var J=0;J<Z;J++){for(var Q=[],te=0;te<$;te++)Q.push(new Int32Array(64));W.push(Q)}I.blocksPerLine=F,I.blocksPerColumn=O,I.blocks=W}E.maxH=_,E.maxV=T,E.mcusPerLine=L,E.mcusPerColumn=N}I.length;var F=null,O=null,$=[],Q=[],te=[],ti=[],ta=T(),th=-1;if(this.comments=[],65496!=ta)throw Error("SOI not found");for(ta=T();65497!=ta;){switch(ta){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var tu=L();if(65534===ta){var tf=String.fromCharCode.apply(null,tu);this.comments.push(tf)}65504===ta&&74===tu[0]&&70===tu[1]&&73===tu[2]&&70===tu[3]&&0===tu[4]&&(F={version:{major:tu[5],minor:tu[6]},densityUnits:tu[7],xDensity:tu[8]<<8|tu[9],yDensity:tu[10]<<8|tu[11],thumbWidth:tu[12],thumbHeight:tu[13],thumbData:tu.subarray(14,14+3*tu[12]*tu[13])}),65505===ta&&69===tu[0]&&120===tu[1]&&105===tu[2]&&102===tu[3]&&0===tu[4]&&(this.exifBuffer=tu.subarray(5,tu.length)),65518===ta&&65===tu[0]&&100===tu[1]&&111===tu[2]&&98===tu[3]&&101===tu[4]&&0===tu[5]&&(O={version:tu[6],flags0:tu[7]<<8|tu[8],flags1:tu[9]<<8|tu[10],transformCode:tu[11]});break;case 65499:for(var tc=T()+_-2;_<tc;){var td=I[_++];tn(256);var tm=new Int32Array(64);if(td>>4==0)for(tv=0;tv<64;tv++){var tp=E[tv];tm[tp]=I[_++]}else if(td>>4==1)for(tv=0;tv<64;tv++){var tp=E[tv];tm[tp]=T()}else throw Error("DQT: invalid table spec");$[15&td]=tm}break;case 65472:case 65473:case 65474:T(),(tw={}).extended=65473===ta,tw.progressive=65474===ta,tw.precision=I[_++],tw.scanLines=T(),tw.samplesPerLine=T(),tw.components={},tw.componentsOrder=[];var tg=tw.scanLines*tw.samplesPerLine;if(tg>P)throw Error(`maxResolutionInMP limit exceeded by ${Math.ceil((tg-P)/1e6)}MP`);var tw,tb,ty,tv,tx,tM=I[_++];for(ty=0;ty<tM;ty++){tx=I[_];var tk=I[_+1]>>4,tE=15&I[_+1],tA=I[_+2];if(tk<=0||tE<=0)throw Error("Invalid sampling factor, expected values above 0");tw.componentsOrder.push(tx),tw.components[tx]={h:tk,v:tE,quantizationIdx:tA},_+=3}N(tw),Q.push(tw);break;case 65476:var tS=T();for(ty=2;ty<tS;){var tI=I[_++],tP=new Uint8Array(16),tD=0;for(tv=0;tv<16;tv++,_++)tD+=tP[tv]=I[_];tn(16+tD);var t_=new Uint8Array(tD);for(tv=0;tv<tD;tv++,_++)t_[tv]=I[_];ty+=17+tD,(tI>>4==0?ti:te)[15&tI]=Z(tP,t_)}break;case 65501:T(),tb=T();break;case 65500:T(),T();break;case 65498:T();var tC,tB=I[_++],tT=[];for(ty=0;ty<tB;ty++){tC=tw.components[I[_++]];var tR=I[_++];tC.huffmanTableDC=ti[tR>>4],tC.huffmanTableAC=te[15&tR],tT.push(tC)}var tU=I[_++],tL=I[_++],tN=I[_++],tF=W(I,_,tw,tT,tb,tU,tL,tN>>4,15&tN,this.opts);_+=tF;break;case 65535:255!==I[_]&&_--;break;default:if(255==I[_-3]&&I[_-2]>=192&&I[_-2]<=254){_-=3;break}if(224===ta||225==ta){if(-1!==th)throw Error(`first unknown JPEG marker at offset ${th.toString(16)}, second unknown JPEG marker ${ta.toString(16)} at offset ${(_-1).toString(16)}`);th=_-1;let E=T();if(255===I[_+E-2]){_+=E-2;break}}throw Error("unknown JPEG marker "+ta.toString(16))}ta=T()}if(1!=Q.length)throw Error("only single frame JPEGs supported");for(var ty=0;ty<Q.length;ty++){var tO=Q[ty].components;for(var tv in tO)tO[tv].quantizationTable=$[tO[tv].quantizationIdx],delete tO[tv].quantizationIdx}this.width=tw.samplesPerLine,this.height=tw.scanLines,this.jfif=F,this.adobe=O,this.components=[];for(var ty=0;ty<tw.componentsOrder.length;ty++){var tC=tw.components[tw.componentsOrder[ty]];this.components.push({lines:J(tw,tC),scaleX:tC.h/tw.maxH,scaleY:tC.v/tw.maxV})}},getData:function(E,I){var P,_,T,L,N,F,O,$,Z,W,J,te,ti,ta,th,tu,tf,tc,td,tm,tp,tg=this.width/E,tw=this.height/I,tb=0,ty=E*I*this.components.length;tn(ty);var tv=new Uint8Array(ty);switch(this.components.length){case 1:for(W=0,P=this.components[0];W<I;W++)for(Z=0,N=P.lines[0|W*P.scaleY*tw];Z<E;Z++)J=N[0|Z*P.scaleX*tg],tv[tb++]=J;break;case 2:for(W=0,P=this.components[0],_=this.components[1];W<I;W++)for(Z=0,N=P.lines[0|W*P.scaleY*tw],F=_.lines[0|W*_.scaleY*tw];Z<E;Z++)J=N[0|Z*P.scaleX*tg],tv[tb++]=J,J=F[0|Z*_.scaleX*tg],tv[tb++]=J;break;case 3:for(tp=!0,this.adobe&&this.adobe.transformCode?tp=!0:void 0!==this.opts.colorTransform&&(tp=!!this.opts.colorTransform),P=this.components[0],_=this.components[1],T=this.components[2],W=0;W<I;W++)for(Z=0,N=P.lines[0|W*P.scaleY*tw],F=_.lines[0|W*_.scaleY*tw],O=T.lines[0|W*T.scaleY*tw];Z<E;Z++)tp?(J=N[0|Z*P.scaleX*tg],te=F[0|Z*_.scaleX*tg],tc=Q(J+1.402*((ti=O[0|Z*T.scaleX*tg])-128)),td=Q(J-.3441363*(te-128)-.71413636*(ti-128)),tm=Q(J+1.772*(te-128))):(tc=N[0|Z*P.scaleX*tg],td=F[0|Z*_.scaleX*tg],tm=O[0|Z*T.scaleX*tg]),tv[tb++]=tc,tv[tb++]=td,tv[tb++]=tm;break;case 4:if(!this.adobe)throw Error("Unsupported color mode (4 components)");for(tp=!1,this.adobe&&this.adobe.transformCode?tp=!0:void 0!==this.opts.colorTransform&&(tp=!!this.opts.colorTransform),P=this.components[0],_=this.components[1],T=this.components[2],L=this.components[3],W=0;W<I;W++)for(Z=0,N=P.lines[0|W*P.scaleY*tw],F=_.lines[0|W*_.scaleY*tw],O=T.lines[0|W*T.scaleY*tw],$=L.lines[0|W*L.scaleY*tw];Z<E;Z++)tp?(J=N[0|Z*P.scaleX*tg],te=F[0|Z*_.scaleX*tg],ti=O[0|Z*T.scaleX*tg],ta=$[0|Z*L.scaleX*tg],th=255-Q(J+1.402*(ti-128)),tu=255-Q(J-.3441363*(te-128)-.71413636*(ti-128)),tf=255-Q(J+1.772*(te-128))):(th=N[0|Z*P.scaleX*tg],tu=F[0|Z*_.scaleX*tg],tf=O[0|Z*T.scaleX*tg],ta=$[0|Z*L.scaleX*tg]),tv[tb++]=255-th,tv[tb++]=255-tu,tv[tb++]=255-tf,tv[tb++]=255-ta;break;default:throw Error("Unsupported color mode")}return tv},copyToImageData:function(E,I){var P,_,T,L,N,F,O,$,Z,W=E.width,J=E.height,te=E.data,ti=this.getData(W,J),tn=0,ta=0;switch(this.components.length){case 1:for(Z=0;Z<J;Z++)for($=0;$<W;$++)P=ti[tn++],te[ta++]=P,te[ta++]=P,te[ta++]=P,I&&(te[ta++]=255);break;case 3:for(Z=0;Z<J;Z++)for($=0;$<W;$++)N=ti[tn++],F=ti[tn++],O=ti[tn++],te[ta++]=N,te[ta++]=F,te[ta++]=O,I&&(te[ta++]=255);break;case 4:for(Z=0;Z<J;Z++)for($=0;$<W;$++)T=ti[tn++],L=ti[tn++],P=ti[tn++],N=255-Q(T*(1-(_=ti[tn++])/255)+_),F=255-Q(L*(1-_/255)+_),O=255-Q(P*(1-_/255)+_),te[ta++]=N,te[ta++]=F,te[ta++]=O,I&&(te[ta++]=255);break;default:throw Error("Unsupported color mode")}}};var te=0,ti=0;function tn(E=0){var I=te+E;if(I>ti)throw Error(`maxMemoryUsageInMB limit exceeded by at least ${Math.ceil((I-ti)/1024/1024)}MB`);te=I}return $.resetMaxMemoryUsage=function(E){te=0,ti=E},$.getBytesAllocated=function(){return te},$.requestMemoryAllocation=tn,$}();function L(E,I={}){var P={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512,...I},L=new Uint8Array(E),N=new T;N.opts=P,T.resetMaxMemoryUsage(1048576*P.maxMemoryUsageInMB),N.parse(L);var F=P.formatAsRGBA?4:3,O=N.width*N.height*F;try{T.requestMemoryAllocation(O);var $={width:N.width,height:N.height,exifBuffer:N.exifBuffer,data:P.useTArray?new Uint8Array(O):_.alloc(O)};N.comments.length>0&&($.comments=N.comments)}catch(E){if(E instanceof RangeError)throw Error("Could not allocate enough memory for the image. Required: "+O);if(E instanceof ReferenceError&&"Buffer is not defined"===E.message)throw Error("Buffer is not globally defined in this environment. Consider setting useTArray to true");throw E}return N.copyToImageData($,P.formatAsRGBA),$}E.exports=L},587:function(E,I,P){var _=P(8764).lW;function T(E){var I,P,T,L,N,F=Math.floor,O=Array(64),$=Array(64),Z=Array(64),W=Array(64),J=Array(65535),Q=Array(65535),te=Array(64),ti=Array(64),tn=[],ta=0,th=7,tu=Array(64),tf=Array(64),tc=Array(64),td=Array(256),tm=Array(2048),tp=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],tg=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],tw=[0,1,2,3,4,5,6,7,8,9,10,11],tb=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],ty=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],tv=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],tx=[0,1,2,3,4,5,6,7,8,9,10,11],tM=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],tk=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function tE(E){for(var I=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],P=0;P<64;P++){var _=F((I[P]*E+50)/100);_<1?_=1:_>255&&(_=255),O[tp[P]]=_}for(var T=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],L=0;L<64;L++){var N=F((T[L]*E+50)/100);N<1?N=1:N>255&&(N=255),$[tp[L]]=N}for(var J=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Q=0,te=0;te<8;te++)for(var ti=0;ti<8;ti++)Z[Q]=1/(O[tp[Q]]*J[te]*J[ti]*8),W[Q]=1/($[tp[Q]]*J[te]*J[ti]*8),Q++}function tA(E,I){for(var P=0,_=0,T=[],L=1;L<=16;L++){for(var N=1;N<=E[L];N++)T[I[_]]=[],T[I[_]][0]=P,T[I[_]][1]=L,_++,P++;P*=2}return T}function tS(){I=tA(tg,tw),P=tA(tv,tx),T=tA(tb,ty),L=tA(tM,tk)}function tI(){for(var E=1,I=2,P=1;P<=15;P++){for(var _=E;_<I;_++)Q[32767+_]=P,J[32767+_]=[],J[32767+_][1]=P,J[32767+_][0]=_;for(var T=-(I-1);T<=-E;T++)Q[32767+T]=P,J[32767+T]=[],J[32767+T][1]=P,J[32767+T][0]=I-1+T;E<<=1,I<<=1}}function tP(){for(var E=0;E<256;E++)tm[E]=19595*E,tm[E+256>>0]=38470*E,tm[E+512>>0]=7471*E+32768,tm[E+768>>0]=-11059*E,tm[E+1024>>0]=-21709*E,tm[E+1280>>0]=32768*E+8421375,tm[E+1536>>0]=-27439*E,tm[E+1792>>0]=-5329*E}function tD(E){for(var I=E[0],P=E[1]-1;P>=0;)I&1<<P&&(ta|=1<<th),P--,--th<0&&(255==ta?(t_(255),t_(0)):t_(ta),th=7,ta=0)}function t_(E){tn.push(E)}function tC(E){t_(E>>8&255),t_(255&E)}function tB(E,I){var P,_,T,L,N,F,O,$,Z,W,J=0,Q=8,ti=64;for(Z=0;Z<Q;++Z){P=E[J],_=E[J+1],T=E[J+2],L=E[J+3],N=E[J+4],F=E[J+5],O=E[J+6];var tn=P+($=E[J+7]),ta=P-$,th=_+O,tu=_-O,tf=T+F,tc=T-F,td=L+N,tm=L-N,tp=tn+td,tg=tn-td,tw=th+tf,tb=th-tf;E[J]=tp+tw,E[J+4]=tp-tw;var ty=(tb+tg)*.707106781;E[J+2]=tg+ty,E[J+6]=tg-ty,tp=tm+tc,tw=tc+tu;var tv=(tp-(tb=tu+ta))*.382683433,tx=.5411961*tp+tv,tM=1.306562965*tb+tv,tk=.707106781*tw,tE=ta+tk,tA=ta-tk;E[J+5]=tA+tx,E[J+3]=tA-tx,E[J+1]=tE+tM,E[J+7]=tE-tM,J+=8}for(Z=0,J=0;Z<Q;++Z){P=E[J],_=E[J+8],T=E[J+16],L=E[J+24],N=E[J+32],F=E[J+40],O=E[J+48];var tS=P+($=E[J+56]),tI=P-$,tP=_+O,tD=_-O,t_=T+F,tC=T-F,tB=L+N,tT=L-N,tR=tS+tB,tU=tS-tB,tL=tP+t_,tN=tP-t_;E[J]=tR+tL,E[J+32]=tR-tL;var tF=(tN+tU)*.707106781;E[J+16]=tU+tF,E[J+48]=tU-tF,tR=tT+tC,tL=tC+tD;var tO=(tR-(tN=tD+tI))*.382683433,tY=.5411961*tR+tO,tV=1.306562965*tN+tO,tX=.707106781*tL,tz=tI+tX,tG=tI-tX;E[J+40]=tG+tY,E[J+24]=tG-tY,E[J+8]=tz+tV,E[J+56]=tz-tV,J++}for(Z=0;Z<ti;++Z)W=E[Z]*I[Z],te[Z]=W>0?W+.5|0:W-.5|0;return te}function tT(){tC(65504),tC(16),t_(74),t_(70),t_(73),t_(70),t_(0),t_(1),t_(1),t_(0),tC(1),tC(1),t_(0),t_(0)}function tR(E){if(E){tC(65505),69===E[0]&&120===E[1]&&105===E[2]&&102===E[3]?tC(E.length+2):(tC(E.length+5+2),t_(69),t_(120),t_(105),t_(102),t_(0));for(var I=0;I<E.length;I++)t_(E[I])}}function tU(E,I){tC(65472),tC(17),t_(8),tC(I),tC(E),t_(3),t_(1),t_(17),t_(0),t_(2),t_(17),t_(1),t_(3),t_(17),t_(1)}function tL(){tC(65499),tC(132),t_(0);for(var E=0;E<64;E++)t_(O[E]);t_(1);for(var I=0;I<64;I++)t_($[I])}function tN(){tC(65476),tC(418),t_(0);for(var E=0;E<16;E++)t_(tg[E+1]);for(var I=0;I<=11;I++)t_(tw[I]);t_(16);for(var P=0;P<16;P++)t_(tb[P+1]);for(var _=0;_<=161;_++)t_(ty[_]);t_(1);for(var T=0;T<16;T++)t_(tv[T+1]);for(var L=0;L<=11;L++)t_(tx[L]);t_(17);for(var N=0;N<16;N++)t_(tM[N+1]);for(var F=0;F<=161;F++)t_(tk[F])}function tF(E){void 0!==E&&E.constructor===Array&&E.forEach(E=>{if("string"==typeof E){tC(65534);var I,P=E.length;for(tC(P+2),I=0;I<P;I++)t_(E.charCodeAt(I))}})}function tO(){tC(65498),tC(12),t_(3),t_(1),t_(0),t_(2),t_(17),t_(3),t_(17),t_(0),t_(63),t_(0)}function tY(E,I,P,_,T){for(var L,N,F=T[0],O=T[240],$=16,Z=63,W=64,te=tB(E,I),tn=0;tn<W;++tn)ti[tp[tn]]=te[tn];var ta=ti[0]-P;P=ti[0],0==ta?tD(_[0]):(tD(_[Q[L=32767+ta]]),tD(J[L]));for(var th=63;th>0&&0==ti[th];th--);if(0==th)return tD(F),P;for(var tu=1;tu<=th;){for(var tf=tu;0==ti[tu]&&tu<=th;++tu);var tc=tu-tf;if(tc>=$){N=tc>>4;for(var td=1;td<=N;++td)tD(O);tc&=15}tD(T[(tc<<4)+Q[L=32767+ti[tu]]]),tD(J[L]),tu++}return th!=Z&&tD(F),P}function tV(){for(var E=String.fromCharCode,I=0;I<256;I++)td[I]=E(I)}function tX(E){if(E<=0&&(E=1),E>100&&(E=100),N!=E){var I=0;I=E<50?Math.floor(5e3/E):Math.floor(200-2*E),tE(I),N=E}}this.encode=function(E,N){new Date().getTime(),N&&tX(N),tn=[],ta=0,th=7,tC(65496),tT(),tF(E.comments),tR(E.exifBuffer),tL(),tU(E.width,E.height),tN(),tO();var F=0,O=0,$=0;ta=0,th=7,this.encode.displayName="_encode_";for(var J,Q,te,ti,td,tp,tg,tw,tb,ty=E.data,tv=E.width,tx=E.height,tM=4*tv,tk=0;tk<tx;){for(tb=0;tb<tM;){for(tw=0,td=ti=tM*tk+tb,tp=-1,tg=0;tw<64;tw++)td=ti+(tg=tw>>3)*tM+(tp=(7&tw)*4),tk+tg>=tx&&(td-=tM*(tk+1+tg-tx)),tb+tp>=tM&&(td-=tb+tp-tM+4),J=ty[td++],Q=ty[td++],te=ty[td++],tu[tw]=(tm[J]+tm[Q+256>>0]+tm[te+512>>0]>>16)-128,tf[tw]=(tm[J+768>>0]+tm[Q+1024>>0]+tm[te+1280>>0]>>16)-128,tc[tw]=(tm[J+1280>>0]+tm[Q+1536>>0]+tm[te+1792>>0]>>16)-128;F=tY(tu,Z,F,I,T),O=tY(tf,W,O,P,L),$=tY(tc,W,$,P,L),tb+=32}tk+=8}if(th>=0){var tE=[];tE[1]=th+1,tE[0]=(1<<th+1)-1,tD(tE)}return tC(65497),_.from(tn)},function(){new Date().getTime(),E||(E=50),tV(),tS(),tI(),tP(),tX(E),new Date().getTime()}()}function L(E,I){return void 0===I&&(I=50),{data:new T(I).encode(E,I),width:E.width,height:E.height}}E.exports=L},5307:function(E){!function(I){E.exports=I()}(function(){return(function E(I,P,_){function T(N,F){if(!P[N]){if(!I[N]){var O=void 0;if(!F&&O)return require(N,!0);if(L)return L(N,!0);var $=Error("Cannot find module '"+N+"'");throw $.code="MODULE_NOT_FOUND",$}var Z=P[N]={exports:{}};I[N][0].call(Z.exports,function(E){return T(I[N][1][E]||E)},Z,Z.exports,E,I,P,_)}return P[N].exports}for(var L=void 0,N=0;N<_.length;N++)T(_[N]);return T})({1:[function(E,I,P){var _,T,L,N,F,O=function(E,I){for(var P in I)$.call(I,P)&&(E[P]=I[P]);function _(){this.constructor=E}return _.prototype=I.prototype,E.prototype=new _,E.__super__=I.prototype,E},$={}.hasOwnProperty;_=E("./PriorityQueue/AbstractPriorityQueue"),T=E("./PriorityQueue/ArrayStrategy"),N=E("./PriorityQueue/BinaryHeapStrategy"),L=E("./PriorityQueue/BHeapStrategy"),(F=function(E){function I(E){E||(E={}),E.strategy||(E.strategy=N),E.comparator||(E.comparator=function(E,I){return(E||0)-(I||0)}),I.__super__.constructor.call(this,E)}return O(I,E),I}(_)).ArrayStrategy=T,F.BinaryHeapStrategy=N,F.BHeapStrategy=L,I.exports=F},{"./PriorityQueue/AbstractPriorityQueue":2,"./PriorityQueue/ArrayStrategy":3,"./PriorityQueue/BHeapStrategy":4,"./PriorityQueue/BinaryHeapStrategy":5}],2:[function(E,I,P){I.exports=function(){function E(E){var I;if((null!=E?E.strategy:void 0)==null)throw"Must pass options.strategy, a strategy";if((null!=E?E.comparator:void 0)==null)throw"Must pass options.comparator, a comparator";this.priv=new E.strategy(E),this.length=(null!=E&&null!=(I=E.initialValues)?I.length:void 0)||0}return E.prototype.queue=function(E){this.length++,this.priv.queue(E)},E.prototype.dequeue=function(E){if(!this.length)throw"Empty queue";return this.length--,this.priv.dequeue()},E.prototype.peek=function(E){if(!this.length)throw"Empty queue";return this.priv.peek()},E.prototype.clear=function(){return this.length=0,this.priv.clear()},E}()},{}],3:[function(E,I,P){var _;_=function(E,I,P){var _,T,L;for(T=0,_=E.length;T<_;)P(E[L=T+_>>>1],I)>=0?T=L+1:_=L;return T},I.exports=function(){function E(E){var I;this.options=E,this.comparator=this.options.comparator,this.data=(null!=(I=this.options.initialValues)?I.slice(0):void 0)||[],this.data.sort(this.comparator).reverse()}return E.prototype.queue=function(E){var I;I=_(this.data,E,this.comparator),this.data.splice(I,0,E)},E.prototype.dequeue=function(){return this.data.pop()},E.prototype.peek=function(){return this.data[this.data.length-1]},E.prototype.clear=function(){this.data.length=0},E}()},{}],4:[function(E,I,P){I.exports=function(){function E(E){var I,P,_,T,L,N,F,O,$;for(this.comparator=(null!=E?E.comparator:void 0)||function(E,I){return E-I},this.pageSize=(null!=E?E.pageSize:void 0)||512,this.length=0,O=0;1<<O<this.pageSize;)O+=1;if(1<<O!==this.pageSize)throw"pageSize must be a power of two";for(this._shift=O,this._emptyMemoryPageTemplate=I=[],P=_=0,N=this.pageSize;0<=N?_<N:_>N;P=0<=N?++_:--_)I.push(null);if(this._memory=[],this._mask=this.pageSize-1,E.initialValues)for(T=0,L=(F=E.initialValues).length;T<L;T++)$=F[T],this.queue($)}return E.prototype.queue=function(E){this.length+=1,this._write(this.length,E),this._bubbleUp(this.length,E)},E.prototype.dequeue=function(){var E,I;return E=this._read(1),I=this._read(this.length),this.length-=1,this.length>0&&(this._write(1,I),this._bubbleDown(1,I)),E},E.prototype.peek=function(){return this._read(1)},E.prototype.clear=function(){this.length=0,this._memory.length=0},E.prototype._write=function(E,I){var P;for(P=E>>this._shift;P>=this._memory.length;)this._memory.push(this._emptyMemoryPageTemplate.slice(0));return this._memory[P][E&this._mask]=I},E.prototype._read=function(E){return this._memory[E>>this._shift][E&this._mask]},E.prototype._bubbleUp=function(E,I){var P,_,T,L;for(P=this.comparator;E>1&&(_=E&this._mask,E<this.pageSize||_>3?T=E&~this._mask|_>>1:_<2?(T=E-this.pageSize>>this._shift,T+=T&~(this._mask>>1),T|=this.pageSize>>1):T=E-2,!(0>P(L=this._read(T),I)));)this._write(T,I),this._write(E,L),E=T},E.prototype._bubbleDown=function(E,I){var P,_,T,L,N;for(N=this.comparator;E<this.length;)if(E>this._mask&&!(E&this._mask-1)?P=_=E+2:_=E&this.pageSize>>1?(P=(P=(E&~this._mask)>>1|E&this._mask>>1)+1<<this._shift)+1:(P=E+(E&this._mask))+1,P!==_&&_<=this.length){if(T=this._read(P),L=this._read(_),0>N(T,I)&&0>=N(T,L))this._write(P,I),this._write(E,T),E=P;else if(0>N(L,I))this._write(_,I),this._write(E,L),E=_;else break}else if(P<=this.length){if(0>N(T=this._read(P),I))this._write(P,I),this._write(E,T),E=P;else break}else break},E}()},{}],5:[function(E,I,P){I.exports=function(){function E(E){var I;this.comparator=(null!=E?E.comparator:void 0)||function(E,I){return E-I},this.length=0,this.data=(null!=(I=E.initialValues)?I.slice(0):void 0)||[],this._heapify()}return E.prototype._heapify=function(){var E,I,P;if(this.data.length>0)for(E=I=1,P=this.data.length;1<=P?I<P:I>P;E=1<=P?++I:--I)this._bubbleUp(E)},E.prototype.queue=function(E){this.data.push(E),this._bubbleUp(this.data.length-1)},E.prototype.dequeue=function(){var E,I;return I=this.data[0],E=this.data.pop(),this.data.length>0&&(this.data[0]=E,this._bubbleDown(0)),I},E.prototype.peek=function(){return this.data[0]},E.prototype.clear=function(){this.length=0,this.data.length=0},E.prototype._bubbleUp=function(E){for(var I,P;E>0;)if(I=E-1>>>1,0>this.comparator(this.data[E],this.data[I]))P=this.data[I],this.data[I]=this.data[E],this.data[E]=P,E=I;else break},E.prototype._bubbleDown=function(E){var I,P,_,T,L;for(I=this.data.length-1;;)if(T=(P=(E<<1)+1)+1,_=E,P<=I&&0>this.comparator(this.data[P],this.data[_])&&(_=P),T<=I&&0>this.comparator(this.data[T],this.data[_])&&(_=T),_!==E)L=this.data[_],this.data[_]=this.data[E],this.data[E]=L,E=_;else break},E}()},{}]},{},[1])(1)})},2229:function(E){!function(I,P){E.exports=P()}(0,function(){"use strict";function E(E){return"string"==typeof E||E instanceof String}var I=Number.isFinite||window.isFinite;function P(E){return I(E)}function _(E){return E}function T(E){var I={};return E.filter(function(E){return!I.hasOwnProperty(E)&&(I[E]=!0)})}function L(E,I){if(I.length!==E.length)return!1;for(var P=0;P<E.length;P++)if(I[P].compareArray&&!I[P].compareArray(E[P])||I[P]!==E[P])return!1;return!0}function N(E,I){Object.keys(I).forEach(function(P){E[P]=I[P]})}function F(){for(var E=1,I=0,P=0;P<arguments.length;P++){var _=arguments[P];I+=Z(_),E*=_}return 0!==I?$(E,I):E}function O(E,I){if(0===I)throw Error("Divide by zero");var P=Math.pow(10,Z(I));return F(E,P/(P*I))}function $(E,I){return Math.round(E*Math.pow(10,I))/Math.pow(10,I)}function Z(E){if(!isFinite(E))return 0;for(var I=0;E%1!=0;)E*=10,I++;return I}function W(){var E;if(!this)return E=Object.create(W.prototype),W.apply(E,arguments),E;E=Error.apply(this,arguments),this.name="QtyError",this.message=E.message,this.stack=E.stack}function J(E,I){throw new W("Incompatible units: "+E+" and "+I)}W.prototype=Object.create(Error.prototype,{constructor:{value:W}});var Q={"<googol>":[["googol"],1e100,"prefix"],"<kibi>":[["Ki","Kibi","kibi"],1024,"prefix"],"<mebi>":[["Mi","Mebi","mebi"],1048576,"prefix"],"<gibi>":[["Gi","Gibi","gibi"],1073741824,"prefix"],"<tebi>":[["Ti","Tebi","tebi"],1099511627776,"prefix"],"<pebi>":[["Pi","Pebi","pebi"],0x4000000000000,"prefix"],"<exi>":[["Ei","Exi","exi"],0x1000000000000000,"prefix"],"<zebi>":[["Zi","Zebi","zebi"],11805916207174113e5,"prefix"],"<yebi>":[["Yi","Yebi","yebi"],12089258196146292e8,"prefix"],"<yotta>":[["Y","Yotta","yotta"],1e24,"prefix"],"<zetta>":[["Z","Zetta","zetta"],1e21,"prefix"],"<exa>":[["E","Exa","exa"],1e18,"prefix"],"<peta>":[["P","Peta","peta"],1e15,"prefix"],"<tera>":[["T","Tera","tera"],1e12,"prefix"],"<giga>":[["G","Giga","giga"],1e9,"prefix"],"<mega>":[["M","Mega","mega"],1e6,"prefix"],"<kilo>":[["k","kilo"],1e3,"prefix"],"<hecto>":[["h","Hecto","hecto"],100,"prefix"],"<deca>":[["da","Deca","deca","deka"],10,"prefix"],"<deci>":[["d","Deci","deci"],.1,"prefix"],"<centi>":[["c","Centi","centi"],.01,"prefix"],"<milli>":[["m","Milli","milli"],.001,"prefix"],"<micro>":[["u","μ","\xb5","Micro","mc","micro"],1e-6,"prefix"],"<nano>":[["n","Nano","nano"],1e-9,"prefix"],"<pico>":[["p","Pico","pico"],1e-12,"prefix"],"<femto>":[["f","Femto","femto"],1e-15,"prefix"],"<atto>":[["a","Atto","atto"],1e-18,"prefix"],"<zepto>":[["z","Zepto","zepto"],1e-21,"prefix"],"<yocto>":[["y","Yocto","yocto"],1e-24,"prefix"],"<1>":[["1","<1>"],1,""],"<meter>":[["m","meter","meters","metre","metres"],1,"length",["<meter>"]],"<inch>":[["in","inch","inches",'"'],.0254,"length",["<meter>"]],"<foot>":[["ft","foot","feet","'"],.3048,"length",["<meter>"]],"<yard>":[["yd","yard","yards"],.9144,"length",["<meter>"]],"<mile>":[["mi","mile","miles"],1609.344,"length",["<meter>"]],"<naut-mile>":[["nmi","naut-mile"],1852,"length",["<meter>"]],"<league>":[["league","leagues"],4828,"length",["<meter>"]],"<furlong>":[["furlong","furlongs"],201.2,"length",["<meter>"]],"<rod>":[["rd","rod","rods"],5.029,"length",["<meter>"]],"<mil>":[["mil","mils"],254e-7,"length",["<meter>"]],"<angstrom>":[["ang","angstrom","angstroms"],1e-10,"length",["<meter>"]],"<fathom>":[["fathom","fathoms"],1.829,"length",["<meter>"]],"<pica>":[["pica","picas"],.00423333333,"length",["<meter>"]],"<point>":[["pt","point","points"],352777778e-12,"length",["<meter>"]],"<redshift>":[["z","red-shift","redshift"],1302773e20,"length",["<meter>"]],"<AU>":[["AU","astronomical-unit"],1495979e5,"length",["<meter>"]],"<light-second>":[["ls","light-second"],299792500,"length",["<meter>"]],"<light-minute>":[["lmin","light-minute"],1798755e4,"length",["<meter>"]],"<light-year>":[["ly","light-year"],9460528e9,"length",["<meter>"]],"<parsec>":[["pc","parsec","parsecs"],3085678e10,"length",["<meter>"]],"<datamile>":[["DM","datamile"],1828.8,"length",["<meter>"]],"<kilogram>":[["kg","kilogram","kilograms"],1,"mass",["<kilogram>"]],"<AMU>":[["u","AMU","amu"],1660538921e-36,"mass",["<kilogram>"]],"<dalton>":[["Da","Dalton","Daltons","dalton","daltons"],1660538921e-36,"mass",["<kilogram>"]],"<slug>":[["slug","slugs"],14.5939029,"mass",["<kilogram>"]],"<short-ton>":[["tn","ton","short-ton"],907.18474,"mass",["<kilogram>"]],"<metric-ton>":[["tonne","metric-ton"],1e3,"mass",["<kilogram>"]],"<carat>":[["ct","carat","carats"],2e-4,"mass",["<kilogram>"]],"<pound>":[["lbs","lb","pound","pounds","#"],.45359237,"mass",["<kilogram>"]],"<ounce>":[["oz","ounce","ounces"],.0283495231,"mass",["<kilogram>"]],"<gram>":[["g","gram","grams","gramme","grammes"],.001,"mass",["<kilogram>"]],"<grain>":[["grain","grains","gr"],6479891e-11,"mass",["<kilogram>"]],"<dram>":[["dram","drams","dr"],.0017718452,"mass",["<kilogram>"]],"<stone>":[["stone","stones","st"],6.35029318,"mass",["<kilogram>"]],"<hectare>":[["hectare"],1e4,"area",["<meter>","<meter>"]],"<acre>":[["acre","acres"],4046.85642,"area",["<meter>","<meter>"]],"<sqft>":[["sqft"],1,"area",["<foot>","<foot>"]],"<liter>":[["l","L","liter","liters","litre","litres"],.001,"volume",["<meter>","<meter>","<meter>"]],"<gallon>":[["gal","gallon","gallons"],.0037854118,"volume",["<meter>","<meter>","<meter>"]],"<gallon-imp>":[["galimp","gallon-imp","gallons-imp"],.00454609,"volume",["<meter>","<meter>","<meter>"]],"<quart>":[["qt","quart","quarts"],94635295e-11,"volume",["<meter>","<meter>","<meter>"]],"<pint>":[["pt","pint","pints"],473176475e-12,"volume",["<meter>","<meter>","<meter>"]],"<pint-imp>":[["ptimp","pint-imp","pints-imp"],56826125e-11,"volume",["<meter>","<meter>","<meter>"]],"<cup>":[["cu","cup","cups"],236588238e-12,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce>":[["floz","fluid-ounce","fluid-ounces"],295735297e-13,"volume",["<meter>","<meter>","<meter>"]],"<fluid-ounce-imp>":[["flozimp","floz-imp","fluid-ounce-imp","fluid-ounces-imp"],284130625e-13,"volume",["<meter>","<meter>","<meter>"]],"<tablespoon>":[["tb","tbsp","tbs","tablespoon","tablespoons"],147867648e-13,"volume",["<meter>","<meter>","<meter>"]],"<teaspoon>":[["tsp","teaspoon","teaspoons"],492892161e-14,"volume",["<meter>","<meter>","<meter>"]],"<bushel>":[["bu","bsh","bushel","bushels"],.035239072,"volume",["<meter>","<meter>","<meter>"]],"<oilbarrel>":[["bbl","oilbarrel","oilbarrels","oil-barrel","oil-barrels"],.158987294928,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel>":[["bl","bl-us","beerbarrel","beerbarrels","beer-barrel","beer-barrels"],.1173477658,"volume",["<meter>","<meter>","<meter>"]],"<beerbarrel-imp>":[["blimp","bl-imp","beerbarrel-imp","beerbarrels-imp","beer-barrel-imp","beer-barrels-imp"],.16365924,"volume",["<meter>","<meter>","<meter>"]],"<kph>":[["kph"],.277777778,"speed",["<meter>"],["<second>"]],"<mph>":[["mph"],.44704,"speed",["<meter>"],["<second>"]],"<knot>":[["kt","kn","kts","knot","knots"],.514444444,"speed",["<meter>"],["<second>"]],"<fps>":[["fps"],.3048,"speed",["<meter>"],["<second>"]],"<gee>":[["gee"],9.80665,"acceleration",["<meter>"],["<second>","<second>"]],"<Gal>":[["Gal"],.01,"acceleration",["<meter>"],["<second>","<second>"]],"<kelvin>":[["degK","kelvin"],1,"temperature",["<kelvin>"]],"<celsius>":[["degC","celsius","celsius","centigrade"],1,"temperature",["<kelvin>"]],"<fahrenheit>":[["degF","fahrenheit"],5/9,"temperature",["<kelvin>"]],"<rankine>":[["degR","rankine"],5/9,"temperature",["<kelvin>"]],"<temp-K>":[["tempK","temp-K"],1,"temperature",["<temp-K>"]],"<temp-C>":[["tempC","temp-C"],1,"temperature",["<temp-K>"]],"<temp-F>":[["tempF","temp-F"],5/9,"temperature",["<temp-K>"]],"<temp-R>":[["tempR","temp-R"],5/9,"temperature",["<temp-K>"]],"<second>":[["s","sec","secs","second","seconds"],1,"time",["<second>"]],"<minute>":[["min","mins","minute","minutes"],60,"time",["<second>"]],"<hour>":[["h","hr","hrs","hour","hours"],3600,"time",["<second>"]],"<day>":[["d","day","days"],86400,"time",["<second>"]],"<week>":[["wk","week","weeks"],604800,"time",["<second>"]],"<fortnight>":[["fortnight","fortnights"],1209600,"time",["<second>"]],"<year>":[["y","yr","year","years","annum"],31556926,"time",["<second>"]],"<decade>":[["decade","decades"],315569260,"time",["<second>"]],"<century>":[["century","centuries"],3155692600,"time",["<second>"]],"<pascal>":[["Pa","pascal","Pascal"],1,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<bar>":[["bar","bars"],1e5,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<mmHg>":[["mmHg"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inHg>":[["inHg"],3386.3881472,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<torr>":[["torr"],133.322368,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<atm>":[["atm","ATM","atmosphere","atmospheres"],101325,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<psi>":[["psi"],6894.76,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<cmh2o>":[["cmH2O","cmh2o"],98.0638,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<inh2o>":[["inH2O","inh2o"],249.082052,"pressure",["<kilogram>"],["<meter>","<second>","<second>"]],"<poise>":[["P","poise"],.1,"viscosity",["<kilogram>"],["<meter>","<second>"]],"<stokes>":[["St","stokes"],1e-4,"viscosity",["<meter>","<meter>"],["<second>"]],"<mole>":[["mol","mole"],1,"substance",["<mole>"]],"<molar>":[["M","molar"],1e3,"concentration",["<mole>"],["<meter>","<meter>","<meter>"]],"<wtpercent>":[["wt%","wtpercent"],10,"concentration",["<kilogram>"],["<meter>","<meter>","<meter>"]],"<katal>":[["kat","katal","Katal"],1,"activity",["<mole>"],["<second>"]],"<unit>":[["U","enzUnit","unit"],16667e-19,"activity",["<mole>"],["<second>"]],"<farad>":[["F","farad","Farad"],1,"capacitance",["<second>","<second>","<second>","<second>","<ampere>","<ampere>"],["<meter>","<meter>","<kilogram>"]],"<coulomb>":[["C","coulomb","Coulomb"],1,"charge",["<ampere>","<second>"]],"<Ah>":[["Ah"],3600,"charge",["<ampere>","<second>"]],"<ampere>":[["A","Ampere","ampere","amp","amps"],1,"current",["<ampere>"]],"<siemens>":[["S","Siemens","siemens"],1,"conductance",["<second>","<second>","<second>","<ampere>","<ampere>"],["<kilogram>","<meter>","<meter>"]],"<henry>":[["H","Henry","henry"],1,"inductance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>","<ampere>"]],"<volt>":[["V","Volt","volt","volts"],1,"potential",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>"]],"<ohm>":[["Ohm","ohm","Ω","Ω"],1,"resistance",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<second>","<ampere>","<ampere>"]],"<weber>":[["Wb","weber","webers"],1,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<tesla>":[["T","tesla","teslas"],1,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<gauss>":[["G","gauss"],1e-4,"magnetism",["<kilogram>"],["<second>","<second>","<ampere>"]],"<maxwell>":[["Mx","maxwell","maxwells"],1e-8,"magnetism",["<meter>","<meter>","<kilogram>"],["<second>","<second>","<ampere>"]],"<oersted>":[["Oe","oersted","oersteds"],250/Math.PI,"magnetism",["<ampere>"],["<meter>"]],"<joule>":[["J","joule","Joule","joules"],1,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<erg>":[["erg","ergs"],1e-7,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<btu>":[["BTU","btu","BTUs"],1055.056,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<calorie>":[["cal","calorie","calories"],4.184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Calorie>":[["Cal","Calorie","Calories"],4184,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<therm-US>":[["th","therm","therms","Therm","therm-US"],105480400,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<Wh>":[["Wh"],3600,"energy",["<meter>","<meter>","<kilogram>"],["<second>","<second>"]],"<newton>":[["N","Newton","newton"],1,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<dyne>":[["dyn","dyne"],1e-5,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<pound-force>":[["lbf","pound-force"],4.448222,"force",["<kilogram>","<meter>"],["<second>","<second>"]],"<hertz>":[["Hz","hertz","Hertz"],1,"frequency",["<1>"],["<second>"]],"<radian>":[["rad","radian","radians"],1,"angle",["<radian>"]],"<degree>":[["deg","degree","degrees"],Math.PI/180,"angle",["<radian>"]],"<gradian>":[["gon","grad","gradian","grads"],Math.PI/200,"angle",["<radian>"]],"<steradian>":[["sr","steradian","steradians"],1,"solid_angle",["<steradian>"]],"<rotation>":[["rotation"],2*Math.PI,"angle",["<radian>"]],"<rpm>":[["rpm"],2*Math.PI/60,"angular_velocity",["<radian>"],["<second>"]],"<byte>":[["B","byte","bytes"],1,"information",["<byte>"]],"<bit>":[["b","bit","bits"],.125,"information",["<byte>"]],"<Bps>":[["Bps"],1,"information_rate",["<byte>"],["<second>"]],"<bps>":[["bps"],.125,"information_rate",["<byte>"],["<second>"]],"<dollar>":[["USD","dollar"],1,"currency",["<dollar>"]],"<cents>":[["cents"],.01,"currency",["<dollar>"]],"<candela>":[["cd","candela"],1,"luminosity",["<candela>"]],"<lumen>":[["lm","lumen"],1,"luminous_power",["<candela>","<steradian>"]],"<lux>":[["lux"],1,"illuminance",["<candela>","<steradian>"],["<meter>","<meter>"]],"<watt>":[["W","watt","watts"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere>":[["VA","volt-ampere"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<volt-ampere-reactive>":[["var","Var","VAr","VAR","volt-ampere-reactive"],1,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<horsepower>":[["hp","horsepower"],745.699872,"power",["<kilogram>","<meter>","<meter>"],["<second>","<second>","<second>"]],"<gray>":[["Gy","gray","grays"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<roentgen>":[["R","roentgen"],.00933,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<sievert>":[["Sv","sievert","sieverts"],1,"radiation",["<meter>","<meter>"],["<second>","<second>"]],"<becquerel>":[["Bq","becquerel","becquerels"],1,"radiation",["<1>"],["<second>"]],"<curie>":[["Ci","curie","curies"],37e9,"radiation",["<1>"],["<second>"]],"<cpm>":[["cpm"],1/60,"rate",["<count>"],["<second>"]],"<dpm>":[["dpm"],1/60,"rate",["<count>"],["<second>"]],"<bpm>":[["bpm"],1/60,"rate",["<count>"],["<second>"]],"<dot>":[["dot","dots"],1,"resolution",["<each>"]],"<pixel>":[["pixel","px"],1,"resolution",["<each>"]],"<ppi>":[["ppi"],1,"resolution",["<pixel>"],["<inch>"]],"<dpi>":[["dpi"],1,"typography",["<dot>"],["<inch>"]],"<cell>":[["cells","cell"],1,"counting",["<each>"]],"<each>":[["each"],1,"counting",["<each>"]],"<count>":[["count"],1,"counting",["<each>"]],"<base-pair>":[["bp","base-pair"],1,"counting",["<each>"]],"<nucleotide>":[["nt","nucleotide"],1,"counting",["<each>"]],"<molecule>":[["molecule","molecules"],1,"counting",["<1>"]],"<dozen>":[["doz","dz","dozen"],12,"prefix_only",["<each>"]],"<percent>":[["%","percent"],.01,"prefix_only",["<1>"]],"<ppm>":[["ppm"],1e-6,"prefix_only",["<1>"]],"<ppt>":[["ppt"],1e-9,"prefix_only",["<1>"]],"<gross>":[["gr","gross"],144,"prefix_only",["<dozen>","<dozen>"]],"<decibel>":[["dB","decibel","decibels"],1,"logarithmic",["<decibel>"]]},te=["<meter>","<kilogram>","<second>","<mole>","<ampere>","<radian>","<kelvin>","<temp-K>","<byte>","<dollar>","<candela>","<each>","<steradian>","<decibel>"],ti="<1>",tn=[ti];function ta(E,I){var _=I[1],T=I[3]||[],L=I[4]||[];if(!P(_))throw new W(E+": Invalid unit definition. 'scalar' must be a number");T.forEach(function(I){if(void 0===Q[I])throw new W(E+": Invalid unit definition. Unit "+I+" in 'numerator' is not recognized")}),L.forEach(function(I){if(void 0===Q[I])throw new W(E+": Invalid unit definition. Unit "+I+" in 'denominator' is not recognized")})}var th={},tu={},tf={},tc={},td={};for(var tm in Q)if(Q.hasOwnProperty(tm)){var tp=Q[tm];if("prefix"===tp[2]){th[tm]=tp[1];for(var tg=0;tg<tp[0].length;tg++)tu[tp[0][tg]]=tm}else{ta(tm,tp),tf[tm]={scalar:tp[1],numerator:tp[3],denominator:tp[4]};for(var tw=0;tw<tp[0].length;tw++)tc[tp[0][tw]]=tm}td[tm]=tp[0][0]}function tb(E){var I,P=[],_=Object.keys(Q);if(void 0===E)for(I=0;I<_.length;I++)-1===["","prefix"].indexOf(Q[_[I]][2])&&P.push(_[I].substr(1,_[I].length-2));else if(-1===this.getKinds().indexOf(E))throw new W("Kind not recognized");else for(I=0;I<_.length;I++)Q[_[I]][2]===E&&P.push(_[I].substr(1,_[I].length-2));return P.sort(function(E,I){return E.toLowerCase()<I.toLowerCase()?-1:E.toLowerCase()>I.toLowerCase()?1:0})}function ty(E){if(!tc[E])throw new W("Unit not recognized");return Q[tc[E]][0]}var tv=["length","time","temperature","mass","current","substance","luminosity","currency","information","angle"];function tx(){if(this.signature)return this.signature;for(var E=tM.call(this),I=0;I<E.length;I++)E[I]*=Math.pow(20,I);return E.reduce(function(E,I){return E+I},0)}function tM(){if(!this.isBase())return tM.call(this.toBase());for(var E,I,P=Array(tv.length),_=0;_<P.length;_++)P[_]=0;for(var T=0;T<this.numerator.length;T++)(E=Q[this.numerator[T]])&&(I=tv.indexOf(E[2]))>=0&&(P[I]=P[I]+1);for(var L=0;L<this.denominator.length;L++)(E=Q[this.denominator[L]])&&(I=tv.indexOf(E[2]))>=0&&(P[I]=P[I]-1);return P}var tk="[+-]",tE="\\d+",tA=tk+"?"+tE,tS="\\."+tE,tI=RegExp("^"+("("+(tk+"?\\s*"+("(?:"+("(?:"+tE+"(?:"+tS+")?)|(?:")+tS+"))(?:[Ee]"))+tA)+")?)?\\s*([^/]*)(?:/(.+))?$"),tP="\\^|\\*{2}",tD="[01234]",t_=RegExp("([^ \\*\\d]+?)(?:"+tP+")?(-?"+tD+"(?![a-zA-Z]))"),tC=RegExp("([^ \\*\\d]+?)(?:"+tP+")?("+tD+"(?![a-zA-Z]))");function tB(I){E(I)||(I=I.toString()),I=I.trim();var P,_,T,L=tI.exec(I);if(!L)throw new W(I+": Quantity not recognized");var N=L[1];N?(N=N.replace(/\s/g,""),this.scalar=parseFloat(N)):this.scalar=1;for(var F=L[2],O=L[3];L=t_.exec(F);){if(isNaN(P=parseFloat(L[2])))throw new W("Unit exponent is not a number");if(0===P&&!tR.test(L[1]))throw new W("Unit not recognized");_=L[1]+" ",T="";for(var $=0;$<Math.abs(P);$++)T+=_;P>=0?F=F.replace(L[0],T):(O=O?O+T:T,F=F.replace(L[0],""))}for(;L=tC.exec(O);){if(isNaN(P=parseFloat(L[2])))throw new W("Unit exponent is not a number");if(0===P&&!tR.test(L[1]))throw new W("Unit not recognized");_=L[1]+" ",T="";for(var Z=0;Z<P;Z++)T+=_;O=O.replace(L[0],T)}F&&(this.numerator=tN(F.trim())),O&&(this.denominator=tN(O.trim()))}var tT="("+Object.keys(tu).sort(function(E,I){return I.length-E.length}).join("|")+")??("+Object.keys(tc).sort(function(E,I){return I.length-E.length}).join("|")+")(?:\\b|$)",tR=RegExp("^\\s*("+tT+"[\\s\\*]*)+$"),tU=RegExp(tT,"g"),tL={};function tN(E){var I=tL[E];if(I)return I;var P,_=[];if(!tR.test(E))throw new W("Unit not recognized");for(;P=tU.exec(E);)_.push(P.slice(1));return _=(_=(_=_.map(function(E){return tu[E[0]]?[tu[E[0]],tc[E[1]]]:[tc[E[1]]]})).reduce(function(E,I){return E.concat(I)},[])).filter(function(E){return E}),tL[E]=_,_}function tF(I){if(!E(I))throw new W("Argument should be a string");try{return this(I)}catch(E){return null}}function tO(E){return E instanceof tY}function tY(E,I){if(tV.apply(null,arguments),!tO(this))return new tY(E,I);if(this.scalar=null,this.baseScalar=null,this.signature=null,this._conversionCache={},this.numerator=tn,this.denominator=tn,tX(E)?(this.scalar=E.scalar,this.numerator=E.numerator&&0!==E.numerator.length?E.numerator:tn,this.denominator=E.denominator&&0!==E.denominator.length?E.denominator:tn):I?(tB.call(this,I),this.scalar=E):tB.call(this,E),this.denominator.join("*").indexOf("temp")>=0)throw new W("Cannot divide with temperatures");if(this.numerator.join("*").indexOf("temp")>=0){if(this.numerator.length>1)throw new W("Cannot multiply by temperatures");if(!L(this.denominator,tn))throw new W("Cannot divide with temperatures")}if(this.initValue=E,tz.call(this),this.isTemperature()&&this.baseScalar<0)throw new W("Temperatures must not be less than absolute zero")}function tV(I,_){if(_){if(!(P(I)&&E(_)))throw new W("Only number accepted as initialization value when units are explicitly provided")}else if(!(E(I)||P(I)||tO(I)||tX(I)))throw new W("Only string, number or quantity accepted as single initialization value")}function tX(E){return E&&"object"==typeof E&&E.hasOwnProperty("scalar")}function tz(){if(this.baseScalar)return this.baseScalar;if(this.isBase())this.baseScalar=this.scalar,this.signature=tx.call(this);else{var E=this.toBase();this.baseScalar=E.scalar,this.signature=E.signature}}tY.prototype={constructor:tY};var tG={"-312078":"elastance","-312058":"resistance","-312038":"inductance","-152058":"potential","-152040":"magnetism","-152038":"magnetism","-7997":"specific_volume","-79":"snap","-59":"jolt","-39":"acceleration","-38":"radiation","-20":"frequency","-19":"speed","-18":"viscosity","-17":"volumetric_flow","-1":"wavenumber",0:"unitless",1:"length",2:"area",3:"volume",20:"time",400:"temperature",7941:"yank",7942:"power",7959:"pressure",7961:"force",7962:"energy",7979:"viscosity",7981:"momentum",7982:"angular_momentum",7997:"density",7998:"area_density",8e3:"mass",152020:"radiation_exposure",159999:"magnetism",16e4:"current",160020:"charge",312058:"conductance",312078:"capacitance",3199980:"activity",3199997:"molar_concentration",32e5:"substance",63999998:"illuminance",64e6:"luminous_power",128e7:"currency","25599999980":"information_rate","25600000000":"information","511999999980":"angular_velocity","512000000000":"angle"};function tj(){return T(Object.keys(tG).map(function(E){return tG[E]}))}function t$(E,I){var P=E.units(),_=I.to(P),T=tY(tZ(P));return tY({scalar:E.scalar-_.scalar,numerator:T.numerator,denominator:T.denominator})}function tq(E,I){var P=I.to(tZ(E.units()));return tY({scalar:E.scalar-P.scalar,numerator:E.numerator,denominator:E.denominator})}function tH(E,I){var P=I.to(tZ(E.units()));return tY({scalar:E.scalar+P.scalar,numerator:E.numerator,denominator:E.denominator})}function tZ(E){if("tempK"===E)return"degK";if("tempC"===E)return"degC";if("tempF"===E)return"degF";if("tempR"===E)return"degR";throw new W("Unknown type for temp conversion from: "+E)}function tW(E,I){var P,_=tK(E),T=I.units();if("degK"===T)P=_.scalar;else if("degC"===T)P=_.scalar;else if("degF"===T)P=9*_.scalar/5;else if("degR"===T)P=9*_.scalar/5;else throw new W("Unknown type for degree conversion to: "+T);return tY({scalar:P,numerator:I.numerator,denominator:I.denominator})}function tK(E){var I,P=E.units();if(P.match(/(deg)[CFRK]/))I=E.baseScalar;else if("tempK"===P)I=E.scalar;else if("tempC"===P)I=E.scalar;else if("tempF"===P)I=5*E.scalar/9;else if("tempR"===P)I=5*E.scalar/9;else throw new W("Unknown type for temp conversion from: "+P);return tY({scalar:I,numerator:["<kelvin>"],denominator:tn})}function tJ(E,I){var P,_=I.units();if("tempK"===_)P=E.baseScalar;else if("tempC"===_)P=E.baseScalar-273.15;else if("tempF"===_)P=9*E.baseScalar/5-459.67;else if("tempR"===_)P=9*E.baseScalar/5;else throw new W("Unknown type for temp conversion to: "+_);return tY({scalar:P,numerator:I.numerator,denominator:I.denominator})}function tQ(E){var I,P=E.units();if(P.match(/(deg)[CFRK]/))I=E.baseScalar;else if("tempK"===P)I=E.scalar;else if("tempC"===P)I=E.scalar+273.15;else if("tempF"===P)I=(E.scalar+459.67)*5/9;else if("tempR"===P)I=5*E.scalar/9;else throw new W("Unknown type for temp conversion from: "+P);return tY({scalar:I,numerator:["<temp-K>"],denominator:tn})}function t0(E,I){var P,T=tY(E),L=tY(I);return T.eq(L)?_:(P=T.isTemperature()?function(E){return T.mul(E).to(L).scalar}:function(E){return E*T.baseScalar/L.baseScalar},function(E){var I,_,T;if(!Array.isArray(E))return P(E);for(I=0,_=E.length,T=[];I<_;I++)T.push(P(E[I]));return T})}tY.prototype.kind=function(){return tG[this.signature.toString()]},N(tY.prototype,{isDegrees:function(){return(null===this.signature||400===this.signature)&&1===this.numerator.length&&L(this.denominator,tn)&&(this.numerator[0].match(/<temp-[CFRK]>/)||this.numerator[0].match(/<(kelvin|celsius|rankine|fahrenheit)>/))},isTemperature:function(){return this.isDegrees()&&this.numerator[0].match(/<temp-[CFRK]>/)}}),N(tY.prototype,{to:function(I){var P,_;return null==I?this:E(I)?(P=this._conversionCache[I])?P:(_=tY(I)).units()===this.units()?this:(this.isCompatible(_)?_=_.isTemperature()?tJ(this,_):_.isDegrees()?tW(this,_):tY({scalar:O(this.baseScalar,_.baseScalar),numerator:_.numerator,denominator:_.denominator}):this.isInverse(_)?_=this.inverse().to(I):J(this.units(),_.units()),this._conversionCache[I]=_,_):this.to(I.units())},toBase:function(){if(this.isBase())return this;if(this.isTemperature())return tQ(this);var E=t1[this.units()];return E||(E=t2(this.numerator,this.denominator),t1[this.units()]=E),E.mul(this.scalar)},toFloat:function(){if(this.isUnitless())return this.scalar;throw new W("Can't convert to Float unless unitless.  Use Unit#scalar")},toPrec:function(I){if(E(I)&&(I=tY(I)),P(I)&&(I=tY(I+" "+this.units())),this.isUnitless()?I.isUnitless()||J(this.units(),I.units()):I=I.to(this.units()),0===I.scalar)throw new W("Divide by zero");return tY(F(Math.round(this.scalar/I.scalar),I.scalar)+this.units())}});var t1={};function t2(E,I){for(var P,_=[],T=[],L=1,N=0;N<E.length;N++)th[P=E[N]]?L=F(L,th[P]):tf[P]&&(L*=tf[P].scalar,tf[P].numerator&&_.push(tf[P].numerator),tf[P].denominator&&T.push(tf[P].denominator));for(var O=0;O<I.length;O++)th[P=I[O]]?L/=th[P]:tf[P]&&(L/=tf[P].scalar,tf[P].numerator&&T.push(tf[P].numerator),tf[P].denominator&&_.push(tf[P].denominator));return tY({scalar:L,numerator:_=_.reduce(function(E,I){return E.concat(I)},[]),denominator:T=T.reduce(function(E,I){return E.concat(I)},[])})}function t3(E,I,P,_){function T(E){return E!==ti}E=E.filter(T),P=P.filter(T),I=I.filter(T),_=_.filter(T);var L={};function N(E,I){for(var P,_,T,N=0;N<E.length;N++)if(th[E[N]]?(P=E[N+1],T=th[_=E[N]],N++):(P=E[N],_=null,T=1),P&&P!==ti){if(L[P]){L[P][0]+=I;var F=L[P][2]?th[L[P][2]]:1;L[P][1===I?3:4]*=O(T,F)}else L[P]=[I,P,_,1,1]}}N(E,1),N(I,-1),N(P,1),N(_,-1);var F=[],$=[],Z=1;for(var W in L)if(L.hasOwnProperty(W)){var J,Q=L[W];if(Q[0]>0)for(J=0;J<Q[0];J++)F.push(null===Q[2]?Q[1]:[Q[2],Q[1]]);else if(Q[0]<0)for(J=0;J<-Q[0];J++)$.push(null===Q[2]?Q[1]:[Q[2],Q[1]]);Z*=O(Q[3],Q[4])}return 0===F.length&&(F=tn),0===$.length&&($=tn),[F=F.reduce(function(E,I){return E.concat(I)},[]),$=$.reduce(function(E,I){return E.concat(I)},[]),Z]}function t5(){}function t4(E,I){return(E+" "+I).trim()}tY.parse=tF,tY.getUnits=tb,tY.getAliases=ty,tY.mulSafe=F,tY.divSafe=O,tY.getKinds=tj,tY.swiftConverter=t0,tY.Error=W,N(tY.prototype,{add:function(I){if(E(I)&&(I=tY(I)),this.isCompatible(I)||J(this.units(),I.units()),this.isTemperature()&&I.isTemperature())throw new W("Cannot add two temperatures");return this.isTemperature()?tH(this,I):I.isTemperature()?tH(I,this):tY({scalar:this.scalar+I.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},sub:function(I){if(E(I)&&(I=tY(I)),this.isCompatible(I)||J(this.units(),I.units()),this.isTemperature()&&I.isTemperature())return t$(this,I);if(this.isTemperature())return tq(this,I);if(I.isTemperature())throw new W("Cannot subtract a temperature from a differential degree unit");return tY({scalar:this.scalar-I.to(this).scalar,numerator:this.numerator,denominator:this.denominator})},mul:function(I){if(P(I))return tY({scalar:F(this.scalar,I),numerator:this.numerator,denominator:this.denominator});if(E(I)&&(I=tY(I)),(this.isTemperature()||I.isTemperature())&&!(this.isUnitless()||I.isUnitless()))throw new W("Cannot multiply by temperatures");var _=this,T=I;_.isCompatible(T)&&400!==_.signature&&(T=T.to(_));var L=t3(_.numerator,_.denominator,T.numerator,T.denominator);return tY({scalar:F(_.scalar,T.scalar,L[2]),numerator:L[0],denominator:L[1]})},div:function(I){if(P(I)){if(0===I)throw new W("Divide by zero");return tY({scalar:this.scalar/I,numerator:this.numerator,denominator:this.denominator})}if(E(I)&&(I=tY(I)),0===I.scalar)throw new W("Divide by zero");if(I.isTemperature()||this.isTemperature()&&!I.isUnitless())throw new W("Cannot divide with temperatures");var _=this,T=I;_.isCompatible(T)&&400!==_.signature&&(T=T.to(_));var L=t3(_.numerator,_.denominator,T.denominator,T.numerator);return tY({scalar:F(_.scalar,L[2])/T.scalar,numerator:L[0],denominator:L[1]})},inverse:function(){if(this.isTemperature())throw new W("Cannot divide with temperatures");if(0===this.scalar)throw new W("Divide by zero");return tY({scalar:1/this.scalar,numerator:this.denominator,denominator:this.numerator})}}),N(tY.prototype,{eq:function(E){return 0===this.compareTo(E)},lt:function(E){return -1===this.compareTo(E)},lte:function(E){return this.eq(E)||this.lt(E)},gt:function(E){return 1===this.compareTo(E)},gte:function(E){return this.eq(E)||this.gt(E)},compareTo:function(I){return E(I)?this.compareTo(tY(I)):(this.isCompatible(I)||J(this.units(),I.units()),this.baseScalar<I.baseScalar)?-1:this.baseScalar===I.baseScalar?0:this.baseScalar>I.baseScalar?1:void 0},same:function(E){return this.scalar===E.scalar&&this.units()===E.units()}}),N(tY.prototype,{isUnitless:function(){return[this.numerator,this.denominator].every(function(E){return L(E,tn)})},isCompatible:function(I){return E(I)?this.isCompatible(tY(I)):!!tO(I)&&void 0!==I.signature&&this.signature===I.signature},isInverse:function(E){return this.inverse().isCompatible(E)},isBase:function(){return void 0!==this._isBase||(this.isDegrees()&&this.numerator[0].match(/<(kelvin|temp-K)>/)?this._isBase=!0:(this.numerator.concat(this.denominator).forEach(function(E){E!==ti&&-1===te.indexOf(E)&&(this._isBase=!1)},this),!1===this._isBase||(this._isBase=!0))),this._isBase}}),t5.prototype.get=function(E){return arguments.length>1&&(E=Array.apply(null,arguments)),E.reduce(function(I,P,_){if(I){var T=I[P];return _===E.length-1?T?T.data:void 0:T}},this)},t5.prototype.set=function(E,I){return arguments.length>2&&(E=Array.prototype.slice.call(arguments,0,-1),I=arguments[arguments.length-1]),E.reduce(function(P,_,T){var L=P[_];return(void 0===L&&(L=P[_]={}),T===E.length-1)?(L.data=I,I):L},this)},tY.formatter=t4,N(tY.prototype,{units:function(){if(void 0!==this._units)return this._units;var E=L(this.numerator,tn),I=L(this.denominator,tn);if(E&&I)return this._units="",this._units;var P=t8(this.numerator),_=t8(this.denominator);return this._units=P+(I?"":"/"+_),this._units},toString:function(I,_){if(P(I))T=this.units(),_=I;else if(E(I))T=I;else if(tO(I))return this.toPrec(I).toString(_);var T,L=this.to(T);return((void 0!==_?$(L.scalar,_):L.scalar)+" "+L.units()).trim()},format:function(E,I){1==arguments.length&&"function"==typeof E&&(I=E,E=void 0),I=I||tY.formatter;var P=this.to(E);return I.call(this,P.scalar,P.units())}});var t6=new t5;function t8(E){var I=t6.get(E);return I||(I=L(E,tn)?"1":t9(t7(E)).join("*"),t6.set(E,I)),I}function t7(E){for(var I,P,_=[],T=0;T<E.length;T++)I=E[T],P=E[T+1],th[I]?(_.push(td[I]+td[P]),T++):_.push(td[I]);return _}function t9(E){return E.reduce(function(E,I){var P=E[I];return P||E.push(P=E[I]=[I,0]),P[1]++,E},[]).map(function(E){return E[0]+(E[1]>1?E[1]:"")})}return tY.version="1.7.6",tY})},5520:function(E){!function(){function I(E){for(var I=0,T=E.length-1,L=void 0,N=void 0,F=void 0,O=_(I,T);;){if(T<=I)return E[O];if(T==I+1)return E[I]>E[T]&&P(E,I,T),E[O];for(E[L=_(I,T)]>E[T]&&P(E,L,T),E[I]>E[T]&&P(E,I,T),E[L]>E[I]&&P(E,L,I),P(E,L,I+1),N=I+1,F=T;;){do N++;while(E[I]>E[N]);do F--;while(E[F]>E[I]);if(F<N)break;P(E,N,F)}P(E,I,F),F<=O&&(I=N),F>=O&&(T=F-1)}}var P=function(E,I,P){var _;return _=[E[P],E[I]],E[I]=_[0],E[P]=_[1],_},_=function(E,I){return~~((E+I)/2)};E.exports?E.exports=I:window.median=I}()},530:function(E){"use strict";class I{constructor(){this.nodes=new Map}add(E){var I=this.nodes.get(E);return I||(I=new P(E),this.nodes.set(E,I)),I}union(E,I){let P=this.find(E),_=this.find(I);P!==_&&(P.rank<_.rank?P.parent=_:P.rank>_.rank?_.parent=P:(_.parent=P,P.rank++))}find(E){for(var I=E;null!==I.parent;)I=I.parent;for(var P=E;null!==P.parent;){var _=P;P=P.parent,_.parent=I}return I}connected(E,I){return this.find(E)===this.find(I)}}function P(E){this.value=E,this.parent=null,this.rank=0}E.exports=I},4953:function(E,I,P){"use strict";function _(E,I){let P=0;for(let _=0;_<E.length;_++)P+=(E[_]-I[_])*(E[_]-I[_]);return P}function T(E,I){return Math.sqrt(_(E,I))}P.r(I),P.d(I,{euclidean:function(){return T},squaredEuclidean:function(){return _}})},7345:function(E,I,P){"use strict";var _=P(5571),T={DEBUG:!1,ifft2DArray:function(E,I,P){var T=Array(I*P),L=I/2,N=(P-1)*2;_.init(L);for(var F={re:Array(L),im:Array(L)},O=0;O<P;O++){for(var $=L-1;$>=0;$--)F.re[$]=E[2*$*P+O],F.im[$]=E[(2*$+1)*P+O];_.bt(F.re,F.im);for(var $=L-1;$>=0;$--)T[2*$*P+O]=F.re[$],T[(2*$+1)*P+O]=F.im[$]}var Z=Array(L*N);_.init(N);for(var W={re:Array(N),im:Array(N)},J=N*L,$=0;$<I;$+=2){W.re[0]=T[$*P],W.im[0]=T[($+1)*P];for(var O=1;O<P;O++)W.re[O]=T[$*P+O],W.im[O]=T[($+1)*P+O],W.re[N-O]=T[$*P+O],W.im[N-O]=-T[($+1)*P+O];_.bt(W.re,W.im);for(var Q=$/2*N,O=N-1;O>=0;O--)Z[Q+O]=W.re[O]/J}return Z},fft2DArray:function(E,I,P,T){Object.assign({},{inplace:!0});var L,N,F,O,$,Z=P/2+1,W=2*I,J=Array(W*Z);_.init(P);for(var Q={re:Array(P),im:Array(P)},te={re:Array(P),im:Array(P)},ti={re:Array(P),im:Array(P)},tn=0;tn<I/2;tn++){L=2*tn*P,Q.re=E.slice(L,L+P),L=(2*tn+1)*P,Q.im=E.slice(L,L+P),_.fft1d(Q.re,Q.im),this.reconstructTwoRealFFT(Q,te,ti),N=4*tn*Z,F=(4*tn+1)*Z,O=(4*tn+2)*Z,$=(4*tn+3)*Z;for(var ta=Z-1;ta>=0;ta--)J[N+ta]=te.re[ta],J[F+ta]=te.im[ta],J[O+ta]=ti.re[ta],J[$+ta]=ti.im[ta]}te=null,ti=null;var th=Array(W*Z);_.init(I);for(var tu={re:Array(I),im:Array(I)},tf=Z-1;tf>=0;tf--){for(var tn=I-1;tn>=0;tn--)tu.re[tn]=J[2*tn*Z+tf],tu.im[tn]=J[(2*tn+1)*Z+tf],isNaN(tu.re[tn])&&(tu.re[tn]=0),isNaN(tu.im[tn])&&(tu.im[tn]=0);_.fft1d(tu.re,tu.im);for(var tn=I-1;tn>=0;tn--)th[2*tn*Z+tf]=tu.re[tn],th[(2*tn+1)*Z+tf]=tu.im[tn]}return th},reconstructTwoRealFFT:function(E,I,P){var _,T,L,N,F,O=E.re.length;I.re[0]=E.re[0],I.im[0]=0,P.re[0]=E.im[0],P.im[0]=0;for(var $=O/2;$>0;$--)F=O-$,_=.5*(E.re[$]-E.re[F]),T=.5*(E.re[$]+E.re[F]),L=.5*(E.im[$]-E.im[F]),N=.5*(E.im[$]+E.im[F]),I.re[$]=T,I.im[$]=L,I.re[F]=T,I.im[F]=-L,P.re[$]=N,P.im[$]=-_,P.re[F]=N,P.im[F]=_},convolute2DI:function(E,I,P,_){for(var T,L,N=0;N<P/2;N++)for(var F=0;F<_;F++)T=E[2*N*_+F]*I[2*N*_+F]-E[(2*N+1)*_+F]*I[(2*N+1)*_+F],L=E[2*N*_+F]*I[(2*N+1)*_+F]+E[(2*N+1)*_+F]*I[2*N*_+F],E[2*N*_+F]=T,E[(2*N+1)*_+F]=L},convolute:function(E,I,P,_,T){for(var L,N,F=Array(_*P),O=0;O<P*_;O++)F[O]=E[O];F=this.fft2DArray(F,P,_);for(var $=I.length,Z=I[0].length,W=Array(_*P),O=0;O<_*P;O++)W[O]=0;for(var J=Math.floor(($-1)/2),Q=Math.floor((Z-1)/2),te=0;te<$;te++){L=(te-J+P)%P;for(var ti=0;ti<Z;ti++)N=(ti-Q+_)%_,W[L*_+N]=I[te][ti]}W=this.fft2DArray(W,P,_);var tn=2*P,ta=_/2+1;return this.convolute2DI(F,W,tn,ta),this.ifft2DArray(F,tn,ta)},toRadix2:function(E,I,P){var _,T,L,N,F=P,O=I,$=0,Z=0;if(!(0!==P&&(P&P-1)==0)){for(F=0;P>>++F!=0;);Z=(F=1<<F)-P}if(!(0!==I&&(I&I-1)==0)){for(O=0;I>>++O!=0;);$=((O=1<<O)-I)*F}if(O==I&&F==P)return{data:E,rows:I,cols:P};var W=Array(O*F),J=Math.floor((O-I)/2)-I,Q=Math.floor((F-P)/2)-P;for(_=0;_<O;_++)for(T=0,L=_*F,N=(_-J)%I*P;T<F;T++)W[L+T]=E[N+(T-Q)%P];return{data:W,rows:O,cols:F}},crop:function(E,I,P,_,T,L){if(I==_&&P==T)return E;Object.assign({},L);var N,F,O,$,Z=Array(T*_),W=Math.floor((I-_)/2),J=Math.floor((P-T)/2);for(O=0;O<_;O++)for($=0,N=O*T,F=(O+W)*P;$<T;$++)Z[N+$]=E[F+($+J)];return Z}};E.exports=T},5571:function(E,I){(function(){var E;(E=I).toString=function(){return"version 0.3.0, released 2013-03"};for(var P=0,_=null,T=null,L={init:function(E){if(0!==E&&(E&E-1)==0)P=E,L._initArray(),L._makeBitReversalTable(),L._makeCosSinTable();else throw Error("init: radix-2 required")},fft1d:function(E,I){L.fft(E,I,1)},ifft1d:function(E,I){var _=1/P;L.fft(E,I,-1);for(var T=0;T<P;T++)E[T]*=_,I[T]*=_},bt1d:function(E,I){L.fft(E,I,-1)},fft2d:function(E,I){for(var _=[],T=[],N=0,F=0;F<P;F++){N=F*P;for(var O=0;O<P;O++)_[O]=E[O+N],T[O]=I[O+N];L.fft1d(_,T);for(var $=0;$<P;$++)E[$+N]=_[$],I[$+N]=T[$]}for(var Z=0;Z<P;Z++){for(var W=0;W<P;W++)N=Z+W*P,_[W]=E[N],T[W]=I[N];L.fft1d(_,T);for(var J=0;J<P;J++)E[N=Z+J*P]=_[J],I[N]=T[J]}},ifft2d:function(E,I){for(var _=[],T=[],N=0,F=0;F<P;F++){N=F*P;for(var O=0;O<P;O++)_[O]=E[O+N],T[O]=I[O+N];L.ifft1d(_,T);for(var $=0;$<P;$++)E[$+N]=_[$],I[$+N]=T[$]}for(var Z=0;Z<P;Z++){for(var W=0;W<P;W++)N=Z+W*P,_[W]=E[N],T[W]=I[N];L.ifft1d(_,T);for(var J=0;J<P;J++)E[N=Z+J*P]=_[J],I[N]=T[J]}},fft:function(E,I,L){for(var N,F,O,$,Z,W,J,Q,te,ti=P>>2,tn=0;tn<P;tn++)$=_[tn],tn<$&&(Z=E[tn],E[tn]=E[$],E[$]=Z,Z=I[tn],I[tn]=I[$],I[$]=Z);for(var ta=1;ta<P;ta<<=1){F=0,N=P/(ta<<1);for(var th=0;th<ta;th++){W=T[F+ti],J=L*T[F];for(var tu=th;tu<P;tu+=ta<<1)Q=W*E[O=tu+ta]+J*I[O],te=W*I[O]-J*E[O],E[O]=E[tu]-Q,E[tu]+=Q,I[O]=I[tu]-te,I[tu]+=te;F+=N}}},_initArray:function(){_="undefined"!=typeof Uint32Array?new Uint32Array(P):[],T="undefined"!=typeof Float64Array?new Float64Array(1.25*P):[]},_paddingZero:function(){},_makeBitReversalTable:function(){var E=0,I=0,T=0;for(_[0]=0;++E<P;){for(T=P>>1;T<=I;)I-=T,T>>=1;I+=T,_[E]=I}},_makeCosSinTable:function(){var E=P>>1,I=P>>2,_=P>>3,L=E+I,N=Math.sin(Math.PI/P),F=2*N*N,O=Math.sqrt(F*(2-F)),$=T[I]=1,Z=T[0]=0;N=2*F;for(var W=1;W<_;W++)$-=F,F+=N*$,Z+=O,O-=N*Z,T[W]=Z,T[I-W]=$;0!==_&&(T[_]=Math.sqrt(.5));for(var J=0;J<I;J++)T[E-J]=T[J];for(var Q=0;Q<L;Q++)T[Q+E]=-T[Q]}},N=["init","fft1d","ifft1d","fft2d","ifft2d"],F=0;F<N.length;F++)E[N[F]]=L[N[F]];return E.bt=L.bt1d,E.fft=L.fft1d,E.ifft=L.ifft1d,E}).call(this)},3910:function(E,I,P){"use strict";I.FFTUtils=P(7345),P(5571)},8881:function(E,I,P){"use strict";let{squaredEuclidean:_}=P(4953),T={sigma:1};class L{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,I){let P=_(E,I);return Math.exp(-P/this.divisor)}}E.exports=L},4229:function(E){"use strict";let I={degree:1,constant:1,scale:1};class P{constructor(E){E=Object.assign({},I,E),this.degree=E.degree,this.constant=E.constant,this.scale=E.scale}compute(E,I){for(var P=0,_=0;_<E.length;_++)P+=E[_]*I[_];return Math.pow(this.scale*P+this.constant,this.degree)}}E.exports=P},7613:function(E){"use strict";let I={alpha:.01,constant:-Math.E};class P{constructor(E){E=Object.assign({},I,E),this.alpha=E.alpha,this.constant=E.constant}compute(E,I){for(var P=0,_=0;_<E.length;_++)P+=E[_]*I[_];return Math.tanh(this.alpha*P+this.constant)}}E.exports=P},6952:function(E,I,P){"use strict";let{Matrix:_,MatrixTransposeView:T}=P(6705),L=P(8881),N=P(4229),F=P(7613),O=P(8541),$=P(9176),Z=P(3316),W=P(1960),J=P(8557),Q=P(8609),te=P(3029),ti={gaussian:L,rbf:L,polynomial:N,poly:N,anova:O,cauchy:$,exponential:Z,histogram:W,min:W,laplacian:J,multiquadratic:Q,rational:te,sigmoid:F,mlp:F};class tn{constructor(E,I){if(this.kernelType=E,"linear"===E)return;if("string"==typeof E){var P=ti[E=E.toLowerCase()];if(P)this.kernelFunction=new P(I);else throw Error(`unsupported kernel type: ${E}`)}else if("object"==typeof E&&"function"==typeof E.compute)this.kernelFunction=E;else throw TypeError("first argument must be a valid kernel type or instance")}compute(E,I){if(E=_.checkMatrix(E),I=void 0===I?E:_.checkMatrix(I),"linear"===this.kernelType)return E.mmul(new T(I));let P=new _(E.rows,I.rows);if(E===I)for(let I=0;I<E.rows;I++)for(let _=I;_<E.rows;_++){let T=this.kernelFunction.compute(E.getRow(I),E.getRow(_));P.set(I,_,T),P.set(_,I,T)}else for(let _=0;_<E.rows;_++)for(let T=0;T<I.rows;T++)P.set(_,T,this.kernelFunction.compute(E.getRow(_),I.getRow(T)));return P}}E.exports=tn},8541:function(E){"use strict";let I={sigma:1,degree:1};class P{constructor(E){E=Object.assign({},I,E),this.sigma=E.sigma,this.degree=E.degree}compute(E,I){for(var P=0,_=Math.min(E.length,I.length),T=1;T<=_;++T)P+=Math.pow(Math.exp(-this.sigma*Math.pow(Math.pow(E[T-1],T)-Math.pow(I[T-1],T),2)),this.degree);return P}}E.exports=P},9176:function(E,I,P){"use strict";let{squaredEuclidean:_}=P(4953),T={sigma:1};class L{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma}compute(E,I){return 1/(1+_(E,I)/(this.sigma*this.sigma))}}E.exports=L},3316:function(E,I,P){"use strict";let{euclidean:_}=P(4953),T={sigma:1};class L{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma,this.divisor=2*E.sigma*E.sigma}compute(E,I){let P=_(E,I);return Math.exp(-P/this.divisor)}}E.exports=L},1960:function(E){"use strict";class I{compute(E,I){for(var P=Math.min(E.length,I.length),_=0,T=0;T<P;++T)_+=Math.min(E[T],I[T]);return _}}E.exports=I},8557:function(E,I,P){"use strict";let{euclidean:_}=P(4953),T={sigma:1};class L{constructor(E){E=Object.assign({},T,E),this.sigma=E.sigma}compute(E,I){let P=_(E,I);return Math.exp(-P/this.sigma)}}E.exports=L},8609:function(E,I,P){"use strict";let{squaredEuclidean:_}=P(4953),T={constant:1};class L{constructor(E){E=Object.assign({},T,E),this.constant=E.constant}compute(E,I){return Math.sqrt(_(E,I)+this.constant*this.constant)}}E.exports=L},3029:function(E,I,P){"use strict";let{squaredEuclidean:_}=P(4953),T={constant:1};class L{constructor(E){E=Object.assign({},T,E),this.constant=E.constant}compute(E,I){let P=_(E,I);return 1-P/(P+this.constant)}}E.exports=L},414:function(E,I,P){var _=P(3910).FFTUtils;function T(E,I,P){var T,L,N,O,$=F(E),Z=$.data,W=Object.assign({normalize:!1,divisor:1,rows:$.rows,cols:$.cols},P);if(W.rows&&W.cols)T=W.rows,L=W.cols;else throw Error("Invalid number of rows or columns "+T+" "+L);var J=W.divisor,Q=I.length,te=I[0].length;if(W.normalize)for(N=0,J=0;N<Q;N++)for(O=0;O<te;O++)J+=I[N][O];if(0===J)throw RangeError("convolution: The divisor is equal to zero");var ti=_.toRadix2(Z,T,L),tn=_.convolute(ti.data,I,ti.rows,ti.cols);if(tn=_.crop(tn,ti.rows,ti.cols,T,L),0!=J&&1!=J)for(N=0;N<tn.length;N++)tn[N]/=J;return tn}function L(E,I,P){var _,T,L,N,O,$,Z,W,J,Q,te,ti=F(E),tn=ti.data,ta=Object.assign({normalize:!1,divisor:1,rows:ti.rows,cols:ti.cols},P);if(ta.rows&&ta.cols)_=ta.rows,T=ta.cols;else throw Error("Invalid number of rows or columns "+_+" "+T);var th=ta.divisor,tu=I.length,tf=I[0].length;if(ta.normalize)for(L=0,th=0;L<tu;L++)for(N=0;N<tf;N++)th+=I[L][N];if(0===th)throw RangeError("convolution: The divisor is equal to zero");var tc=Array(_*T),td=Math.floor(tu/2),tm=Math.floor(tf/2);for($=0;$<_;$++)for(O=0;O<T;O++){for(N=0,W=0;N<tu;N++)for(L=0;L<tf;L++)J=I[tu-N-1][tf-L-1],Q=($+N-td+_)%_,te=(O+L-tm+T)%T,W+=tn[Z=Q*T+te]*J;tc[Z=$*T+O]=W/th}return tc}function N(E,I,P){var _,T,L,N,F=1e3;P&&P.factor&&(F=P.factor);var O=Array(I);F*=-1;var $=(I-1)/2,Z=2*E*E;for(_=0;_<I;_++)for(T=0,O[_]=Array(I),N=(_-$)*(_-$);T<I;T++)L=-((T-$)*(T-$)+N)/Z,O[_][T]=Math.round(F*(1+L)*Math.exp(L));return O}function F(E){var I,P,_=E;if("number"!=typeof E[0]){_=Array((I=E.length)*(P=E[0].length));for(var T=0;T<I;T++)for(var L=0;L<P;L++)_[T*P+L]=E[T][L]}else{var N=Math.sqrt(E.length);Number.isInteger(N)&&(I=N,P=N)}return{data:_,rows:I,cols:P}}E.exports={fft:T,direct:L,kernelFactory:{LoG:N},matrix2Array:F}},2313:function(E,I,P){"use strict";P.d(I,{Z:function(){return L}});var _=P(5427),T=P(1548);class L{constructor(E){let I,P,_,L,N,F,O,$,Z;let W=(E=T.Z.checkMatrix(E)).clone(),J=W.rows,Q=W.columns,te=new Float64Array(J),ti=1;for(I=0;I<J;I++)te[I]=I;for(P=0,$=new Float64Array(J);P<Q;P++){for(I=0;I<J;I++)$[I]=W.get(I,P);for(I=0;I<J;I++){for(_=0,Z=Math.min(I,P),N=0;_<Z;_++)N+=W.get(I,_)*$[_];$[I]-=N,W.set(I,P,$[I])}for(L=P,I=P+1;I<J;I++)Math.abs($[I])>Math.abs($[L])&&(L=I);if(L!==P){for(_=0;_<Q;_++)F=W.get(L,_),W.set(L,_,W.get(P,_)),W.set(P,_,F);O=te[L],te[L]=te[P],te[P]=O,ti=-ti}if(P<J&&0!==W.get(P,P))for(I=P+1;I<J;I++)W.set(I,P,W.get(I,P)/W.get(P,P))}this.LU=W,this.pivotVector=te,this.pivotSign=ti}isSingular(){let E=this.LU,I=E.columns;for(let P=0;P<I;P++)if(0===E.get(P,P))return!0;return!1}solve(E){let I,P,T;E=_.Z.checkMatrix(E);let L=this.LU;if(L.rows!==E.rows)throw Error("Invalid matrix dimensions");if(this.isSingular())throw Error("LU matrix is singular");let N=E.columns,F=E.subMatrixRow(this.pivotVector,0,N-1),O=L.columns;for(T=0;T<O;T++)for(I=T+1;I<O;I++)for(P=0;P<N;P++)F.set(I,P,F.get(I,P)-F.get(T,P)*L.get(I,T));for(T=O-1;T>=0;T--){for(P=0;P<N;P++)F.set(T,P,F.get(T,P)/L.get(T,T));for(I=0;I<T;I++)for(P=0;P<N;P++)F.set(I,P,F.get(I,P)-F.get(T,P)*L.get(I,T))}return F}get determinant(){let E=this.LU;if(!E.isSquare())throw Error("Matrix must be square");let I=this.pivotSign,P=E.columns;for(let _=0;_<P;_++)I*=E.get(_,_);return I}get lowerTriangularMatrix(){let E=this.LU,I=E.rows,P=E.columns,T=new _.Z(I,P);for(let _=0;_<I;_++)for(let I=0;I<P;I++)_>I?T.set(_,I,E.get(_,I)):_===I?T.set(_,I,1):T.set(_,I,0);return T}get upperTriangularMatrix(){let E=this.LU,I=E.rows,P=E.columns,T=new _.Z(I,P);for(let _=0;_<I;_++)for(let I=0;I<P;I++)_<=I?T.set(_,I,E.get(_,I)):T.set(_,I,0);return T}get pivotPermutationVector(){return Array.from(this.pivotVector)}}},7072:function(E,I,P){"use strict";P.d(I,{Z:function(){return N}});var _=P(5427),T=P(1548),L=P(6310);class N{constructor(E){let I,P,_,N;let F=(E=T.Z.checkMatrix(E)).clone(),O=E.rows,$=E.columns,Z=new Float64Array($);for(_=0;_<$;_++){let E=0;for(I=_;I<O;I++)E=(0,L.G)(E,F.get(I,_));if(0!==E){for(0>F.get(_,_)&&(E=-E),I=_;I<O;I++)F.set(I,_,F.get(I,_)/E);for(F.set(_,_,F.get(_,_)+1),P=_+1;P<$;P++){for(N=0,I=_;I<O;I++)N+=F.get(I,_)*F.get(I,P);for(N=-N/F.get(_,_),I=_;I<O;I++)F.set(I,P,F.get(I,P)+N*F.get(I,_))}}Z[_]=-E}this.QR=F,this.Rdiag=Z}solve(E){let I,P,T,L;E=_.Z.checkMatrix(E);let N=this.QR,F=N.rows;if(E.rows!==F)throw Error("Matrix row dimensions must agree");if(!this.isFullRank())throw Error("Matrix is rank deficient");let O=E.columns,$=E.clone(),Z=N.columns;for(T=0;T<Z;T++)for(P=0;P<O;P++){for(L=0,I=T;I<F;I++)L+=N.get(I,T)*$.get(I,P);for(L=-L/N.get(T,T),I=T;I<F;I++)$.set(I,P,$.get(I,P)+L*N.get(I,T))}for(T=Z-1;T>=0;T--){for(P=0;P<O;P++)$.set(T,P,$.get(T,P)/this.Rdiag[T]);for(I=0;I<T;I++)for(P=0;P<O;P++)$.set(I,P,$.get(I,P)-$.get(T,P)*N.get(I,T))}return $.subMatrix(0,Z-1,0,O-1)}isFullRank(){let E=this.QR.columns;for(let I=0;I<E;I++)if(0===this.Rdiag[I])return!1;return!0}get upperTriangularMatrix(){let E,I,P=this.QR,T=P.columns,L=new _.Z(T,T);for(E=0;E<T;E++)for(I=0;I<T;I++)E<I?L.set(E,I,P.get(E,I)):E===I?L.set(E,I,this.Rdiag[E]):L.set(E,I,0);return L}get orthogonalMatrix(){let E,I,P,T,L=this.QR,N=L.rows,F=L.columns,O=new _.Z(N,F);for(P=F-1;P>=0;P--){for(E=0;E<N;E++)O.set(E,P,0);for(O.set(P,P,1),I=P;I<F;I++)if(0!==L.get(P,P)){for(T=0,E=P;E<N;E++)T+=L.get(E,P)*O.get(E,I);for(T=-T/L.get(P,P),E=P;E<N;E++)O.set(E,I,O.get(E,I)+T*L.get(E,P))}}return O}}},6943:function(E,I,P){"use strict";P.d(I,{Z:function(){return N}});var _=P(5427),T=P(1548),L=P(6310);class N{constructor(E,I={}){let P;if((E=T.Z.checkMatrix(E)).isEmpty())throw Error("Matrix must be non-empty");let N=E.rows,F=E.columns,{computeLeftSingularVectors:O=!0,computeRightSingularVectors:$=!0,autoTranspose:Z=!1}=I,W=!!O,J=!!$,Q=!1;if(N<F){if(Z){N=(P=E.transpose()).rows,F=P.columns,Q=!0;let I=W;W=J,J=I}else P=E.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose")}else P=E.clone();let te=Math.min(N,F),ti=Math.min(N+1,F),tn=new Float64Array(ti),ta=new _.Z(N,te),th=new _.Z(F,F),tu=new Float64Array(F),tf=new Float64Array(N),tc=new Float64Array(ti);for(let E=0;E<ti;E++)tc[E]=E;let td=Math.min(N-1,F),tm=Math.max(0,Math.min(F-2,N)),tp=Math.max(td,tm);for(let E=0;E<tp;E++){if(E<td){tn[E]=0;for(let I=E;I<N;I++)tn[E]=(0,L.G)(tn[E],P.get(I,E));if(0!==tn[E]){0>P.get(E,E)&&(tn[E]=-tn[E]);for(let I=E;I<N;I++)P.set(I,E,P.get(I,E)/tn[E]);P.set(E,E,P.get(E,E)+1)}tn[E]=-tn[E]}for(let I=E+1;I<F;I++){if(E<td&&0!==tn[E]){let _=0;for(let T=E;T<N;T++)_+=P.get(T,E)*P.get(T,I);_=-_/P.get(E,E);for(let T=E;T<N;T++)P.set(T,I,P.get(T,I)+_*P.get(T,E))}tu[I]=P.get(E,I)}if(W&&E<td)for(let I=E;I<N;I++)ta.set(I,E,P.get(I,E));if(E<tm){tu[E]=0;for(let I=E+1;I<F;I++)tu[E]=(0,L.G)(tu[E],tu[I]);if(0!==tu[E]){tu[E+1]<0&&(tu[E]=0-tu[E]);for(let I=E+1;I<F;I++)tu[I]/=tu[E];tu[E+1]+=1}if(tu[E]=-tu[E],E+1<N&&0!==tu[E]){for(let I=E+1;I<N;I++)tf[I]=0;for(let I=E+1;I<N;I++)for(let _=E+1;_<F;_++)tf[I]+=tu[_]*P.get(I,_);for(let I=E+1;I<F;I++){let _=-tu[I]/tu[E+1];for(let T=E+1;T<N;T++)P.set(T,I,P.get(T,I)+_*tf[T])}}if(J)for(let I=E+1;I<F;I++)th.set(I,E,tu[I])}}let tg=Math.min(F,N+1);if(td<F&&(tn[td]=P.get(td,td)),N<tg&&(tn[tg-1]=0),tm+1<tg&&(tu[tm]=P.get(tm,tg-1)),tu[tg-1]=0,W){for(let E=td;E<te;E++){for(let I=0;I<N;I++)ta.set(I,E,0);ta.set(E,E,1)}for(let E=td-1;E>=0;E--)if(0!==tn[E]){for(let I=E+1;I<te;I++){let P=0;for(let _=E;_<N;_++)P+=ta.get(_,E)*ta.get(_,I);P=-P/ta.get(E,E);for(let _=E;_<N;_++)ta.set(_,I,ta.get(_,I)+P*ta.get(_,E))}for(let I=E;I<N;I++)ta.set(I,E,-ta.get(I,E));ta.set(E,E,1+ta.get(E,E));for(let I=0;I<E-1;I++)ta.set(I,E,0)}else{for(let I=0;I<N;I++)ta.set(I,E,0);ta.set(E,E,1)}}if(J)for(let E=F-1;E>=0;E--){if(E<tm&&0!==tu[E])for(let I=E+1;I<F;I++){let P=0;for(let _=E+1;_<F;_++)P+=th.get(_,E)*th.get(_,I);P=-P/th.get(E+1,E);for(let _=E+1;_<F;_++)th.set(_,I,th.get(_,I)+P*th.get(_,E))}for(let I=0;I<F;I++)th.set(I,E,0);th.set(E,E,1)}let tw=tg-1,tb=0,ty=Number.EPSILON;for(;tg>0;){let E,I;for(E=tg-2;E>=-1&&-1!==E;E--){let I=Number.MIN_VALUE+ty*Math.abs(tn[E]+Math.abs(tn[E+1]));if(Math.abs(tu[E])<=I||Number.isNaN(tu[E])){tu[E]=0;break}}if(E===tg-2)I=4;else{let P;for(P=tg-1;P>=E&&P!==E;P--){let I=(P!==tg?Math.abs(tu[P]):0)+(P!==E+1?Math.abs(tu[P-1]):0);if(Math.abs(tn[P])<=ty*I){tn[P]=0;break}}P===E?I=3:P===tg-1?I=1:(I=2,E=P)}switch(E++,I){case 1:{let I=tu[tg-2];tu[tg-2]=0;for(let P=tg-2;P>=E;P--){let _=(0,L.G)(tn[P],I),T=tn[P]/_,N=I/_;if(tn[P]=_,P!==E&&(I=-N*tu[P-1],tu[P-1]=T*tu[P-1]),J)for(let E=0;E<F;E++)_=T*th.get(E,P)+N*th.get(E,tg-1),th.set(E,tg-1,-N*th.get(E,P)+T*th.get(E,tg-1)),th.set(E,P,_)}break}case 2:{let I=tu[E-1];tu[E-1]=0;for(let P=E;P<tg;P++){let _=(0,L.G)(tn[P],I),T=tn[P]/_,F=I/_;if(tn[P]=_,I=-F*tu[P],tu[P]=T*tu[P],W)for(let I=0;I<N;I++)_=T*ta.get(I,P)+F*ta.get(I,E-1),ta.set(I,E-1,-F*ta.get(I,P)+T*ta.get(I,E-1)),ta.set(I,P,_)}break}case 3:{let I=Math.max(Math.abs(tn[tg-1]),Math.abs(tn[tg-2]),Math.abs(tu[tg-2]),Math.abs(tn[E]),Math.abs(tu[E])),P=tn[tg-1]/I,_=tn[tg-2]/I,T=tu[tg-2]/I,O=tn[E]/I,$=tu[E]/I,Z=((_+P)*(_-P)+T*T)/2,Q=P*T*(P*T),te=0;(0!==Z||0!==Q)&&(te=Z<0?0-Math.sqrt(Z*Z+Q):Math.sqrt(Z*Z+Q),te=Q/(Z+te));let ti=(O+P)*(O-P)+te,tf=O*$;for(let I=E;I<tg-1;I++){let P=(0,L.G)(ti,tf);0===P&&(P=Number.MIN_VALUE);let _=ti/P,T=tf/P;if(I!==E&&(tu[I-1]=P),ti=_*tn[I]+T*tu[I],tu[I]=_*tu[I]-T*tn[I],tf=T*tn[I+1],tn[I+1]=_*tn[I+1],J)for(let E=0;E<F;E++)P=_*th.get(E,I)+T*th.get(E,I+1),th.set(E,I+1,-T*th.get(E,I)+_*th.get(E,I+1)),th.set(E,I,P);if(0===(P=(0,L.G)(ti,tf))&&(P=Number.MIN_VALUE),_=ti/P,T=tf/P,tn[I]=P,ti=_*tu[I]+T*tn[I+1],tn[I+1]=-T*tu[I]+_*tn[I+1],tf=T*tu[I+1],tu[I+1]=_*tu[I+1],W&&I<N-1)for(let E=0;E<N;E++)P=_*ta.get(E,I)+T*ta.get(E,I+1),ta.set(E,I+1,-T*ta.get(E,I)+_*ta.get(E,I+1)),ta.set(E,I,P)}tu[tg-2]=ti,tb+=1;break}case 4:if(tn[E]<=0&&(tn[E]=tn[E]<0?-tn[E]:0,J))for(let I=0;I<=tw;I++)th.set(I,E,-th.get(I,E));for(;E<tw&&!(tn[E]>=tn[E+1]);){let I=tn[E];if(tn[E]=tn[E+1],tn[E+1]=I,J&&E<F-1)for(let P=0;P<F;P++)I=th.get(P,E+1),th.set(P,E+1,th.get(P,E)),th.set(P,E,I);if(W&&E<N-1)for(let P=0;P<N;P++)I=ta.get(P,E+1),ta.set(P,E+1,ta.get(P,E)),ta.set(P,E,I);E++}tb=0,tg--}}if(Q){let E=th;th=ta,ta=E}this.m=N,this.n=F,this.s=tn,this.U=ta,this.V=th}solve(E){let I=E,P=this.threshold,T=this.s.length,L=_.Z.zeros(T,T);for(let E=0;E<T;E++)Math.abs(this.s[E])<=P?L.set(E,E,0):L.set(E,E,1/this.s[E]);let N=this.U,F=this.rightSingularVectors,O=F.mmul(L),$=F.rows,Z=N.rows,W=_.Z.zeros($,Z);for(let E=0;E<$;E++)for(let I=0;I<Z;I++){let P=0;for(let _=0;_<T;_++)P+=O.get(E,_)*N.get(I,_);W.set(E,I,P)}return W.mmul(I)}solveForDiagonal(E){return this.solve(_.Z.diag(E))}inverse(){let E=this.V,I=this.threshold,P=E.rows,T=E.columns,L=new _.Z(P,this.s.length);for(let _=0;_<P;_++)for(let P=0;P<T;P++)Math.abs(this.s[P])>I&&L.set(_,P,E.get(_,P)/this.s[P]);let N=this.U,F=N.rows,O=N.columns,$=new _.Z(P,F);for(let E=0;E<P;E++)for(let I=0;I<F;I++){let P=0;for(let _=0;_<O;_++)P+=L.get(E,_)*N.get(I,_);$.set(E,I,P)}return $}get condition(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}get norm2(){return this.s[0]}get rank(){let E=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,I=0,P=this.s;for(let _=0,T=P.length;_<T;_++)P[_]>E&&I++;return I}get diagonal(){return Array.from(this.s)}get threshold(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}get leftSingularVectors(){return this.U}get rightSingularVectors(){return this.V}get diagonalMatrix(){return _.Z.diag(this.s)}}},6310:function(E,I,P){"use strict";function _(E,I){let P=0;return Math.abs(E)>Math.abs(I)?(P=I/E,Math.abs(E)*Math.sqrt(1+P*P)):0!==I?(P=E/I,Math.abs(I)*Math.sqrt(1+P*P)):0}P.d(I,{G:function(){return _}})},8345:function(E,I,P){"use strict";P.d(I,{F:function(){return $},S:function(){return O}});var _=P(2313),T=P(7072),L=P(6943),N=P(5427),F=P(1548);function O(E,I=!1){return(E=F.Z.checkMatrix(E),I)?new L.Z(E).inverse():$(E,N.Z.eye(E.rows))}function $(E,I,P=!1){return(E=F.Z.checkMatrix(E),I=F.Z.checkMatrix(I),P)?new L.Z(E).solve(I):E.isSquare()?new _.Z(E).solve(I):new T.Z(E).solve(I)}},6705:function(E,I,P){"use strict";P.r(I),P.d(I,{AbstractMatrix:function(){return _.X},CHO:function(){return tI},CholeskyDecomposition:function(){return tI},EVD:function(){return tx},EigenvalueDecomposition:function(){return tx},LU:function(){return tf.Z},LuDecomposition:function(){return tf.Z},Matrix:function(){return _.Z},MatrixColumnSelectionView:function(){return F},MatrixColumnView:function(){return N},MatrixFlipColumnView:function(){return O},MatrixFlipRowView:function(){return $},MatrixRowSelectionView:function(){return W},MatrixRowView:function(){return Z},MatrixSelectionView:function(){return J},MatrixSubView:function(){return Q},MatrixTransposeView:function(){return te.Z},NIPALS:function(){return tD},Nipals:function(){return tD},QR:function(){return tP.Z},QrDecomposition:function(){return tP.Z},SVD:function(){return td.Z},SingularValueDecomposition:function(){return td.Z},WrapperMatrix1D:function(){return tn},WrapperMatrix2D:function(){return ta.Z},correlation:function(){return ty},covariance:function(){return tb},default:function(){return _.Z},determinant:function(){return tc},inverse:function(){return tu.S},linearDependencies:function(){return tg},pseudoInverse:function(){return tw},solve:function(){return tu.F},wrap:function(){return th}});var _=P(5427),T=P(3018),L=P(4920);class N extends L.Z{constructor(E,I){(0,T.bp)(E,I),super(E,E.rows,1),this.column=I}set(E,I,P){return this.matrix.set(E,this.column,P),this}get(E){return this.matrix.get(E,this.column)}}class F extends L.Z{constructor(E,I){(0,T.g)(E,I),super(E,E.rows,I.length),this.columnIndices=I}set(E,I,P){return this.matrix.set(E,this.columnIndices[I],P),this}get(E,I){return this.matrix.get(E,this.columnIndices[I])}}class O extends L.Z{constructor(E){super(E,E.rows,E.columns)}set(E,I,P){return this.matrix.set(E,this.columns-I-1,P),this}get(E,I){return this.matrix.get(E,this.columns-I-1)}}class $ extends L.Z{constructor(E){super(E,E.rows,E.columns)}set(E,I,P){return this.matrix.set(this.rows-E-1,I,P),this}get(E,I){return this.matrix.get(this.rows-E-1,I)}}class Z extends L.Z{constructor(E,I){(0,T.zb)(E,I),super(E,1,E.columns),this.row=I}set(E,I,P){return this.matrix.set(this.row,I,P),this}get(E,I){return this.matrix.get(this.row,I)}}class W extends L.Z{constructor(E,I){(0,T.ZR)(E,I),super(E,I.length,E.columns),this.rowIndices=I}set(E,I,P){return this.matrix.set(this.rowIndices[E],I,P),this}get(E,I){return this.matrix.get(this.rowIndices[E],I)}}class J extends L.Z{constructor(E,I,P){(0,T.ZR)(E,I),(0,T.g)(E,P),super(E,I.length,P.length),this.rowIndices=I,this.columnIndices=P}set(E,I,P){return this.matrix.set(this.rowIndices[E],this.columnIndices[I],P),this}get(E,I){return this.matrix.get(this.rowIndices[E],this.columnIndices[I])}}class Q extends L.Z{constructor(E,I,P,_,L){(0,T.J5)(E,I,P,_,L),super(E,P-I+1,L-_+1),this.startRow=I,this.startColumn=_}set(E,I,P){return this.matrix.set(this.startRow+E,this.startColumn+I,P),this}get(E,I){return this.matrix.get(this.startRow+E,this.startColumn+I)}}var te=P(5922),ti=P(4091);class tn extends _.X{constructor(E,I={}){let{rows:P=1}=I;if(E.length%P!=0)throw Error("the data length is not divisible by the number of rows");super(),this.rows=P,this.columns=E.length/P,this.data=E}set(E,I,P){let _=this._calculateIndex(E,I);return this.data[_]=P,this}get(E,I){let P=this._calculateIndex(E,I);return this.data[P]}_calculateIndex(E,I){return E*this.columns+I}}var ta=P(1548);function th(E,I){if((0,ti.N)(E))return E[0]&&(0,ti.N)(E[0])?new ta.Z(E):new tn(E,I);throw Error("the argument is not an array")}var tu=P(8345),tf=P(2313);function tc(E){if((E=_.Z.checkMatrix(E)).isSquare()){let I,P,_;if(0===E.columns)return 1;if(2===E.columns)return I=E.get(0,0),P=E.get(0,1),_=E.get(1,0),I*E.get(1,1)-P*_;if(3!==E.columns)return new tf.Z(E).determinant;{let T,L,N;return T=new J(E,[1,2],[1,2]),L=new J(E,[1,2],[0,2]),N=new J(E,[1,2],[0,1]),I=E.get(0,0),P=E.get(0,1),_=E.get(0,2),I*tc(T)-P*tc(L)+_*tc(N)}}throw Error("determinant can only be calculated for a square matrix")}var td=P(6943);function tm(E,I){let P=[];for(let _=0;_<E;_++)_!==I&&P.push(_);return P}function tp(E,I,P,_=1e-9,T=1e-9){if(E>T)return Array(I.rows+1).fill(0);{let E=I.addRow(P,[0]);for(let I=0;I<E.rows;I++)Math.abs(E.get(I,0))<_&&E.set(I,0,0);return E.to1DArray()}}function tg(E,I={}){let{thresholdValue:P=1e-9,thresholdError:T=1e-9}=I,L=(E=_.Z.checkMatrix(E)).rows,N=new _.Z(L,L);for(let I=0;I<L;I++){let F=_.Z.columnVector(E.getRow(I)),O=E.subMatrixRow(tm(L,I)).transpose(),$=new td.Z(O).solve(F),Z=_.Z.sub(F,O.mmul($)).abs().max();N.setRow(I,tp(Z,$,I,P,T))}return N}function tw(E,I=Number.EPSILON){if((E=_.Z.checkMatrix(E)).isEmpty())return E.transpose();let P=new td.Z(E,{autoTranspose:!0}),T=P.leftSingularVectors,L=P.rightSingularVectors,N=P.diagonal;for(let E=0;E<N.length;E++)Math.abs(N[E])>I?N[E]=1/N[E]:N[E]=0;return L.mmul(_.Z.diag(N).mmul(T.transpose()))}function tb(E,I=E,P={}){E=new _.Z(E);let T=!1;if("object"!=typeof I||_.Z.isMatrix(I)||(0,ti.N)(I)?I=new _.Z(I):(P=I,I=E,T=!0),E.rows!==I.rows)throw TypeError("Both matrices must have the same number of rows");let{center:L=!0}=P;L&&(E=E.center("column"),T||(I=I.center("column")));let N=E.transpose().mmul(I);for(let I=0;I<N.rows;I++)for(let P=0;P<N.columns;P++)N.set(I,P,N.get(I,P)*(1/(E.rows-1)));return N}function ty(E,I=E,P={}){E=new _.Z(E);let T=!1;if("object"!=typeof I||_.Z.isMatrix(I)||(0,ti.N)(I)?I=new _.Z(I):(P=I,I=E,T=!0),E.rows!==I.rows)throw TypeError("Both matrices must have the same number of rows");let{center:L=!0,scale:N=!0}=P;L&&(E.center("column"),T||I.center("column")),N&&(E.scale("column"),T||I.scale("column"));let F=E.standardDeviation("column",{unbiased:!0}),O=T?F:I.standardDeviation("column",{unbiased:!0}),$=E.transpose().mmul(I);for(let I=0;I<$.rows;I++)for(let P=0;P<$.columns;P++)$.set(I,P,$.get(I,P)*(1/(F[I]*O[P]))*(1/(E.rows-1)));return $}var tv=P(6310);class tx{constructor(E,I={}){let P,T;let{assumeSymmetric:L=!1}=I;if(!(E=ta.Z.checkMatrix(E)).isSquare())throw Error("Matrix is not a square matrix");if(E.isEmpty())throw Error("Matrix must be non-empty");let N=E.columns,F=new _.Z(N,N),O=new Float64Array(N),$=new Float64Array(N),Z=E,W=!1;if(W=!!L||E.isSymmetric()){for(P=0;P<N;P++)for(T=0;T<N;T++)F.set(P,T,Z.get(P,T));tM(N,$,O,F),tk(N,$,O,F)}else{let E=new _.Z(N,N),I=new Float64Array(N);for(T=0;T<N;T++)for(P=0;P<N;P++)E.set(P,T,Z.get(P,T));tE(N,E,I,F),tA(N,$,O,F,E)}this.n=N,this.e=$,this.d=O,this.V=F}get realEigenvalues(){return Array.from(this.d)}get imaginaryEigenvalues(){return Array.from(this.e)}get eigenvectorMatrix(){return this.V}get diagonalMatrix(){let E,I,P=this.n,T=this.e,L=this.d,N=new _.Z(P,P);for(E=0;E<P;E++){for(I=0;I<P;I++)N.set(E,I,0);N.set(E,E,L[E]),T[E]>0?N.set(E,E+1,T[E]):T[E]<0&&N.set(E,E-1,T[E])}return N}}function tM(E,I,P,_){let T,L,N,F,O,$,Z,W;for(O=0;O<E;O++)P[O]=_.get(E-1,O);for(F=E-1;F>0;F--){for($=0,W=0,N=0;$<F;$++)W+=Math.abs(P[$]);if(0===W)for(O=0,I[F]=P[F-1];O<F;O++)P[O]=_.get(F-1,O),_.set(F,O,0),_.set(O,F,0);else{for($=0;$<F;$++)P[$]/=W,N+=P[$]*P[$];for(T=P[F-1],L=Math.sqrt(N),T>0&&(L=-L),I[F]=W*L,N-=T*L,P[F-1]=T-L,O=0;O<F;O++)I[O]=0;for(O=0;O<F;O++){for(T=P[O],_.set(O,F,T),L=I[O]+_.get(O,O)*T,$=O+1;$<=F-1;$++)L+=_.get($,O)*P[$],I[$]+=_.get($,O)*T;I[O]=L}for(O=0,T=0;O<F;O++)I[O]/=N,T+=I[O]*P[O];for(O=0,Z=T/(N+N);O<F;O++)I[O]-=Z*P[O];for(O=0;O<F;O++){for(T=P[O],L=I[O],$=O;$<=F-1;$++)_.set($,O,_.get($,O)-(T*I[$]+L*P[$]));P[O]=_.get(F-1,O),_.set(F,O,0)}}P[F]=N}for(F=0;F<E-1;F++){if(_.set(E-1,F,_.get(F,F)),_.set(F,F,1),0!==(N=P[F+1])){for($=0;$<=F;$++)P[$]=_.get($,F+1)/N;for(O=0;O<=F;O++){for($=0,L=0;$<=F;$++)L+=_.get($,F+1)*_.get($,O);for($=0;$<=F;$++)_.set($,O,_.get($,O)-L*P[$])}}for($=0;$<=F;$++)_.set($,F+1,0)}for(O=0;O<E;O++)P[O]=_.get(E-1,O),_.set(E-1,O,0);_.set(E-1,E-1,1),I[0]=0}function tk(E,I,P,_){let T,L,N,F,O,$,Z,W,J,Q,te,ti,tn,ta,th,tu,tf;for(N=1;N<E;N++)I[N-1]=I[N];I[E-1]=0;let tc=0,td=0,tm=Number.EPSILON;for($=0;$<E;$++){for(td=Math.max(td,Math.abs(P[$])+Math.abs(I[$])),Z=$;Z<E&&!(Math.abs(I[Z])<=tm*td);)Z++;if(Z>$){tf=0;do{for(tf+=1,T=P[$],W=(P[$+1]-T)/(2*I[$]),J=(0,tv.G)(W,1),W<0&&(J=-J),P[$]=I[$]/(W+J),P[$+1]=I[$]*(W+J),Q=P[$+1],L=T-P[$],N=$+2;N<E;N++)P[N]-=L;for(tc+=L,W=P[Z],ti=te=1,tn=te,ta=I[$+1],th=0,tu=0,N=Z-1;N>=$;N--)for(O=0,tn=ti,ti=te,tu=th,T=te*I[N],L=te*W,J=(0,tv.G)(W,I[N]),I[N+1]=th*J,th=I[N]/J,W=(te=W/J)*P[N]-th*T,P[N+1]=L+th*(te*T+th*P[N]);O<E;O++)L=_.get(O,N+1),_.set(O,N+1,th*_.get(O,N)+te*L),_.set(O,N,te*_.get(O,N)-th*L);W=-th*tu*tn*ta*I[$]/Q,I[$]=th*W,P[$]=te*W}while(Math.abs(I[$])>tm*td)}P[$]=P[$]+tc,I[$]=0}for(N=0;N<E-1;N++){for(O=N,W=P[N],F=N+1;F<E;F++)P[F]<W&&(O=F,W=P[F]);if(O!==N)for(F=0,P[O]=P[N],P[N]=W;F<E;F++)W=_.get(F,N),_.set(F,N,_.get(F,O)),_.set(F,O,W)}}function tE(E,I,P,_){let T,L,N,F,O,$,Z,W=0,J=E-1;for($=1;$<=J-1;$++){for(Z=0,F=$;F<=J;F++)Z+=Math.abs(I.get(F,$-1));if(0!==Z){for(N=0,F=J;F>=$;F--)P[F]=I.get(F,$-1)/Z,N+=P[F]*P[F];for(L=Math.sqrt(N),P[$]>0&&(L=-L),N-=P[$]*L,P[$]=P[$]-L,O=$;O<E;O++){for(T=0,F=J;F>=$;F--)T+=P[F]*I.get(F,O);for(T/=N,F=$;F<=J;F++)I.set(F,O,I.get(F,O)-T*P[F])}for(F=0;F<=J;F++){for(T=0,O=J;O>=$;O--)T+=P[O]*I.get(F,O);for(T/=N,O=$;O<=J;O++)I.set(F,O,I.get(F,O)-T*P[O])}P[$]=Z*P[$],I.set($,$-1,Z*L)}}for(F=0;F<E;F++)for(O=0;O<E;O++)_.set(F,O,F===O?1:0);for($=J-1;$>=W+1;$--)if(0!==I.get($,$-1)){for(F=$+1;F<=J;F++)P[F]=I.get(F,$-1);for(O=$;O<=J;O++){for(L=0,F=$;F<=J;F++)L+=P[F]*_.get(F,O);for(L=L/P[$]/I.get($,$-1),F=$;F<=J;F++)_.set(F,O,_.get(F,O)+L*P[F])}}}function tA(E,I,P,_,T){let L,N,F,O,$,Z,W,J,Q,te,ti,tn,ta,th,tu,tf=E-1,tc=0,td=E-1,tm=Number.EPSILON,tp=0,tg=0,tw=0,tb=0,ty=0,tv=0,tx=0,tM=0;for(L=0;L<E;L++)for((L<tc||L>td)&&(P[L]=T.get(L,L),I[L]=0),N=Math.max(L-1,0);N<E;N++)tg+=Math.abs(T.get(L,N));for(;tf>=tc;){for(O=tf;O>tc&&(0===(tv=Math.abs(T.get(O-1,O-1))+Math.abs(T.get(O,O)))&&(tv=tg),!(Math.abs(T.get(O,O-1))<tm*tv));)O--;if(O===tf)T.set(tf,tf,T.get(tf,tf)+tp),P[tf]=T.get(tf,tf),I[tf]=0,tf--,tM=0;else if(O===tf-1){if(W=T.get(tf,tf-1)*T.get(tf-1,tf),tx=Math.sqrt(Math.abs(tb=(tw=(T.get(tf-1,tf-1)-T.get(tf,tf))/2)*tw+W)),T.set(tf,tf,T.get(tf,tf)+tp),T.set(tf-1,tf-1,T.get(tf-1,tf-1)+tp),J=T.get(tf,tf),tb>=0){for(tx=tw>=0?tw+tx:tw-tx,P[tf-1]=J+tx,P[tf]=P[tf-1],0!==tx&&(P[tf]=J-W/tx),I[tf-1]=0,I[tf]=0,tv=Math.abs(J=T.get(tf,tf-1))+Math.abs(tx),ty=Math.sqrt((tw=J/tv)*tw+(tb=tx/tv)*tb),tw/=ty,tb/=ty,N=tf-1;N<E;N++)tx=T.get(tf-1,N),T.set(tf-1,N,tb*tx+tw*T.get(tf,N)),T.set(tf,N,tb*T.get(tf,N)-tw*tx);for(L=0;L<=tf;L++)tx=T.get(L,tf-1),T.set(L,tf-1,tb*tx+tw*T.get(L,tf)),T.set(L,tf,tb*T.get(L,tf)-tw*tx);for(L=tc;L<=td;L++)tx=_.get(L,tf-1),_.set(L,tf-1,tb*tx+tw*_.get(L,tf)),_.set(L,tf,tb*_.get(L,tf)-tw*tx)}else P[tf-1]=J+tw,P[tf]=J+tw,I[tf-1]=tx,I[tf]=-tx;tf-=2,tM=0}else{if(J=T.get(tf,tf),Q=0,W=0,O<tf&&(Q=T.get(tf-1,tf-1),W=T.get(tf,tf-1)*T.get(tf-1,tf)),10===tM){for(tp+=J,L=tc;L<=tf;L++)T.set(L,L,T.get(L,L)-J);J=Q=.75*(tv=Math.abs(T.get(tf,tf-1))+Math.abs(T.get(tf-1,tf-2))),W=-.4375*tv*tv}if(30===tM&&(tv=(tv=(Q-J)/2)*tv+W)>0){for(tv=Math.sqrt(tv),Q<J&&(tv=-tv),tv=J-W/((Q-J)/2+tv),L=tc;L<=tf;L++)T.set(L,L,T.get(L,L)-tv);tp+=tv,J=Q=W=.964}for(tM+=1,$=tf-2;$>=O&&(tv=Math.abs(tw=((ty=J-(tx=T.get($,$)))*(tv=Q-tx)-W)/T.get($+1,$)+T.get($,$+1))+Math.abs(tb=T.get($+1,$+1)-tx-ty-tv)+Math.abs(ty=T.get($+2,$+1)),tw/=tv,tb/=tv,ty/=tv,!($===O||Math.abs(T.get($,$-1))*(Math.abs(tb)+Math.abs(ty))<tm*(Math.abs(tw)*(Math.abs(T.get($-1,$-1))+Math.abs(tx)+Math.abs(T.get($+1,$+1))))));)$--;for(L=$+2;L<=tf;L++)T.set(L,L-2,0),L>$+2&&T.set(L,L-3,0);for(F=$;F<=tf-1&&(th=F!==tf-1,F!==$&&0!==(J=Math.abs(tw=T.get(F,F-1))+Math.abs(tb=T.get(F+1,F-1))+Math.abs(ty=th?T.get(F+2,F-1):0))&&(tw/=J,tb/=J,ty/=J),0!==J);F++)if(tv=Math.sqrt(tw*tw+tb*tb+ty*ty),tw<0&&(tv=-tv),0!==tv){for(F!==$?T.set(F,F-1,-tv*J):O!==$&&T.set(F,F-1,-T.get(F,F-1)),tw+=tv,J=tw/tv,Q=tb/tv,tx=ty/tv,tb/=tw,ty/=tw,N=F;N<E;N++)tw=T.get(F,N)+tb*T.get(F+1,N),th&&(tw+=ty*T.get(F+2,N),T.set(F+2,N,T.get(F+2,N)-tw*tx)),T.set(F,N,T.get(F,N)-tw*J),T.set(F+1,N,T.get(F+1,N)-tw*Q);for(L=0;L<=Math.min(tf,F+3);L++)tw=J*T.get(L,F)+Q*T.get(L,F+1),th&&(tw+=tx*T.get(L,F+2),T.set(L,F+2,T.get(L,F+2)-tw*ty)),T.set(L,F,T.get(L,F)-tw),T.set(L,F+1,T.get(L,F+1)-tw*tb);for(L=tc;L<=td;L++)tw=J*_.get(L,F)+Q*_.get(L,F+1),th&&(tw+=tx*_.get(L,F+2),_.set(L,F+2,_.get(L,F+2)-tw*ty)),_.set(L,F,_.get(L,F)-tw),_.set(L,F+1,_.get(L,F+1)-tw*tb)}}}if(0!==tg){for(tf=E-1;tf>=0;tf--)if(tw=P[tf],0===(tb=I[tf]))for(O=tf,T.set(tf,tf,1),L=tf-1;L>=0;L--){for(W=T.get(L,L)-tw,ty=0,N=O;N<=tf;N++)ty+=T.get(L,N)*T.get(N,tf);if(I[L]<0)tx=W,tv=ty;else if(O=L,0===I[L]?T.set(L,tf,0!==W?-ty/W:-ty/(tm*tg)):(J=T.get(L,L+1),Q=T.get(L+1,L),tb=(P[L]-tw)*(P[L]-tw)+I[L]*I[L],Z=(J*tv-tx*ty)/tb,T.set(L,tf,Z),T.set(L+1,tf,Math.abs(J)>Math.abs(tx)?(-ty-W*Z)/J:(-tv-Q*Z)/tx)),tm*(Z=Math.abs(T.get(L,tf)))*Z>1)for(N=L;N<=tf;N++)T.set(N,tf,T.get(N,tf)/Z)}else if(tb<0)for(O=tf-1,Math.abs(T.get(tf,tf-1))>Math.abs(T.get(tf-1,tf))?(T.set(tf-1,tf-1,tb/T.get(tf,tf-1)),T.set(tf-1,tf,-(T.get(tf,tf)-tw)/T.get(tf,tf-1))):(tu=tS(0,-T.get(tf-1,tf),T.get(tf-1,tf-1)-tw,tb),T.set(tf-1,tf-1,tu[0]),T.set(tf-1,tf,tu[1])),T.set(tf,tf-1,0),T.set(tf,tf,1),L=tf-2;L>=0;L--){for(te=0,ti=0,N=O;N<=tf;N++)te+=T.get(L,N)*T.get(N,tf-1),ti+=T.get(L,N)*T.get(N,tf);if(W=T.get(L,L)-tw,I[L]<0)tx=W,ty=te,tv=ti;else if(O=L,0===I[L]?(tu=tS(-te,-ti,W,tb),T.set(L,tf-1,tu[0]),T.set(L,tf,tu[1])):(J=T.get(L,L+1),Q=T.get(L+1,L),tn=(P[L]-tw)*(P[L]-tw)+I[L]*I[L]-tb*tb,ta=(P[L]-tw)*2*tb,0===tn&&0===ta&&(tn=tm*tg*(Math.abs(W)+Math.abs(tb)+Math.abs(J)+Math.abs(Q)+Math.abs(tx))),tu=tS(J*ty-tx*te+tb*ti,J*tv-tx*ti-tb*te,tn,ta),T.set(L,tf-1,tu[0]),T.set(L,tf,tu[1]),Math.abs(J)>Math.abs(tx)+Math.abs(tb)?(T.set(L+1,tf-1,(-te-W*T.get(L,tf-1)+tb*T.get(L,tf))/J),T.set(L+1,tf,(-ti-W*T.get(L,tf)-tb*T.get(L,tf-1))/J)):(tu=tS(-ty-Q*T.get(L,tf-1),-tv-Q*T.get(L,tf),tx,tb),T.set(L+1,tf-1,tu[0]),T.set(L+1,tf,tu[1]))),tm*(Z=Math.max(Math.abs(T.get(L,tf-1)),Math.abs(T.get(L,tf))))*Z>1)for(N=L;N<=tf;N++)T.set(N,tf-1,T.get(N,tf-1)/Z),T.set(N,tf,T.get(N,tf)/Z)}for(L=0;L<E;L++)if(L<tc||L>td)for(N=L;N<E;N++)_.set(L,N,T.get(L,N));for(N=E-1;N>=tc;N--)for(L=tc;L<=td;L++){for(tx=0,F=tc;F<=Math.min(N,td);F++)tx+=_.get(L,F)*T.get(F,N);_.set(L,N,tx)}}}function tS(E,I,P,_){let T,L;return Math.abs(P)>Math.abs(_)?(T=_/P,L=P+T*_,[(E+T*I)/L,(I-T*E)/L]):(T=P/_,L=_+T*P,[(T*E+I)/L,(T*I-E)/L])}class tI{constructor(E){let I,P,T;if(!(E=ta.Z.checkMatrix(E)).isSymmetric())throw Error("Matrix is not symmetric");let L=E,N=L.rows,F=new _.Z(N,N),O=!0;for(P=0;P<N;P++){let E=0;for(T=0;T<P;T++){let _=0;for(I=0;I<T;I++)_+=F.get(T,I)*F.get(P,I);_=(L.get(P,T)-_)/F.get(T,T),F.set(P,T,_),E+=_*_}for(O&=(E=L.get(P,P)-E)>0,F.set(P,P,Math.sqrt(Math.max(E,0))),T=P+1;T<N;T++)F.set(P,T,0)}this.L=F,this.positiveDefinite=!!O}isPositiveDefinite(){return this.positiveDefinite}solve(E){let I,P,_;E=ta.Z.checkMatrix(E);let T=this.L,L=T.rows;if(E.rows!==L)throw Error("Matrix dimensions do not match");if(!1===this.isPositiveDefinite())throw Error("Matrix is not positive definite");let N=E.columns,F=E.clone();for(_=0;_<L;_++)for(P=0;P<N;P++){for(I=0;I<_;I++)F.set(_,P,F.get(_,P)-F.get(I,P)*T.get(_,I));F.set(_,P,F.get(_,P)/T.get(_,_))}for(_=L-1;_>=0;_--)for(P=0;P<N;P++){for(I=_+1;I<L;I++)F.set(_,P,F.get(_,P)-F.get(I,P)*T.get(I,_));F.set(_,P,F.get(_,P)/T.get(_,_))}return F}get lowerTriangularMatrix(){return this.L}}var tP=P(7072);class tD{constructor(E,I={}){let P,T,L,N,F;E=ta.Z.checkMatrix(E);let{Y:O}=I,{scaleScores:$=!1,maxIterations:Z=1e3,terminationCriteria:W=1e-10}=I;if(O){if((O=(0,ti.N)(O)&&"number"==typeof O[0]?_.Z.columnVector(O):ta.Z.checkMatrix(O)).rows!==E.rows)throw Error("Y should have the same number of rows as X");P=O.getColumnVector(0)}else P=E.getColumnVector(0);let J=1;for(let I=0;I<Z&&J>W;I++)N=(N=E.transpose().mmul(P).div(P.transpose().mmul(P).get(0,0))).div(N.norm()),T=E.mmul(N).div(N.transpose().mmul(N).get(0,0)),I>0&&(J=T.clone().sub(F).pow(2).sum()),F=T.clone(),O?(L=(L=O.transpose().mmul(T).div(T.transpose().mmul(T).get(0,0))).div(L.norm()),P=O.mmul(L).div(L.transpose().mmul(L).get(0,0))):P=T;if(O){let I=E.transpose().mmul(T).div(T.transpose().mmul(T).get(0,0));I=I.div(I.norm());let _=E.clone().sub(T.clone().mmul(I.transpose())),F=P.transpose().mmul(T).div(T.transpose().mmul(T).get(0,0)),$=O.clone().sub(T.clone().mulS(F.get(0,0)).mmul(L.transpose()));this.t=T,this.p=I.transpose(),this.w=N.transpose(),this.q=L,this.u=P,this.s=T.transpose().mmul(T),this.xResidual=_,this.yResidual=$,this.betas=F}else this.w=N.transpose(),this.s=T.transpose().mmul(T).sqrt(),$?this.t=T.clone().div(this.s.get(0,0)):this.t=T,this.xResidual=E.sub(T.mmul(N.transpose()))}}},5427:function(E,I,P){"use strict";P.d(I,{X:function(){return tA},Z:function(){return tP}});var _=P(4091);function T(E){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,_.N)(E))throw TypeError("input must be an array");if(0===E.length)throw TypeError("input must not be empty");var P=I.fromIndex,T=void 0===P?0:P,L=I.toIndex,N=void 0===L?E.length:L;if(T<0||T>=E.length||!Number.isInteger(T))throw Error("fromIndex must be a positive integer smaller than length");if(N<=T||N>E.length||!Number.isInteger(N))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var F=E[T],O=T+1;O<N;O++)E[O]>F&&(F=E[O]);return F}function L(E){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(0,_.N)(E))throw TypeError("input must be an array");if(0===E.length)throw TypeError("input must not be empty");var P=I.fromIndex,T=void 0===P?0:P,L=I.toIndex,N=void 0===L?E.length:L;if(T<0||T>=E.length||!Number.isInteger(T))throw Error("fromIndex must be a positive integer smaller than length");if(N<=T||N>E.length||!Number.isInteger(N))throw Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var F=E[T],O=T+1;O<N;O++)E[O]<F&&(F=E[O]);return F}function N(E){var I,P=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((0,_.N)(E)){if(0===E.length)throw TypeError("input must not be empty")}else throw TypeError("input must be an array");if(void 0!==P.output){if(!(0,_.N)(P.output))throw TypeError("output option must be an array if specified");I=P.output}else I=Array(E.length);var N=L(E),F=T(E);if(N===F)throw RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var O=P.min,$=void 0===O?P.autoMinMax?N:0:O,Z=P.max,W=void 0===Z?P.autoMinMax?F:1:Z;if($>=W)throw RangeError("min option must be smaller than max option");for(var J=(W-$)/(F-N),Q=0;Q<E.length;Q++)I[Q]=(E[Q]-N)*J+$;return I}let F=" ".repeat(2),O=" ".repeat(4);function $(){return Z(this)}function Z(E,I={}){let{maxRows:P=15,maxColumns:_=10,maxNumSize:T=8,padMinus:L="auto"}=I;return`${E.constructor.name} {
${F}[
${O}${W(E,P,_,T,L)}
${F}]
${F}rows: ${E.rows}
${F}columns: ${E.columns}
}`}function W(E,I,P,_,T){let{rows:L,columns:N}=E,F=Math.min(L,I),$=Math.min(N,P),Z=[];if("auto"===T){T=!1;r:for(let I=0;I<F;I++)for(let P=0;P<$;P++)if(0>E.get(I,P)){T=!0;break r}}for(let I=0;I<F;I++){let P=[];for(let L=0;L<$;L++)P.push(J(E.get(I,L),_,T));Z.push(`${P.join(" ")}`)}return $!==N&&(Z[Z.length-1]+=` ... ${N-P} more columns`),F!==L&&Z.push(`... ${L-I} more rows`),Z.join(`
${O}`)}function J(E,I,P){return(E>=0&&P?` ${Q(E,I-1)}`:Q(E,I)).padEnd(I)}function Q(E,I){let P=E.toString();if(P.length<=I)return P;let _=E.toFixed(I);if(_.length>I&&(_=E.toFixed(Math.max(0,I-(_.length-I)))),_.length<=I&&!_.startsWith("0.000")&&!_.startsWith("-0.000"))return _;let T=E.toExponential(I);return T.length>I&&(T=E.toExponential(Math.max(0,I-(T.length-I)))),T.slice(0)}function te(E,I){E.prototype.add=function(E){return"number"==typeof E?this.addS(E):this.addM(E)},E.prototype.addS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)+E);return this},E.prototype.addM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)+E.get(I,P));return this},E.add=function(E,P){let _=new I(E);return _.add(P)},E.prototype.sub=function(E){return"number"==typeof E?this.subS(E):this.subM(E)},E.prototype.subS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)-E);return this},E.prototype.subM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)-E.get(I,P));return this},E.sub=function(E,P){let _=new I(E);return _.sub(P)},E.prototype.subtract=E.prototype.sub,E.prototype.subtractS=E.prototype.subS,E.prototype.subtractM=E.prototype.subM,E.subtract=E.sub,E.prototype.mul=function(E){return"number"==typeof E?this.mulS(E):this.mulM(E)},E.prototype.mulS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)*E);return this},E.prototype.mulM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)*E.get(I,P));return this},E.mul=function(E,P){let _=new I(E);return _.mul(P)},E.prototype.multiply=E.prototype.mul,E.prototype.multiplyS=E.prototype.mulS,E.prototype.multiplyM=E.prototype.mulM,E.multiply=E.mul,E.prototype.div=function(E){return"number"==typeof E?this.divS(E):this.divM(E)},E.prototype.divS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)/E);return this},E.prototype.divM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)/E.get(I,P));return this},E.div=function(E,P){let _=new I(E);return _.div(P)},E.prototype.divide=E.prototype.div,E.prototype.divideS=E.prototype.divS,E.prototype.divideM=E.prototype.divM,E.divide=E.div,E.prototype.mod=function(E){return"number"==typeof E?this.modS(E):this.modM(E)},E.prototype.modS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)%E);return this},E.prototype.modM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)%E.get(I,P));return this},E.mod=function(E,P){let _=new I(E);return _.mod(P)},E.prototype.modulus=E.prototype.mod,E.prototype.modulusS=E.prototype.modS,E.prototype.modulusM=E.prototype.modM,E.modulus=E.mod,E.prototype.and=function(E){return"number"==typeof E?this.andS(E):this.andM(E)},E.prototype.andS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)&E);return this},E.prototype.andM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)&E.get(I,P));return this},E.and=function(E,P){let _=new I(E);return _.and(P)},E.prototype.or=function(E){return"number"==typeof E?this.orS(E):this.orM(E)},E.prototype.orS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)|E);return this},E.prototype.orM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)|E.get(I,P));return this},E.or=function(E,P){let _=new I(E);return _.or(P)},E.prototype.xor=function(E){return"number"==typeof E?this.xorS(E):this.xorM(E)},E.prototype.xorS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)^E);return this},E.prototype.xorM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)^E.get(I,P));return this},E.xor=function(E,P){let _=new I(E);return _.xor(P)},E.prototype.leftShift=function(E){return"number"==typeof E?this.leftShiftS(E):this.leftShiftM(E)},E.prototype.leftShiftS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)<<E);return this},E.prototype.leftShiftM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)<<E.get(I,P));return this},E.leftShift=function(E,P){let _=new I(E);return _.leftShift(P)},E.prototype.signPropagatingRightShift=function(E){return"number"==typeof E?this.signPropagatingRightShiftS(E):this.signPropagatingRightShiftM(E)},E.prototype.signPropagatingRightShiftS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)>>E);return this},E.prototype.signPropagatingRightShiftM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)>>E.get(I,P));return this},E.signPropagatingRightShift=function(E,P){let _=new I(E);return _.signPropagatingRightShift(P)},E.prototype.rightShift=function(E){return"number"==typeof E?this.rightShiftS(E):this.rightShiftM(E)},E.prototype.rightShiftS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)>>>E);return this},E.prototype.rightShiftM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)>>>E.get(I,P));return this},E.rightShift=function(E,P){let _=new I(E);return _.rightShift(P)},E.prototype.zeroFillRightShift=E.prototype.rightShift,E.prototype.zeroFillRightShiftS=E.prototype.rightShiftS,E.prototype.zeroFillRightShiftM=E.prototype.rightShiftM,E.zeroFillRightShift=E.rightShift,E.prototype.not=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,~this.get(E,I));return this},E.not=function(E){let P=new I(E);return P.not()},E.prototype.abs=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.abs(this.get(E,I)));return this},E.abs=function(E){let P=new I(E);return P.abs()},E.prototype.acos=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.acos(this.get(E,I)));return this},E.acos=function(E){let P=new I(E);return P.acos()},E.prototype.acosh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.acosh(this.get(E,I)));return this},E.acosh=function(E){let P=new I(E);return P.acosh()},E.prototype.asin=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.asin(this.get(E,I)));return this},E.asin=function(E){let P=new I(E);return P.asin()},E.prototype.asinh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.asinh(this.get(E,I)));return this},E.asinh=function(E){let P=new I(E);return P.asinh()},E.prototype.atan=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.atan(this.get(E,I)));return this},E.atan=function(E){let P=new I(E);return P.atan()},E.prototype.atanh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.atanh(this.get(E,I)));return this},E.atanh=function(E){let P=new I(E);return P.atanh()},E.prototype.cbrt=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.cbrt(this.get(E,I)));return this},E.cbrt=function(E){let P=new I(E);return P.cbrt()},E.prototype.ceil=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.ceil(this.get(E,I)));return this},E.ceil=function(E){let P=new I(E);return P.ceil()},E.prototype.clz32=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.clz32(this.get(E,I)));return this},E.clz32=function(E){let P=new I(E);return P.clz32()},E.prototype.cos=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.cos(this.get(E,I)));return this},E.cos=function(E){let P=new I(E);return P.cos()},E.prototype.cosh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.cosh(this.get(E,I)));return this},E.cosh=function(E){let P=new I(E);return P.cosh()},E.prototype.exp=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.exp(this.get(E,I)));return this},E.exp=function(E){let P=new I(E);return P.exp()},E.prototype.expm1=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.expm1(this.get(E,I)));return this},E.expm1=function(E){let P=new I(E);return P.expm1()},E.prototype.floor=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.floor(this.get(E,I)));return this},E.floor=function(E){let P=new I(E);return P.floor()},E.prototype.fround=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.fround(this.get(E,I)));return this},E.fround=function(E){let P=new I(E);return P.fround()},E.prototype.log=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.log(this.get(E,I)));return this},E.log=function(E){let P=new I(E);return P.log()},E.prototype.log1p=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.log1p(this.get(E,I)));return this},E.log1p=function(E){let P=new I(E);return P.log1p()},E.prototype.log10=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.log10(this.get(E,I)));return this},E.log10=function(E){let P=new I(E);return P.log10()},E.prototype.log2=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.log2(this.get(E,I)));return this},E.log2=function(E){let P=new I(E);return P.log2()},E.prototype.round=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.round(this.get(E,I)));return this},E.round=function(E){let P=new I(E);return P.round()},E.prototype.sign=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.sign(this.get(E,I)));return this},E.sign=function(E){let P=new I(E);return P.sign()},E.prototype.sin=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.sin(this.get(E,I)));return this},E.sin=function(E){let P=new I(E);return P.sin()},E.prototype.sinh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.sinh(this.get(E,I)));return this},E.sinh=function(E){let P=new I(E);return P.sinh()},E.prototype.sqrt=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.sqrt(this.get(E,I)));return this},E.sqrt=function(E){let P=new I(E);return P.sqrt()},E.prototype.tan=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.tan(this.get(E,I)));return this},E.tan=function(E){let P=new I(E);return P.tan()},E.prototype.tanh=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.tanh(this.get(E,I)));return this},E.tanh=function(E){let P=new I(E);return P.tanh()},E.prototype.trunc=function(){for(let E=0;E<this.rows;E++)for(let I=0;I<this.columns;I++)this.set(E,I,Math.trunc(this.get(E,I)));return this},E.trunc=function(E){let P=new I(E);return P.trunc()},E.pow=function(E,P){let _=new I(E);return _.pow(P)},E.prototype.pow=function(E){return"number"==typeof E?this.powS(E):this.powM(E)},E.prototype.powS=function(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,Math.pow(this.get(I,P),E));return this},E.prototype.powM=function(E){if(E=I.checkMatrix(E),this.rows!==E.rows||this.columns!==E.columns)throw RangeError("Matrices dimensions must be equal");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,Math.pow(this.get(I,P),E.get(I,P)));return this}}var ti=P(3018);function tn(E){let I=(0,ti.B4)(E.rows);for(let P=0;P<E.rows;++P)for(let _=0;_<E.columns;++_)I[P]+=E.get(P,_);return I}function ta(E){let I=(0,ti.B4)(E.columns);for(let P=0;P<E.rows;++P)for(let _=0;_<E.columns;++_)I[_]+=E.get(P,_);return I}function th(E){let I=0;for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)I+=E.get(P,_);return I}function tu(E){let I=(0,ti.B4)(E.rows,1);for(let P=0;P<E.rows;++P)for(let _=0;_<E.columns;++_)I[P]*=E.get(P,_);return I}function tf(E){let I=(0,ti.B4)(E.columns,1);for(let P=0;P<E.rows;++P)for(let _=0;_<E.columns;++_)I[_]*=E.get(P,_);return I}function tc(E){let I=1;for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)I*=E.get(P,_);return I}function td(E,I,P){let _=E.rows,T=E.columns,L=[];for(let N=0;N<_;N++){let _=0,F=0,O=0;for(let I=0;I<T;I++)_+=O=E.get(N,I)-P[N],F+=O*O;I?L.push((F-_*_/T)/(T-1)):L.push((F-_*_/T)/T)}return L}function tm(E,I,P){let _=E.rows,T=E.columns,L=[];for(let N=0;N<T;N++){let T=0,F=0,O=0;for(let I=0;I<_;I++)T+=O=E.get(I,N)-P[N],F+=O*O;I?L.push((F-T*T/_)/(_-1)):L.push((F-T*T/_)/_)}return L}function tp(E,I,P){let _=E.rows,T=E.columns,L=_*T,N=0,F=0,O=0;for(let I=0;I<_;I++)for(let _=0;_<T;_++)N+=O=E.get(I,_)-P,F+=O*O;return I?(F-N*N/L)/(L-1):(F-N*N/L)/L}function tg(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)-I[P])}function tw(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)-I[_])}function tb(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)-I)}function ty(E){let I=[];for(let P=0;P<E.rows;P++){let _=0;for(let I=0;I<E.columns;I++)_+=Math.pow(E.get(P,I),2)/(E.columns-1);I.push(Math.sqrt(_))}return I}function tv(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)/I[P])}function tx(E){let I=[];for(let P=0;P<E.columns;P++){let _=0;for(let I=0;I<E.rows;I++)_+=Math.pow(E.get(I,P),2)/(E.rows-1);I.push(Math.sqrt(_))}return I}function tM(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)/I[_])}function tk(E){let I=E.size-1,P=0;for(let _=0;_<E.columns;_++)for(let T=0;T<E.rows;T++)P+=Math.pow(E.get(T,_),2)/I;return Math.sqrt(P)}function tE(E,I){for(let P=0;P<E.rows;P++)for(let _=0;_<E.columns;_++)E.set(P,_,E.get(P,_)/I)}class tA{static from1DArray(E,I,P){if(E*I!==P.length)throw RangeError("data length does not match given dimensions");let _=new tP(E,I);for(let T=0;T<E;T++)for(let E=0;E<I;E++)_.set(T,E,P[T*I+E]);return _}static rowVector(E){let I=new tP(1,E.length);for(let P=0;P<E.length;P++)I.set(0,P,E[P]);return I}static columnVector(E){let I=new tP(E.length,1);for(let P=0;P<E.length;P++)I.set(P,0,E[P]);return I}static zeros(E,I){return new tP(E,I)}static ones(E,I){return new tP(E,I).fill(1)}static rand(E,I,P={}){if("object"!=typeof P)throw TypeError("options must be an object");let{random:_=Math.random}=P,T=new tP(E,I);for(let P=0;P<E;P++)for(let E=0;E<I;E++)T.set(P,E,_());return T}static randInt(E,I,P={}){if("object"!=typeof P)throw TypeError("options must be an object");let{min:_=0,max:T=1e3,random:L=Math.random}=P;if(!Number.isInteger(_))throw TypeError("min must be an integer");if(!Number.isInteger(T))throw TypeError("max must be an integer");if(_>=T)throw RangeError("min must be smaller than max");let N=T-_,F=new tP(E,I);for(let P=0;P<E;P++)for(let E=0;E<I;E++){let I=_+Math.round(L()*N);F.set(P,E,I)}return F}static eye(E,I,P){void 0===I&&(I=E),void 0===P&&(P=1);let _=Math.min(E,I),T=this.zeros(E,I);for(let E=0;E<_;E++)T.set(E,E,P);return T}static diag(E,I,P){let _=E.length;void 0===I&&(I=_),void 0===P&&(P=I);let T=Math.min(_,I,P),L=this.zeros(I,P);for(let I=0;I<T;I++)L.set(I,I,E[I]);return L}static min(E,I){E=this.checkMatrix(E),I=this.checkMatrix(I);let P=E.rows,_=E.columns,T=new tP(P,_);for(let L=0;L<P;L++)for(let P=0;P<_;P++)T.set(L,P,Math.min(E.get(L,P),I.get(L,P)));return T}static max(E,I){E=this.checkMatrix(E),I=this.checkMatrix(I);let P=E.rows,_=E.columns,T=new this(P,_);for(let L=0;L<P;L++)for(let P=0;P<_;P++)T.set(L,P,Math.max(E.get(L,P),I.get(L,P)));return T}static checkMatrix(E){return tA.isMatrix(E)?E:new tP(E)}static isMatrix(E){return null!=E&&"Matrix"===E.klass}get size(){return this.rows*this.columns}apply(E){if("function"!=typeof E)throw TypeError("callback must be a function");for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)E.call(this,I,P);return this}to1DArray(){let E=[];for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)E.push(this.get(I,P));return E}to2DArray(){let E=[];for(let I=0;I<this.rows;I++){E.push([]);for(let P=0;P<this.columns;P++)E[I].push(this.get(I,P))}return E}toJSON(){return this.to2DArray()}isRowVector(){return 1===this.rows}isColumnVector(){return 1===this.columns}isVector(){return 1===this.rows||1===this.columns}isSquare(){return this.rows===this.columns}isEmpty(){return 0===this.rows||0===this.columns}isSymmetric(){if(this.isSquare()){for(let E=0;E<this.rows;E++)for(let I=0;I<=E;I++)if(this.get(E,I)!==this.get(I,E))return!1;return!0}return!1}isEchelonForm(){let E=0,I=0,P=-1,_=!0,T=!1;for(;E<this.rows&&_;){for(I=0,T=!1;I<this.columns&&!1===T;)0===this.get(E,I)?I++:1===this.get(E,I)&&I>P?(T=!0,P=I):(_=!1,T=!0);E++}return _}isReducedEchelonForm(){let E=0,I=0,P=-1,_=!0,T=!1;for(;E<this.rows&&_;){for(I=0,T=!1;I<this.columns&&!1===T;)0===this.get(E,I)?I++:1===this.get(E,I)&&I>P?(T=!0,P=I):(_=!1,T=!0);for(let P=I+1;P<this.rows;P++)0!==this.get(E,P)&&(_=!1);E++}return _}echelonForm(){let E=this.clone(),I=0,P=0;for(;I<E.rows&&P<E.columns;){let _=I;for(let T=I;T<E.rows;T++)E.get(T,P)>E.get(_,P)&&(_=T);if(0===E.get(_,P))P++;else{E.swapRows(I,_);let T=E.get(I,P);for(let _=P;_<E.columns;_++)E.set(I,_,E.get(I,_)/T);for(let _=I+1;_<E.rows;_++){let T=E.get(_,P)/E.get(I,P);E.set(_,P,0);for(let L=P+1;L<E.columns;L++)E.set(_,L,E.get(_,L)-E.get(I,L)*T)}I++,P++}}return E}reducedEchelonForm(){let E=this.echelonForm(),I=E.columns,P=E.rows,_=P-1;for(;_>=0;)if(0===E.maxRow(_))_--;else{let T=0,L=!1;for(;T<P&&!1===L;)1===E.get(_,T)?L=!0:T++;for(let P=0;P<_;P++){let L=E.get(P,T);for(let N=T;N<I;N++){let I=E.get(P,N)-L*E.get(_,N);E.set(P,N,I)}}_--}return E}set(){throw Error("set method is unimplemented")}get(){throw Error("get method is unimplemented")}repeat(E={}){if("object"!=typeof E)throw TypeError("options must be an object");let{rows:I=1,columns:P=1}=E;if(!Number.isInteger(I)||I<=0)throw TypeError("rows must be a positive integer");if(!Number.isInteger(P)||P<=0)throw TypeError("columns must be a positive integer");let _=new tP(this.rows*I,this.columns*P);for(let E=0;E<I;E++)for(let I=0;I<P;I++)_.setSubMatrix(this,this.rows*E,this.columns*I);return _}fill(E){for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,E);return this}neg(){return this.mulS(-1)}getRow(E){(0,ti.zb)(this,E);let I=[];for(let P=0;P<this.columns;P++)I.push(this.get(E,P));return I}getRowVector(E){return tP.rowVector(this.getRow(E))}setRow(E,I){(0,ti.zb)(this,E),I=(0,ti.on)(this,I);for(let P=0;P<this.columns;P++)this.set(E,P,I[P]);return this}swapRows(E,I){(0,ti.zb)(this,E),(0,ti.zb)(this,I);for(let P=0;P<this.columns;P++){let _=this.get(E,P);this.set(E,P,this.get(I,P)),this.set(I,P,_)}return this}getColumn(E){(0,ti.bp)(this,E);let I=[];for(let P=0;P<this.rows;P++)I.push(this.get(P,E));return I}getColumnVector(E){return tP.columnVector(this.getColumn(E))}setColumn(E,I){(0,ti.bp)(this,E),I=(0,ti.Um)(this,I);for(let P=0;P<this.rows;P++)this.set(P,E,I[P]);return this}swapColumns(E,I){(0,ti.bp)(this,E),(0,ti.bp)(this,I);for(let P=0;P<this.rows;P++){let _=this.get(P,E);this.set(P,E,this.get(P,I)),this.set(P,I,_)}return this}addRowVector(E){E=(0,ti.on)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)+E[P]);return this}subRowVector(E){E=(0,ti.on)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)-E[P]);return this}mulRowVector(E){E=(0,ti.on)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)*E[P]);return this}divRowVector(E){E=(0,ti.on)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)/E[P]);return this}addColumnVector(E){E=(0,ti.Um)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)+E[I]);return this}subColumnVector(E){E=(0,ti.Um)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)-E[I]);return this}mulColumnVector(E){E=(0,ti.Um)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)*E[I]);return this}divColumnVector(E){E=(0,ti.Um)(this,E);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.set(I,P,this.get(I,P)/E[I]);return this}mulRow(E,I){(0,ti.zb)(this,E);for(let P=0;P<this.columns;P++)this.set(E,P,this.get(E,P)*I);return this}mulColumn(E,I){(0,ti.bp)(this,E);for(let P=0;P<this.rows;P++)this.set(P,E,this.get(P,E)*I);return this}max(E){if(this.isEmpty())return NaN;switch(E){case"row":{let E=Array(this.rows).fill(Number.NEGATIVE_INFINITY);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)>E[I]&&(E[I]=this.get(I,P));return E}case"column":{let E=Array(this.columns).fill(Number.NEGATIVE_INFINITY);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)>E[P]&&(E[P]=this.get(I,P));return E}case void 0:{let E=this.get(0,0);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)>E&&(E=this.get(I,P));return E}default:throw Error(`invalid option: ${E}`)}}maxIndex(){(0,ti.cT)(this);let E=this.get(0,0),I=[0,0];for(let P=0;P<this.rows;P++)for(let _=0;_<this.columns;_++)this.get(P,_)>E&&(E=this.get(P,_),I[0]=P,I[1]=_);return I}min(E){if(this.isEmpty())return NaN;switch(E){case"row":{let E=Array(this.rows).fill(Number.POSITIVE_INFINITY);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)<E[I]&&(E[I]=this.get(I,P));return E}case"column":{let E=Array(this.columns).fill(Number.POSITIVE_INFINITY);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)<E[P]&&(E[P]=this.get(I,P));return E}case void 0:{let E=this.get(0,0);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)this.get(I,P)<E&&(E=this.get(I,P));return E}default:throw Error(`invalid option: ${E}`)}}minIndex(){(0,ti.cT)(this);let E=this.get(0,0),I=[0,0];for(let P=0;P<this.rows;P++)for(let _=0;_<this.columns;_++)this.get(P,_)<E&&(E=this.get(P,_),I[0]=P,I[1]=_);return I}maxRow(E){if((0,ti.zb)(this,E),this.isEmpty())return NaN;let I=this.get(E,0);for(let P=1;P<this.columns;P++)this.get(E,P)>I&&(I=this.get(E,P));return I}maxRowIndex(E){(0,ti.zb)(this,E),(0,ti.cT)(this);let I=this.get(E,0),P=[E,0];for(let _=1;_<this.columns;_++)this.get(E,_)>I&&(I=this.get(E,_),P[1]=_);return P}minRow(E){if((0,ti.zb)(this,E),this.isEmpty())return NaN;let I=this.get(E,0);for(let P=1;P<this.columns;P++)this.get(E,P)<I&&(I=this.get(E,P));return I}minRowIndex(E){(0,ti.zb)(this,E),(0,ti.cT)(this);let I=this.get(E,0),P=[E,0];for(let _=1;_<this.columns;_++)this.get(E,_)<I&&(I=this.get(E,_),P[1]=_);return P}maxColumn(E){if((0,ti.bp)(this,E),this.isEmpty())return NaN;let I=this.get(0,E);for(let P=1;P<this.rows;P++)this.get(P,E)>I&&(I=this.get(P,E));return I}maxColumnIndex(E){(0,ti.bp)(this,E),(0,ti.cT)(this);let I=this.get(0,E),P=[0,E];for(let _=1;_<this.rows;_++)this.get(_,E)>I&&(I=this.get(_,E),P[0]=_);return P}minColumn(E){if((0,ti.bp)(this,E),this.isEmpty())return NaN;let I=this.get(0,E);for(let P=1;P<this.rows;P++)this.get(P,E)<I&&(I=this.get(P,E));return I}minColumnIndex(E){(0,ti.bp)(this,E),(0,ti.cT)(this);let I=this.get(0,E),P=[0,E];for(let _=1;_<this.rows;_++)this.get(_,E)<I&&(I=this.get(_,E),P[0]=_);return P}diag(){let E=Math.min(this.rows,this.columns),I=[];for(let P=0;P<E;P++)I.push(this.get(P,P));return I}norm(E="frobenius"){let I=0;if("max"===E)return this.max();if("frobenius"===E){for(let E=0;E<this.rows;E++)for(let P=0;P<this.columns;P++)I+=this.get(E,P)*this.get(E,P);return Math.sqrt(I)}throw RangeError(`unknown norm type: ${E}`)}cumulativeSum(){let E=0;for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)E+=this.get(I,P),this.set(I,P,E);return this}dot(E){tA.isMatrix(E)&&(E=E.to1DArray());let I=this.to1DArray();if(I.length!==E.length)throw RangeError("vectors do not have the same size");let P=0;for(let _=0;_<I.length;_++)P+=I[_]*E[_];return P}mmul(E){E=tP.checkMatrix(E);let I=this.rows,P=this.columns,_=E.columns,T=new tP(I,_),L=new Float64Array(P);for(let N=0;N<_;N++){for(let I=0;I<P;I++)L[I]=E.get(I,N);for(let E=0;E<I;E++){let I=0;for(let _=0;_<P;_++)I+=this.get(E,_)*L[_];T.set(E,N,I)}}return T}strassen2x2(E){E=tP.checkMatrix(E);let I=new tP(2,2),P=this.get(0,0),_=E.get(0,0),T=this.get(0,1),L=E.get(0,1),N=this.get(1,0),F=E.get(1,0),O=this.get(1,1),$=E.get(1,1),Z=(P+O)*(_+$),W=(N+O)*_,J=P*(L-$),Q=O*(F-_),te=(P+T)*$,ti=(N-P)*(_+L),tn=(T-O)*(F+$),ta=Z+Q-te+tn,th=J+te,tu=W+Q,tf=Z-W+J+ti;return I.set(0,0,ta),I.set(0,1,th),I.set(1,0,tu),I.set(1,1,tf),I}strassen3x3(E){E=tP.checkMatrix(E);let I=new tP(3,3),P=this.get(0,0),_=this.get(0,1),T=this.get(0,2),L=this.get(1,0),N=this.get(1,1),F=this.get(1,2),O=this.get(2,0),$=this.get(2,1),Z=this.get(2,2),W=E.get(0,0),J=E.get(0,1),Q=E.get(0,2),te=E.get(1,0),ti=E.get(1,1),tn=E.get(1,2),ta=E.get(2,0),th=E.get(2,1),tu=E.get(2,2),tf=(P+_+T-L-N-$-Z)*ti,tc=(P-L)*(-J+ti),td=N*(-W+J+te-ti-tn-ta+tu),tm=(-P+L+N)*(W-J+ti),tp=(L+N)*(-W+J),tg=P*W,tw=(-P+O+$)*(W-Q+tn),tb=(-P+O)*(Q-tn),ty=(O+$)*(-W+Q),tv=(P+_+T-N-F-O-$)*tn,tx=$*(-W+Q+te-ti-tn-ta+th),tM=(-T+$+Z)*(ti+ta-th),tk=(T-Z)*(ti-th),tE=T*ta,tA=($+Z)*(-ta+th),tS=(-T+N+F)*(tn+ta-tu),tI=(T-F)*(tn-tu),tD=(N+F)*(-ta+tu),t_=_*te,tC=F*th,tB=L*Q,tT=O*J,tR=Z*tu,tU=tg+tE+t_,tL=tf+tm+tp+tg+tM+tE+tA,tN=tg+tw+ty+tv+tE+tS+tD,tF=tc+td+tm+tg+tE+tS+tI,tO=tc+tm+tp+tg+tC,tY=tE+tS+tI+tD+tB,tV=tg+tw+tb+tx+tM+tk+tE,tX=tM+tk+tE+tA+tT,tz=tg+tw+tb+ty+tR;return I.set(0,0,tU),I.set(0,1,tL),I.set(0,2,tN),I.set(1,0,tF),I.set(1,1,tO),I.set(1,2,tY),I.set(2,0,tV),I.set(2,1,tX),I.set(2,2,tz),I}mmulStrassen(E){E=tP.checkMatrix(E);let I=this.clone(),P=I.rows,_=I.columns,T=E.rows,L=E.columns;function N(E,I,P){let _=E.rows,T=E.columns;return _===I&&T===P?E:tA.zeros(I,P).setSubMatrix(E,0,0)}_!==T&&console.warn(`Multiplying ${P} x ${_} and ${T} x ${L} matrix: dimensions do not match.`);let F=Math.max(P,T),O=Math.max(_,L);function $(E,I,P,_){if(P<=512||_<=512)return E.mmul(I);P%2==1&&_%2==1?(E=N(E,P+1,_+1),I=N(I,P+1,_+1)):P%2==1?(E=N(E,P+1,_),I=N(I,P+1,_)):_%2==1&&(E=N(E,P,_+1),I=N(I,P,_+1));let T=parseInt(E.rows/2,10),L=parseInt(E.columns/2,10),F=E.subMatrix(0,T-1,0,L-1),O=I.subMatrix(0,T-1,0,L-1),Z=E.subMatrix(0,T-1,L,E.columns-1),W=I.subMatrix(0,T-1,L,I.columns-1),J=E.subMatrix(T,E.rows-1,0,L-1),Q=I.subMatrix(T,I.rows-1,0,L-1),te=E.subMatrix(T,E.rows-1,L,E.columns-1),ti=I.subMatrix(T,I.rows-1,L,I.columns-1),tn=$(tA.add(F,te),tA.add(O,ti),T,L),ta=$(tA.add(J,te),O,T,L),th=$(F,tA.sub(W,ti),T,L),tu=$(te,tA.sub(Q,O),T,L),tf=$(tA.add(F,Z),ti,T,L),tc=$(tA.sub(J,F),tA.add(O,W),T,L),td=$(tA.sub(Z,te),tA.add(Q,ti),T,L),tm=tA.add(tn,tu);tm.sub(tf),tm.add(td);let tp=tA.add(th,tf),tg=tA.add(ta,tu),tw=tA.sub(tn,ta);tw.add(th),tw.add(tc);let tb=tA.zeros(2*tm.rows,2*tm.columns);return(tb=(tb=(tb=(tb=tb.setSubMatrix(tm,0,0)).setSubMatrix(tp,tm.rows,0)).setSubMatrix(tg,0,tm.columns)).setSubMatrix(tw,tm.rows,tm.columns)).subMatrix(0,P-1,0,_-1)}return $(I=N(I,F,O),E=N(E,F,O),F,O)}scaleRows(E={}){if("object"!=typeof E)throw TypeError("options must be an object");let{min:I=0,max:P=1}=E;if(!Number.isFinite(I))throw TypeError("min must be a number");if(!Number.isFinite(P))throw TypeError("max must be a number");if(I>=P)throw RangeError("min must be smaller than max");let _=new tP(this.rows,this.columns);for(let E=0;E<this.rows;E++){let T=this.getRow(E);T.length>0&&N(T,{min:I,max:P,output:T}),_.setRow(E,T)}return _}scaleColumns(E={}){if("object"!=typeof E)throw TypeError("options must be an object");let{min:I=0,max:P=1}=E;if(!Number.isFinite(I))throw TypeError("min must be a number");if(!Number.isFinite(P))throw TypeError("max must be a number");if(I>=P)throw RangeError("min must be smaller than max");let _=new tP(this.rows,this.columns);for(let E=0;E<this.columns;E++){let T=this.getColumn(E);T.length&&N(T,{min:I,max:P,output:T}),_.setColumn(E,T)}return _}flipRows(){let E=Math.ceil(this.columns/2);for(let I=0;I<this.rows;I++)for(let P=0;P<E;P++){let E=this.get(I,P),_=this.get(I,this.columns-1-P);this.set(I,P,_),this.set(I,this.columns-1-P,E)}return this}flipColumns(){let E=Math.ceil(this.rows/2);for(let I=0;I<this.columns;I++)for(let P=0;P<E;P++){let E=this.get(P,I),_=this.get(this.rows-1-P,I);this.set(P,I,_),this.set(this.rows-1-P,I,E)}return this}kroneckerProduct(E){E=tP.checkMatrix(E);let I=this.rows,P=this.columns,_=E.rows,T=E.columns,L=new tP(I*_,P*T);for(let N=0;N<I;N++)for(let I=0;I<P;I++)for(let P=0;P<_;P++)for(let F=0;F<T;F++)L.set(_*N+P,T*I+F,this.get(N,I)*E.get(P,F));return L}kroneckerSum(E){if(E=tP.checkMatrix(E),!this.isSquare()||!E.isSquare())throw Error("Kronecker Sum needs two Square Matrices");let I=this.rows,P=E.rows,_=this.kroneckerProduct(tP.eye(P,P)),T=tP.eye(I,I).kroneckerProduct(E);return _.add(T)}transpose(){let E=new tP(this.columns,this.rows);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)E.set(P,I,this.get(I,P));return E}sortRows(E=tS){for(let I=0;I<this.rows;I++)this.setRow(I,this.getRow(I).sort(E));return this}sortColumns(E=tS){for(let I=0;I<this.columns;I++)this.setColumn(I,this.getColumn(I).sort(E));return this}subMatrix(E,I,P,_){(0,ti.J5)(this,E,I,P,_);let T=new tP(I-E+1,_-P+1);for(let L=E;L<=I;L++)for(let I=P;I<=_;I++)T.set(L-E,I-P,this.get(L,I));return T}subMatrixRow(E,I,P){if(void 0===I&&(I=0),void 0===P&&(P=this.columns-1),I>P||I<0||I>=this.columns||P<0||P>=this.columns)throw RangeError("Argument out of range");let _=new tP(E.length,P-I+1);for(let T=0;T<E.length;T++)for(let L=I;L<=P;L++){if(E[T]<0||E[T]>=this.rows)throw RangeError(`Row index out of range: ${E[T]}`);_.set(T,L-I,this.get(E[T],L))}return _}subMatrixColumn(E,I,P){if(void 0===I&&(I=0),void 0===P&&(P=this.rows-1),I>P||I<0||I>=this.rows||P<0||P>=this.rows)throw RangeError("Argument out of range");let _=new tP(P-I+1,E.length);for(let T=0;T<E.length;T++)for(let L=I;L<=P;L++){if(E[T]<0||E[T]>=this.columns)throw RangeError(`Column index out of range: ${E[T]}`);_.set(L-I,T,this.get(L,E[T]))}return _}setSubMatrix(E,I,P){if((E=tP.checkMatrix(E)).isEmpty())return this;let _=I+E.rows-1,T=P+E.columns-1;(0,ti.J5)(this,I,_,P,T);for(let _=0;_<E.rows;_++)for(let T=0;T<E.columns;T++)this.set(I+_,P+T,E.get(_,T));return this}selection(E,I){(0,ti.ZR)(this,E),(0,ti.g)(this,I);let P=new tP(E.length,I.length);for(let _=0;_<E.length;_++){let T=E[_];for(let E=0;E<I.length;E++){let L=I[E];P.set(_,E,this.get(T,L))}}return P}trace(){let E=Math.min(this.rows,this.columns),I=0;for(let P=0;P<E;P++)I+=this.get(P,P);return I}clone(){let E=new tP(this.rows,this.columns);for(let I=0;I<this.rows;I++)for(let P=0;P<this.columns;P++)E.set(I,P,this.get(I,P));return E}sum(E){switch(E){case"row":return tn(this);case"column":return ta(this);case void 0:return th(this);default:throw Error(`invalid option: ${E}`)}}product(E){switch(E){case"row":return tu(this);case"column":return tf(this);case void 0:return tc(this);default:throw Error(`invalid option: ${E}`)}}mean(E){let I=this.sum(E);switch(E){case"row":for(let E=0;E<this.rows;E++)I[E]/=this.columns;return I;case"column":for(let E=0;E<this.columns;E++)I[E]/=this.rows;return I;case void 0:return I/this.size;default:throw Error(`invalid option: ${E}`)}}variance(E,I={}){if("object"==typeof E&&(I=E,E=void 0),"object"!=typeof I)throw TypeError("options must be an object");let{unbiased:P=!0,mean:T=this.mean(E)}=I;if("boolean"!=typeof P)throw TypeError("unbiased must be a boolean");switch(E){case"row":if(!(0,_.N)(T))throw TypeError("mean must be an array");return td(this,P,T);case"column":if(!(0,_.N)(T))throw TypeError("mean must be an array");return tm(this,P,T);case void 0:if("number"!=typeof T)throw TypeError("mean must be a number");return tp(this,P,T);default:throw Error(`invalid option: ${E}`)}}standardDeviation(E,I){"object"==typeof E&&(I=E,E=void 0);let P=this.variance(E,I);if(void 0===E)return Math.sqrt(P);for(let E=0;E<P.length;E++)P[E]=Math.sqrt(P[E]);return P}center(E,I={}){if("object"==typeof E&&(I=E,E=void 0),"object"!=typeof I)throw TypeError("options must be an object");let{center:P=this.mean(E)}=I;switch(E){case"row":if(!(0,_.N)(P))throw TypeError("center must be an array");return tg(this,P),this;case"column":if(!(0,_.N)(P))throw TypeError("center must be an array");return tw(this,P),this;case void 0:if("number"!=typeof P)throw TypeError("center must be a number");return tb(this,P),this;default:throw Error(`invalid option: ${E}`)}}scale(E,I={}){if("object"==typeof E&&(I=E,E=void 0),"object"!=typeof I)throw TypeError("options must be an object");let P=I.scale;switch(E){case"row":if(void 0===P)P=ty(this);else if(!(0,_.N)(P))throw TypeError("scale must be an array");return tv(this,P),this;case"column":if(void 0===P)P=tx(this);else if(!(0,_.N)(P))throw TypeError("scale must be an array");return tM(this,P),this;case void 0:if(void 0===P)P=tk(this);else if("number"!=typeof P)throw TypeError("scale must be a number");return tE(this,P),this;default:throw Error(`invalid option: ${E}`)}}toString(E){return Z(this,E)}}function tS(E,I){return E-I}function tI(E){return E.every(E=>"number"==typeof E)}tA.prototype.klass="Matrix","undefined"!=typeof Symbol&&(tA.prototype[Symbol.for("nodejs.util.inspect.custom")]=$),tA.random=tA.rand,tA.randomInt=tA.randInt,tA.diagonal=tA.diag,tA.prototype.diagonal=tA.prototype.diag,tA.identity=tA.eye,tA.prototype.negate=tA.prototype.neg,tA.prototype.tensorProduct=tA.prototype.kroneckerProduct;class tP extends tA{constructor(E,I){if(super(),tP.isMatrix(E))return E.clone();if(Number.isInteger(E)&&E>=0){if(this.data=[],Number.isInteger(I)&&I>=0)for(let P=0;P<E;P++)this.data.push(new Float64Array(I));else throw TypeError("nColumns must be a positive integer")}else if((0,_.N)(E)){let P=E;if("number"!=typeof(I=(E=P.length)?P[0].length:0))throw TypeError("Data must be a 2D array with at least one element");this.data=[];for(let _=0;_<E;_++){if(P[_].length!==I)throw RangeError("Inconsistent array dimensions");if(!tI(P[_]))throw TypeError("Input data contains non-numeric values");this.data.push(Float64Array.from(P[_]))}}else throw TypeError("First argument must be a positive number or an array");this.rows=E,this.columns=I}set(E,I,P){return this.data[E][I]=P,this}get(E,I){return this.data[E][I]}removeRow(E){return(0,ti.zb)(this,E),this.data.splice(E,1),this.rows-=1,this}addRow(E,I){return void 0===I&&(I=E,E=this.rows),(0,ti.zb)(this,E,!0),I=Float64Array.from((0,ti.on)(this,I)),this.data.splice(E,0,I),this.rows+=1,this}removeColumn(E){(0,ti.bp)(this,E);for(let I=0;I<this.rows;I++){let P=new Float64Array(this.columns-1);for(let _=0;_<E;_++)P[_]=this.data[I][_];for(let _=E+1;_<this.columns;_++)P[_-1]=this.data[I][_];this.data[I]=P}return this.columns-=1,this}addColumn(E,I){void 0===I&&(I=E,E=this.columns),(0,ti.bp)(this,E,!0),I=(0,ti.Um)(this,I);for(let P=0;P<this.rows;P++){let _=new Float64Array(this.columns+1),T=0;for(;T<E;T++)_[T]=this.data[P][T];for(_[T++]=I[P];T<this.columns+1;T++)_[T]=this.data[P][T-1];this.data[P]=_}return this.columns+=1,this}}te(tA,tP)},3018:function(E,I,P){"use strict";P.d(I,{B4:function(){return W},J5:function(){return Z},Um:function(){return F},ZR:function(){return O},bp:function(){return L},cT:function(){return Q},g:function(){return $},on:function(){return N},zb:function(){return T}});var _=P(4091);function T(E,I,P){let _=P?E.rows:E.rows-1;if(I<0||I>_)throw RangeError("Row index out of range")}function L(E,I,P){let _=P?E.columns:E.columns-1;if(I<0||I>_)throw RangeError("Column index out of range")}function N(E,I){if(I.to1DArray&&(I=I.to1DArray()),I.length!==E.columns)throw RangeError("vector size must be the same as the number of columns");return I}function F(E,I){if(I.to1DArray&&(I=I.to1DArray()),I.length!==E.rows)throw RangeError("vector size must be the same as the number of rows");return I}function O(E,I){if(!(0,_.N)(I))throw TypeError("row indices must be an array");for(let P=0;P<I.length;P++)if(I[P]<0||I[P]>=E.rows)throw RangeError("row indices are out of range")}function $(E,I){if(!(0,_.N)(I))throw TypeError("column indices must be an array");for(let P=0;P<I.length;P++)if(I[P]<0||I[P]>=E.columns)throw RangeError("column indices are out of range")}function Z(E,I,P,_,T){if(5!=arguments.length)throw RangeError("expected 4 arguments");if(J("startRow",I),J("endRow",P),J("startColumn",_),J("endColumn",T),I>P||_>T||I<0||I>=E.rows||P<0||P>=E.rows||_<0||_>=E.columns||T<0||T>=E.columns)throw RangeError("Submatrix indices are out of range")}function W(E,I=0){let P=[];for(let _=0;_<E;_++)P.push(I);return P}function J(E,I){if("number"!=typeof I)throw TypeError(`${E} must be a number`)}function Q(E){if(E.isEmpty())throw Error("Empty matrix has no elements to index")}},4920:function(E,I,P){"use strict";P.d(I,{Z:function(){return T}});var _=P(5427);class T extends _.X{constructor(E,I,P){super(),this.matrix=E,this.rows=I,this.columns=P}}},5922:function(E,I,P){"use strict";P.d(I,{Z:function(){return T}});var _=P(4920);class T extends _.Z{constructor(E){super(E,E.columns,E.rows)}set(E,I,P){return this.matrix.set(I,E,P),this}get(E,I){return this.matrix.get(I,E)}}},1548:function(E,I,P){"use strict";P.d(I,{Z:function(){return T}});var _=P(5427);class T extends _.X{constructor(E){super(),this.data=E,this.rows=E.length,this.columns=E[0].length}set(E,I,P){return this.data[E][I]=P,this}get(E,I){return this.data[E][I]}}},2664:function(E){E.exports=I;function I(E,I){for(var P=Array(E=E||0),_=0;_<E;_++)P[_]=I;return P}},995:function(E){E.exports=I;function I(E){return 0===E?1:(E--,E|=E>>1,E|=E>>2,E|=E>>4,E|=E>>8,(E|=E>>16)+1)}},146:function(E,I,P){"use strict";var _=P(8005),T=P(6740),L=P(2231),N=P(7972),F=5,O=33306690738754716e-32,$=7771561172376103e-31;function Z(E,I,P,_){return function(P,T,L){var N=_(E(E(I(T[1],L[0]),I(-L[1],T[0])),E(I(P[1],T[0]),I(-T[1],P[0]))),E(I(P[1],L[0]),I(-L[1],P[0])));return N[N.length-1]}}function W(E,I,P,_){return function(T,L,N,F){var O=_(E(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),L[2]),E(P(E(I(L[1],F[0]),I(-F[1],L[0])),-N[2]),P(E(I(L[1],N[0]),I(-N[1],L[0])),F[2]))),E(P(E(I(L[1],F[0]),I(-F[1],L[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),F[2])))),E(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-N[2]),P(E(I(T[1],N[0]),I(-N[1],T[0])),F[2]))),E(P(E(I(L[1],N[0]),I(-N[1],L[0])),T[2]),E(P(E(I(T[1],N[0]),I(-N[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),N[2])))));return O[O.length-1]}}function J(E,I,P,_){return function(T,L,N,F,O){var $=_(E(E(E(P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),N[2]),E(P(E(I(N[1],O[0]),I(-O[1],N[0])),-F[2]),P(E(I(N[1],F[0]),I(-F[1],N[0])),O[2]))),L[3]),E(P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),L[2]),E(P(E(I(L[1],O[0]),I(-O[1],L[0])),-F[2]),P(E(I(L[1],F[0]),I(-F[1],L[0])),O[2]))),-N[3]),P(E(P(E(I(N[1],O[0]),I(-O[1],N[0])),L[2]),E(P(E(I(L[1],O[0]),I(-O[1],L[0])),-N[2]),P(E(I(L[1],N[0]),I(-N[1],L[0])),O[2]))),F[3]))),E(P(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),L[2]),E(P(E(I(L[1],F[0]),I(-F[1],L[0])),-N[2]),P(E(I(L[1],N[0]),I(-N[1],L[0])),F[2]))),-O[3]),E(P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),L[2]),E(P(E(I(L[1],O[0]),I(-O[1],L[0])),-F[2]),P(E(I(L[1],F[0]),I(-F[1],L[0])),O[2]))),T[3]),P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-F[2]),P(E(I(T[1],F[0]),I(-F[1],T[0])),O[2]))),-L[3])))),E(E(P(E(P(E(I(L[1],O[0]),I(-O[1],L[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),O[2]))),F[3]),E(P(E(P(E(I(L[1],F[0]),I(-F[1],L[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),F[2]))),-O[3]),P(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),L[2]),E(P(E(I(L[1],F[0]),I(-F[1],L[0])),-N[2]),P(E(I(L[1],N[0]),I(-N[1],L[0])),F[2]))),T[3]))),E(P(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-N[2]),P(E(I(T[1],N[0]),I(-N[1],T[0])),F[2]))),-L[3]),E(P(E(P(E(I(L[1],F[0]),I(-F[1],L[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),F[2]))),N[3]),P(E(P(E(I(L[1],N[0]),I(-N[1],L[0])),T[2]),E(P(E(I(T[1],N[0]),I(-N[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),N[2]))),-F[3]))))),E(E(E(P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),N[2]),E(P(E(I(N[1],O[0]),I(-O[1],N[0])),-F[2]),P(E(I(N[1],F[0]),I(-F[1],N[0])),O[2]))),T[3]),P(E(P(E(I(F[1],O[0]),I(-O[1],F[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-F[2]),P(E(I(T[1],F[0]),I(-F[1],T[0])),O[2]))),-N[3])),E(P(E(P(E(I(N[1],O[0]),I(-O[1],N[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-N[2]),P(E(I(T[1],N[0]),I(-N[1],T[0])),O[2]))),F[3]),P(E(P(E(I(N[1],F[0]),I(-F[1],N[0])),T[2]),E(P(E(I(T[1],F[0]),I(-F[1],T[0])),-N[2]),P(E(I(T[1],N[0]),I(-N[1],T[0])),F[2]))),-O[3]))),E(E(P(E(P(E(I(N[1],O[0]),I(-O[1],N[0])),L[2]),E(P(E(I(L[1],O[0]),I(-O[1],L[0])),-N[2]),P(E(I(L[1],N[0]),I(-N[1],L[0])),O[2]))),T[3]),P(E(P(E(I(N[1],O[0]),I(-O[1],N[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-N[2]),P(E(I(T[1],N[0]),I(-N[1],T[0])),O[2]))),-L[3])),E(P(E(P(E(I(L[1],O[0]),I(-O[1],L[0])),T[2]),E(P(E(I(T[1],O[0]),I(-O[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),O[2]))),N[3]),P(E(P(E(I(L[1],N[0]),I(-N[1],L[0])),T[2]),E(P(E(I(T[1],N[0]),I(-N[1],T[0])),-L[2]),P(E(I(T[1],L[0]),I(-L[1],T[0])),N[2]))),-O[3])))));return $[$.length-1]}}function Q(E){return(3===E?Z:4===E?W:J)(T,_,L,N)}var te=Q(3),ti=Q(4),tn=[function(){return 0},function(){return 0},function(E,I){return I[0]-E[0]},function(E,I,P){var _,T=(E[1]-P[1])*(I[0]-P[0]),L=(E[0]-P[0])*(I[1]-P[1]),N=T-L;if(T>0){if(L<=0)return N;_=T+L}else{if(!(T<0)||L>=0)return N;_=-(T+L)}var F=O*_;return N>=F||N<=-F?N:te(E,I,P)},function(E,I,P,_){var T=E[0]-_[0],L=I[0]-_[0],N=P[0]-_[0],F=E[1]-_[1],O=I[1]-_[1],Z=P[1]-_[1],W=E[2]-_[2],J=I[2]-_[2],Q=P[2]-_[2],te=L*Z,tn=N*O,ta=N*F,th=T*Z,tu=T*O,tf=L*F,tc=W*(te-tn)+J*(ta-th)+Q*(tu-tf),td=$*((Math.abs(te)+Math.abs(tn))*Math.abs(W)+(Math.abs(ta)+Math.abs(th))*Math.abs(J)+(Math.abs(tu)+Math.abs(tf))*Math.abs(Q));return tc>td||-tc>td?tc:ti(E,I,P,_)}];function ta(E){var I=tn[E.length];return I||(I=tn[E.length]=Q(E.length)),I.apply(void 0,E)}function th(E,I,P,_,T,L,N){return function(I,P,F,O,$){switch(arguments.length){case 0:case 1:return 0;case 2:return _(I,P);case 3:return T(I,P,F);case 4:return L(I,P,F,O);case 5:return N(I,P,F,O,$)}for(var Z=Array(arguments.length),W=0;W<arguments.length;++W)Z[W]=arguments[W];return E(Z)}}!function(){for(;tn.length<=F;)tn.push(Q(tn.length));E.exports=th.apply(void 0,[ta].concat(tn));for(var I=0;I<=F;++I)E.exports[I]=tn[I]}()},4707:function(E,I,P){E.exports=T;var _=P(146);function T(E,I){for(var P=I[0],T=I[1],L=E.length,N=1,F=L,O=0,$=L-1;O<F;$=O++){var Z=E[O],W=E[$],J=Z[1],Q=W[1];if(Q<J){if(Q<T&&T<J){var te=_(Z,W,I);if(0===te)return 0;N^=0<te|0}else if(T===J){var ti=E[(O+1)%L],tn=ti[1];if(J<tn){var te=_(Z,W,I);if(0===te)return 0;N^=0<te|0}}}else if(J<Q){if(J<T&&T<Q){var te=_(Z,W,I);if(0===te)return 0;N^=te<0|0}else if(T===J){var ti=E[(O+1)%L],tn=ti[1];if(tn<J){var te=_(Z,W,I);if(0===te)return 0;N^=te<0|0}}}else if(T===J){var ta=Math.min(Z[0],W[0]),th=Math.max(Z[0],W[0]);if(0===O){for(;$>0;){var tu=($+L-1)%L,tf=E[tu];if(tf[1]!==T)break;var tc=tf[0];ta=Math.min(ta,tc),th=Math.max(th,tc),$=tu}if(0===$){if(ta<=P&&P<=th)return 0;return 1}F=$+1}for(var td=E[($+L-1)%L][1];O+1<F;){var tf=E[O+1];if(tf[1]!==T)break;var tc=tf[0];ta=Math.min(ta,tc),th=Math.max(th,tc),O+=1}if(ta<=P&&P<=th)return 0;var tm=E[(O+1)%L][1];P<ta&&td<T!=tm<T&&(N^=1)}}return 2*N-1}},2231:function(E,I,P){"use strict";var _=P(8005),T=P(6359);function L(E,I){var P=E.length;if(1===P){var L=_(E[0],I);return L[0]?L:[L[1]]}var N=Array(2*P),F=[.1,.1],O=[.1,.1],$=0;_(E[0],I,F),F[0]&&(N[$++]=F[0]);for(var Z=1;Z<P;++Z){_(E[Z],I,O),T(F[1],O[0],F),F[0]&&(N[$++]=F[0]);var W=O[1],J=F[1],Q=W+J,te=J-(Q-W);F[1]=Q,te&&(N[$++]=te)}return F[1]&&(N[$++]=F[1]),0===$&&(N[$++]=0),N.length=$,N}E.exports=L},7972:function(E){"use strict";function I(E,I){var P=E+I,_=P-E,T=E-(P-_)+(I-_);return T?[T,P]:[P]}function P(E,P){var _,T,L,N,F,O,$,Z=0|E.length,W=0|P.length;if(1===Z&&1===W)return I(E[0],-P[0]);var J=Array(Z+W),Q=0,te=0,ti=0,tn=Math.abs,ta=E[0],th=tn(ta),tu=-P[ti],tf=tn(tu);th<tf?(T=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(T=tu,(ti+=1)<W&&(tf=tn(tu=-P[ti]))),te<Z&&th<tf||ti>=W?(_=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(_=tu,(ti+=1)<W&&(tf=tn(tu=-P[ti])));for(var tc=_+T,td=tc-_,tm=T-td,tp=tm,tg=tc;te<Z&&ti<W;)th<tf?(_=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(_=tu,(ti+=1)<W&&(tf=tn(tu=-P[ti]))),td=(tc=_+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L;for(;te<Z;)td=(tc=(_=ta)+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L,(te+=1)<Z&&(ta=E[te]);for(;ti<W;)td=(tc=(_=tu)+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L,(ti+=1)<W&&(tu=-P[ti]);return tp&&(J[Q++]=tp),tg&&(J[Q++]=tg),Q||(J[Q++]=0),J.length=Q,J}E.exports=P},6740:function(E){"use strict";function I(E,I){var P=E+I,_=P-E,T=E-(P-_)+(I-_);return T?[T,P]:[P]}function P(E,P){var _,T,L,N,F,O,$,Z=0|E.length,W=0|P.length;if(1===Z&&1===W)return I(E[0],P[0]);var J=Array(Z+W),Q=0,te=0,ti=0,tn=Math.abs,ta=E[0],th=tn(ta),tu=P[ti],tf=tn(tu);th<tf?(T=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(T=tu,(ti+=1)<W&&(tf=tn(tu=P[ti]))),te<Z&&th<tf||ti>=W?(_=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(_=tu,(ti+=1)<W&&(tf=tn(tu=P[ti])));for(var tc=_+T,td=tc-_,tm=T-td,tp=tm,tg=tc;te<Z&&ti<W;)th<tf?(_=ta,(te+=1)<Z&&(th=tn(ta=E[te]))):(_=tu,(ti+=1)<W&&(tf=tn(tu=P[ti]))),td=(tc=_+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L;for(;te<Z;)td=(tc=(_=ta)+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L,(te+=1)<Z&&(ta=E[te]);for(;ti<W;)td=(tc=(_=tu)+(T=tp))-_,(tm=T-td)&&(J[Q++]=tm),N=(L=tg+tc)-tg,F=L-N,O=tc-N,tp=($=tg-F)+O,tg=L,(ti+=1)<W&&(tu=P[ti]);return tp&&(J[Q++]=tp),tg&&(J[Q++]=tg),Q||(J[Q++]=0),J.length=Q,J}E.exports=P},8005:function(E){"use strict";E.exports=P;var I=134217729;function P(E,P,_){var T=E*P,L=I*E,N=L-E,F=L-N,O=E-F,$=I*P,Z=$-P,W=$-Z,J=P-W,Q=T-F*W-O*W-F*J,te=O*J-Q;return _?(_[0]=te,_[1]=T,_):[te,T]}},6359:function(E){"use strict";function I(E,I,P){var _=E+I,T=_-E,L=_-T,N=I-T,F=E-L;return P?(P[0]=F+N,P[1]=_,P):[F+N,_]}E.exports=I},6732:function(E,I,P){"use strict";var _=P(7963),T=navigator.hardwareConcurrency||1;function L(E,I){if("string"!=typeof E&&"function"!=typeof E)throw TypeError("func argument must be a function");if(void 0===I&&(I={}),"object"!=typeof I||null===I)throw TypeError("options argument must be an object");this._workerCode=E.toString(),void 0===I.maxWorkers||"auto"===I.maxWorkers?this._numWorkers=Math.min(T-1,1):I.maxWorkers>0?this._numWorkers=Math.min(I.maxWorkers,T):this._numWorkers=T,this._workers=new Map,this._timeout=I.timeout||0,this._terminateOnError=!!I.terminateOnError;var P=I.deps;"string"==typeof P&&(P=[P]),Array.isArray(P)||(P=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._init(P)}L.prototype._init=function(E){for(var I=_.newWorkerURL(this._workerCode,E),P=0;P<this._numWorkers;P++){var T=new Worker(I);T.onmessage=this._onmessage.bind(this,T),T.onerror=this._onerror.bind(this,T),T.running=!1,T.id=P,this._workers.set(T,null)}URL.revokeObjectURL(I)},L.prototype._onerror=function(E,I){if(!this._terminated){this._working--,E.running=!1;var P=this._workers.get(E);P&&P[1](I.message),this._workers.set(E,null),this._terminateOnError?this.terminate():this._exec()}},L.prototype._onmessage=function(E,I){if(!this._terminated){this._working--,E.running=!1;var P=this._workers.get(E);P&&P[0](I.data.data),this._workers.set(E,null),this._exec()}},L.prototype._exec=function(){for(var E of this._workers.keys()){if(this._working===this._numWorkers||0===this._waiting.length)return;if(!E.running)for(var I=0;I<this._waiting.length;I++){var P=this._waiting[I];if("number"!=typeof P[4]||P[4]===E.id){this._waiting.splice(I,1),E.postMessage({action:"exec",event:P[0],args:P[1]},P[2]),E.running=!0,E.time=Date.now(),this._workers.set(E,P[3]),this._working++;break}}}},L.prototype.terminate=function(){if(!this._terminated){for(var E of this._workers)E[0].terminate(),E[1]&&E[1][1](Error("Terminated"));this._workers.clear(),this._waiting=[],this._working=0,this._terminated=!0}},L.prototype.postAll=function(E,I){if(this._terminated)throw Error("Cannot post (terminated)");var P=[];for(var _ of this._workers.keys())P.push(this.post(E,I,[],_.id));return Promise.all(P)},L.prototype.post=function(E,I,P,_){void 0===I&&(I=[]),void 0===P&&(P=[]),Array.isArray(I)||(I=[I]),Array.isArray(P)||(P=[P]);var T=this;return new Promise(function(L,N){if(T._terminated)throw Error("Cannot post (terminated)");T._waiting.push([E,I,P,[L,N],_]),T._exec()})},E.exports=L},7963:function(E,I){"use strict";var P=(function(){function E(){this._listeners={}}self.window=self,E.prototype.on=function(E,I){if(this._listeners[E])throw RangeError("there is already a listener for "+E);if("function"!=typeof I)throw TypeError("callback argument must be a function");this._listeners[E]=I},E.prototype._send=function(E,I,P){void 0===P?P=[]:Array.isArray(P)||(P=[P]),self.postMessage({id:E,data:I},P)},E.prototype._trigger=function(E,I){if(!this._listeners[E])throw Error("event "+E+" is not defined");this._listeners[E].apply(null,I)};var I=new E;self.onmessage=function(E){switch(E.data.action){case"exec":E.data.args.unshift(function(P,_){I._send(E.data.id,P,_)}),I._trigger(E.data.event,E.data.args);break;case"ping":I._send(E.data.id,"pong");break;default:throw Error("unexpected action: "+E.data.action)}}}).toString().split('"CODE";');I.newWorkerURL=function(E,I){var _=new Blob(["(",P[0],"importScripts.apply(self, "+JSON.stringify(I)+");\n","(",E,")();",P[1],")();"],{type:"application/javascript"});return URL.createObjectURL(_)}},7462:function(E,I,P){"use strict";function _(){return(_=Object.assign?Object.assign.bind():function(E){for(var I=1;I<arguments.length;I++){var P=arguments[I];for(var _ in P)Object.prototype.hasOwnProperty.call(P,_)&&(E[_]=P[_])}return E}).apply(this,arguments)}P.d(I,{Z:function(){return _}})},2898:function(E){"use strict";E.exports={version:"1.0.1"}}}]);